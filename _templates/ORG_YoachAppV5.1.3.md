# YoachApp V5.1 系统架构文档

**文档版本**: v5.1.3
**文档类型**: ORG 文档（Organization-level System Architecture）
**创建日期**: 2025-11-30
**更新日期**: 2025-12-02
**目标读者**: 产品团队、开发团队、创始团队

---

## 一句话定位

> **YoachApp V5.1 = 从「看报告」升级成「解题训练台」。**
>
> 用户上传一条视频，不只是拿到评分，而是拿到接下来 7 天的训练脚本。

---

## 目录

1. [V5.1 升级概述](#1-v51-升级概述)
2. [核心概念：解题面板](#2-核心概念解题面板)
3. [7 天解题训练脚本](#3-7-天解题训练脚本)
4. [Tab 架构升级](#4-tab-架构升级)
5. [Atlas 角色简化](#5-atlas-角色简化)
6. [用户旅程](#6-用户旅程)
7. [用户画像](#7-用户画像)
8. [技术架构变更](#8-技术架构变更)
9. [成功指标](#9-成功指标)
10. [文档索引](#10-文档索引)

---

## 1. V5.1 升级概述

### 1.1 V5 vs V5.1 对比

| 维度 | V5（现状） | V5.1（升级） |
|------|-----------|-------------|
| **核心体验** | 动作评分 + 报告 + 推荐练习 | 解题面板 + 7 天训练脚本 |
| **用户心智** | 「看看我打得怎么样」 | 「帮我解决这个问题」 |
| **输出物** | 分析报告 | 可执行的训练计划 |
| **Today 定位** | 任务列表 | 解题计划执行页 |
| **Analyze 定位** | 报告历史 | Session 列表（解题档案） |
| **Atlas 定位** | 通用聊天 | 专注两件事（优先级 + 排计划） |

### 1.2 升级核心理念

```
V5:   视频 → 报告 → 推荐练习 → （用户自己去练）
                              ↓
V5.1: 视频 → 解题面板 → 7天训练脚本 → Today执行 → Growth验证
                              ↓
                        完整闭环
```

### 1.3 关键价值主张升级

| V5 价值 | V5.1 升级 |
|---------|----------|
| Know what to fix | Know what to fix **+ How to fix it this week** |
| Know how to train | **Get a ready-to-execute 7-day plan** |
| Visible progress | **Progress tied to problem-solving plans** |

---

## 2. 核心概念：解题面板

### 2.1 什么是解题面板

**解题面板（Problem-Solving Panel）** 是 V5.1 的核心页面，替代原来的「分析报告」。

用户上传并分析完一条视频后，不再跳到一个冷冰冰的「报告页」，而是进入一块新的核心页面：**解题面板**。

### 2.2 三层结构

```
┌─────────────────────────────────────────────────────────────┐
│                     解题面板 (Problem-Solving Panel)          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 【上层】Session 概览                                  │   │
│  │ ┌─────────────────┐  ┌─────────────────────────┐    │   │
│  │ │ [视频预览 16:9] │  │ Overall: 72/100         │    │   │
│  │ │    [▶ 播放]     │  │ ━━━━━━━━━━━━━━━━━━━━    │    │   │
│  │ └─────────────────┘  │ 节奏 ████████ 78        │    │   │
│  │ 正手底线 · 今天       │ 击球点 █████ 62          │    │   │
│  │                      │ 重心 ██████ 68           │    │   │
│  │                      └─────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 【中层】问题诊断 (Issues)                             │   │
│  │                                                     │   │
│  │  问题 1: 击球点偏晚                          [展开]  │   │
│  │  ├── 关键帧证据 [帧1] [帧2] [帧3]                    │   │
│  │  ├── 原因分析: 引拍启动时机过迟                      │   │
│  │  └── 推荐 Drill: 击球点前移练习 (10分钟)             │   │
│  │                                                     │   │
│  │  问题 2: 击球后重心前倾不足                  [展开]  │   │
│  │  ├── 关键帧证据 [帧1] [帧2]                          │   │
│  │  ├── 原因分析: 上半身提前打开                        │   │
│  │  └── 推荐 Drill: 重心转移练习 (8分钟)                │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 【下层】7 天解题训练脚本                              │   │
│  │                                                     │   │
│  │  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐│
│  │  │Day1 │ │Day2 │ │Day3 │ │Day4 │ │Day5 │ │Day6 │ │Day7 ││
│  │  │ 25m │ │REST │ │ 20m │ │REST │ │ 25m │ │REST │ │验证 ││
│  │  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘│
│  │                                                     │   │
│  │  Day 1 (今天) · 25 分钟                              │   │
│  │  ├── 热身: 动态拉伸 (5分钟)                          │   │
│  │  ├── Drill A: 击球点前移练习 (10分钟)                │   │
│  │  └── Drill C: 重心转移练习 (10分钟)                  │   │
│  │                                                     │   │
│  │  [让 Atlas 帮我调整]              [保存并开练 →]     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 为什么要这么做

| 问题 | 解决方案 |
|------|----------|
| 之前的报告给了结论，却没有把用户带到「接下来我要干嘛」 | 解题面板直接包含 7 天计划 |
| 大多数人不会自己做「周期训练计划」 | 系统自动生成，用户只需微调 |
| 「看懂问题」和「安排训练」分离，摩擦大 | 放在同一屏内，一站式完成 |

### 2.4 Issue → Drill 映射

每一个 Issue（问题）下面，直接挂 1–3 个对应的 Drill：

```
┌─────────────────────────────────────────────────────────────┐
│ 问题: 击球点偏晚                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  推荐 Drill (按优先级排序)                                   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ [缩略图] Drill A: 影子挥拍 + 前方标靶               │   │
│  │          目标: 训练击球点在身体前方 30-40cm          │   │
│  │          时长: 10分钟 · 难度: 初级                   │   │
│  │          [已加入计划 ✓]                              │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ [缩略图] Drill B: 简单抛球 + 前点击球练习            │   │
│  │          目标: 有球练习巩固击球点                     │   │
│  │          时长: 8分钟 · 难度: 中级                    │   │
│  │          [+ 加入计划]                                │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**核心理念**：用户是在「问题语境」里选择 Drill，而不是跳去一个「动作超市」里漫游。

### 2.5 Visual Tips：Issue 的视觉纠正指导

每个 Core Issue 除了文字说明，还配有 **Visual Tip**——一组「错误 vs 正确」的对比图，让用户 3 秒看懂差异。

#### 核心概念

```
┌─────────────────────────────────────────────────────────────────────┐
│                         分析报告卡片                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Core Issue: CI01 击球点偏晚                                         │
│  ├── 🔧 How to Fix: 提前引拍，在身体前方击球                          │
│  ├── ❓ Why: 引拍启动时机过迟                                        │
│  └── ⚡ What If: 力量传导不足，球速下降                               │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  🎯 Visual Tip                                              │   │
│  │  ┌──────────┐                                               │   │
│  │  │ [错误图]  │  击球点过晚                                    │   │
│  │  │  点击    │  ✓ 提前引拍，在身前击球                         │   │
│  │  └──────────┘                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                           ↓ 点击展开                                │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │              Visual Tip 对比弹窗                             │   │
│  │  ┌─────────────────┐    ┌─────────────────┐                 │   │
│  │  │   ❌ 错误动作    │    │   ✓ 正确动作    │                 │   │
│  │  │                 │    │                 │                 │   │
│  │  │  击球点靠近身体  │    │  击球点在身前    │                 │   │
│  │  │  手臂弯曲       │    │  手臂伸展       │                 │   │
│  │  │  （红色主题）   │    │  （绿色主题）   │                 │   │
│  │  └─────────────────┘    └─────────────────┘                 │   │
│  │                                                             │   │
│  │  ❌ 错误：击球点靠近身体，手臂弯曲无法发力                      │   │
│  │  ✓  纠正：提前引拍，在身体前方一臂距离处击球                    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

#### Core Issue 与 Visual Tip 的关系

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│   视频上传 ──▶ Gemini 分析 ──▶ Core Issues (CI01-CI10)              │
│                                       │                             │
│                                       ▼                             │
│                              ┌────────────────┐                     │
│                              │ 关键词匹配引擎  │                     │
│                              └────────┬───────┘                     │
│                                       │                             │
│                                       ▼                             │
│                              ┌────────────────┐                     │
│                              │  Visual Tips   │                     │
│                              │  (预置 SVG)    │                     │
│                              └────────────────┘                     │
│                                                                     │
│   CI01 击球点 ──▶ contact-point/wrong.svg + correct.svg             │
│   CI02 转体   ──▶ body-rotation/wrong.svg + correct.svg             │
│   CI03 翻腕   ──▶ wrist-flip/wrong.svg + correct.svg                │
│   ...                                                               │
│   CI10 发力   ──▶ over-hitting/wrong.svg + correct.svg              │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

#### 为什么需要 Visual Tips

| 问题 | Visual Tips 解决方案 |
|------|---------------------|
| 文字说明抽象，用户不知道「正确」长什么样 | 红绿对比图，一眼看出差异 |
| 用户需要反复对照才能理解 | 预置本地，随时查看，离线可用 |
| 不同问题需要不同的视觉示范 | 10 种预定义 Issue，每种配专属对比图 |

#### 设计原则

1. **视觉即答案**：3 秒内看懂「错在哪、怎么改」
2. **渐进式呈现**：缩略图不干扰阅读，点击才展开
3. **一对一匹配**：每个 Core Issue 对应一组 Visual Tip

> 详细设计见 [ORG_VISUALTIPS.md](./ORG_VISUALTIPS.md)

### 2.6 Satori Moment：顿悟时刻

**Satori Moment（顿悟时刻）** 是 Visual Tips 的心理洞察层，帮助用户理解「为什么会犯这个错误」。

#### 什么是 Satori Moment

用户看到 Core Issues 分析知道「问题是什么」，看到对比图知道「正确动作长什么样」，
但还缺一个让用户「恍然大悟」的洞察——这就是 **Satori Moment**。

#### 三层结构

每个 Satori Moment 包含三个部分：

| 层级 | 说明 | 作用 |
|------|------|------|
| 🧠 **大脑的错觉** | 人类本能如何误导动作 | 让用户理解「为什么我会这样做」 |
| 🎾 **网球的真相** | 网球技术的实际原理 | 揭示科学真相，打破错觉 |
| 💡 **顿悟** | 一句话点破关键 | 让用户「恍然大悟」 |

#### 10 个 Core Issues 的 Satori Moments

以下是 10 个预定义 Core Issues 及其对应的 Satori Moment 完整内容：

---

**CI01: 击球点过早/过晚 (contact-point)**

| 🧠 大脑的错觉 | 人习惯用「手臂伸直」来判断能触及的最远距离（约1米），所以本能地等球到达1米处才开始挥拍。 |
|--------------|---|
| 🎾 网球的真相 | 球拍长约70cm，加上手臂约1米 = 总触及距离约1.7-2米。当球在2米外时就应该开始挥拍，这样球拍才能在身体前方最舒展的位置击球。 |
| 💡 顿悟 | **你的大脑在用「空手」的距离感打「持拍」的网球。** 想象你的手臂延长了70cm，用「球拍尖端」去迎接球。 |

---

**CI02: 侧身转体不足 (body-rotation)**

| 🧠 大脑的错觉 | 面对来球时，本能反应是「正面迎击」——就像接飞来的东西时，我们会正面张开双手去接。 |
|--------------|---|
| 🎾 网球的真相 | 正手击球的力量来自「旋转」而非「推送」。职业选手击球瞬间，肩膀转动了90°以上，像拧毛巾一样释放能量。「推球」只用了手臂的30%力量，「转体打球」用了全身的力量。 |
| 💡 顿悟 | **不是「用手打球」，而是「用身体甩手臂」。** 想象你的手臂是一条鞭子，身体转动是甩鞭的动力源。 |

---

**CI03: 翻腕/降拍头 (wrist-flip)**

| 🧠 大脑的错觉 | 想要打出力量，本能会「用力握紧」并「主动甩腕」，就像扔石头时会用力甩手腕一样。 |
|--------------|---|
| 🎾 网球的真相 | 拍头速度来自「滞后效应」而非「主动发力」。当手臂加速时，放松的手腕会让拍头自然落后，然后像鞭子末梢一样「甩出去」。主动翻腕反而破坏了这个自然的鞭打动作。 |
| 💡 顿悟 | **手腕不是「发力点」，而是「传力点」。** 越想用力甩腕，拍头速度反而越慢。放松，让球拍自己飞出去。 |

---

**CI04: 步法不到位 (footwork)**

| 🧠 大脑的错觉 | 为了「省力」，大脑会选择「少动脚、多伸手」，就像坐在沙发上想拿遥控器，会尽量伸手而不是站起来。 |
|--------------|---|
| 🎾 网球的真相 | 击球质量 = 80%站位 + 20%挥拍。职业选手每次击球前平均移动4-6步（小碎步调整），业余选手往往只有1-2步（大步抢位）。站位不对，动作再标准也打不出好球。 |
| 💡 顿悟 | **脚步不是「走到球那里」，而是「把自己送到最佳击球位置」。** 多走两步，每一拍都能用最舒服的姿势击球。 |

---

**CI05: 重心转移问题 (weight-transfer)**

| 🧠 大脑的错觉 | 想要「发力」时，本能会「向上跳起」，就像跳高或投篮时会向上发力。 |
|--------------|---|
| 🎾 网球的真相 | 网球击球的力量需要「向前传递」给球，而不是向上。向上跳起会让力量分散，而且容易导致击球瞬间身体不稳定。费德勒击球时，重心是「向前推」而不是「向上跳」。 |
| 💡 顿悟 | **不是「跳着打」，而是「推着打」。** 想象你在推一扇很重的门——你会向前倾斜发力，而不是跳起来。 |

---

**CI06: 握拍过紧 (grip-tension)**

| 🧠 大脑的错觉 | 越重要的东西越要「握紧」——就像握着一个贵重的花瓶，生怕它掉下来。 |
|--------------|---|
| 🎾 网球的真相 | 握拍力度影响拍头速度。握得越紧 → 手臂越僵硬 → 挥拍越慢 → 击球力量越小。职业选手准备时握拍力度只有3-4/10，触球瞬间才收紧到7-8/10。 |
| 💡 顿悟 | **握拍不是「抓住不放」，而是「轻握快收」。** 想象你握着一只小鸟——太松它会飞走，太紧会捏死它。 |

---

**CI07: 随挥不完整 (follow-through)**

| 🧠 大脑的错觉 | 球已经打出去了，后面的动作「没用」，所以本能地停止挥拍以「节省能量」。 |
|--------------|---|
| 🎾 网球的真相 | 随挥决定了击球方向和旋转。物理上，你无法在触球瞬间「精确控制」，但可以通过完整的随挥来「引导」整个挥拍轨迹。想在触球时突然改变方向，反而会失控。 |
| 💡 顿悟 | **随挥不是「打完球之后的动作」，而是「击球的一部分」。** 想象你在画一个完整的圆——击球只是圆上的一个点。 |

---

**CI08: 眼睛不盯球 (ball-watching)**

| 🧠 大脑的错觉 | 打出球后当然要「看它飞到哪里」——就像扔出去一样东西，眼睛会自然跟着它走。 |
|--------------|---|
| 🎾 网球的真相 | 你的眼睛提前离开，头部就会转动，头部转动会带动肩膀，肩膀会影响挥拍轨迹。费德勒击球时，眼睛会「多停留0.3秒」在击球点，头部像被钉住一样稳定。 |
| 💡 顿悟 | **不是「看球飞走」，而是「看球被打走」。** 球飞出去后你再看也来得及，但击球瞬间抬头一定会失误。 |

---

**CI09: 发球抛球不稳 (serve-toss)**

| 🧠 大脑的错觉 | 抛球是「扔上去」——像扔一个物体那样。所以会用手指「推」或「甩」球出去。 |
|--------------|---|
| 🎾 网球的真相 | 抛球应该是「送上去」而不是「扔上去」。球放在手掌/手指上，手臂伸直向上「托送」，在最高点「松手」而非「推出」。你的手臂就是一个「升降电梯」，球只是搭电梯上去的乘客。 |
| 💡 顿悟 | **不是「抛」球，而是「放」球。** 手臂动作越小、越直，抛球越稳定。 |

---

**CI10: 发力过猛失控 (over-hitting)**

| 🧠 大脑的错觉 | 力量越大 = 球越快 = 越厉害。就像觉得大声说话 = 更有说服力一样。 |
|--------------|---|
| 🎾 网球的真相 | 职业选手的「轻松击球」比业余选手的「全力猛抽」还要快。因为力量 = 技术效率 × 发力程度。用70%的力量配合正确技术，比用100%力量配合错误技术产生的球速更快。而且，70%力量时你还能控制球的方向和落点。 |
| 💡 顿悟 | **力量不是「使出来的」，而是「放出来的」。** 与其「用力打」，不如「让技术为你发力」。放松，反而更有力。 |

---

#### Satori Moment UI 展示

Satori Moment 以**可折叠区域**展示在 Visual Tip 弹窗中：

- **收起状态**：只显示 💡 顿悟金句（一句话）
- **展开状态**：显示完整三层内容（大脑错觉 → 网球真相 → 顿悟）

#### 核心价值

| 问题 | Satori Moment 解决方案 |
|------|----------------------|
| 用户知道「错了」但不知道「为什么会错」 | 从心理学角度解释本能反应如何误导动作 |
| 纠正建议抽象，难以内化 | 一句话顿悟让用户「恍然大悟」 |
| 同样的错误反复犯 | 理解根源后，更容易从意识层面改变 |

### 2.7 「分析准不准」快速反馈

**Feedback Widget（反馈组件）** 放置在每个 IssueCard 下方，收集用户对 AI 分析结果的反馈。

#### 界面设计

```
┌─────────────────────────────────────────────────────┐
│  Core Issue: 击球点偏晚                              │
│  ├── 🔧 How to Fix: ...                             │
│  ├── ❓ Why: ...                                    │
│  └── 🎯 Visual Tip                                  │
│                                                     │
│  ─────────────────────────────────────────          │
│  这个分析准确吗？                                    │
│                                                     │
│  [👍 准确]    [👎 不太对]                            │
└─────────────────────────────────────────────────────┘
```

#### 交互流程

**点击「👍 准确」**：
1. 显示：「✓ 感谢反馈！我们会持续改进」
2. 记录到后台数据
3. 轻微震动反馈（如设备支持）

**点击「👎 不太对」**：
1. 弹出选项：
   ```
   哪里不对？
   ○ 我没有这个问题
   ○ 描述不够清楚
   ○ 建议不实用
   ○ 其他（可填写）
   ```
2. 用户选择后：「✓ 感谢反馈！我们会持续改进」

#### 核心价值

| 问题 | 反馈组件解决方案 |
|------|-----------------|
| 用户被动接收分析结果，无参与感 | 给用户「投票权」，增强参与感 |
| 不知道 AI 分析准确率如何 | 收集数据优化 AI 模型 |
| 用户对分析结果将信将疑 | 点「准确」是一种认可，加深信任 |

#### 数据结构

```typescript
interface FeedbackData {
  isAccurate: boolean;      // 是否准确
  reason?: string;          // 不准确原因（预设选项 ID）
  customReason?: string;    // 自定义原因
  timestamp: number;        // 反馈时间戳
}
```

---

### 2.8 「30 秒挑战」微练习

**Micro Drill Timer（微练习计时器）** 放置在 TipImageModal 弹窗内，提供无需器材的即时练习功能。

#### 什么是微练习

微练习（Micro Drill）是不需要球拍或场地，只用触手可及的东西完成的简短练习：
- 空手模拟挥拍
- 站立重心转移
- 手腕放松练习
- 肩膀旋转练习
- 等等...

#### 界面设计

**准备状态**：
```
┌─────────────────────────────────────────────────────┐
│  ⏱️ 30 秒挑战                      Micro Drill      │
│                                                     │
│  现在做 10 次空挥拍，专注手臂伸展                     │
│  Do 10 shadow swings, focus on arm extension        │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │            [开始 30 秒]                       │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

**倒计时状态**：
```
┌─────────────────────────────────────────────────────┐
│                                                     │
│               ┌─────────────┐                       │
│               │             │                       │
│               │     25      │  ← 圆形进度条          │
│               │             │                       │
│               └─────────────┘                       │
│                                                     │
│     专注：手臂在身前完全伸展                          │
│     Focus: Full arm extension in front              │
│                                                     │
│              [停止]                                  │
└─────────────────────────────────────────────────────┘
```

**完成状态**：
```
┌─────────────────────────────────────────────────────┐
│                     🎉                               │
│                                                     │
│                   很好！                             │
│              今天的微训练 +1                          │
│                                                     │
│              [再来一次]                              │
└─────────────────────────────────────────────────────┘
```

#### 10 个 Core Issues 的微练习内容

每个 Visual Tip 配有专属的 30 秒微练习：

| Core Issue | 微练习内容 | 专注点 |
|------------|-----------|--------|
| CI01 击球点 | 空挥拍 × 10次，每次在身前最远点停住 | 手臂完全伸展 |
| CI02 转体 | 肩膀左右转动 × 10次，双手抱胸 | 肩膀带动转动 |
| CI03 翻腕 | 手腕放松抖动 30 秒，像甩水珠 | 手腕完全放松 |
| CI04 步法 | 原地小碎步 30 秒，膝盖微屈 | 脚掌轻触地面 |
| CI05 重心 | 左右重心转移 × 10次，膝盖微屈 | 重心向前不向上 |
| CI06 握拍 | 3/10 → 7/10 握力交替 × 10次 | 放松→收紧的节奏 |
| CI07 随挥 | 空挥拍 × 5次，完整画圆 | 收拍到肩膀后面 |
| CI08 盯球 | 拇指定点注视 30 秒，头部不动 | 眼睛跟随不转头 |
| CI09 抛球 | 空手向上托送 × 10次，直臂 | 手臂像电梯 |
| CI10 发力 | 70% 力度空挥 × 5次，保持放松 | 放松比用力更快 |

#### 核心价值

| 问题 | 微练习解决方案 |
|------|---------------|
| 看完 Visual Tip 就关掉，没有行动 | 30 秒即时练习，零门槛 |
| 训练需要场地和器材 | 无需任何器材，随时随地 |
| 知道问题但不知道怎么开始练 | 每个问题配专属练习 |
| 缺少「我正在进步」的感觉 | 完成后的成就感和记录 |

#### 数据结构

```typescript
interface MicroDrill {
  instructionCN: string;    // "做 10 次空挥拍，专注手臂伸展"
  instructionEN: string;    // "Do 10 shadow swings, focus on arm extension"
  focusPointCN: string;     // "专注：手臂在身前完全伸展"
  focusPointEN: string;     // "Focus: Full arm extension in front"
  durationSeconds: number;  // 30
}
```

---

## 3. 7 天解题训练脚本

### 3.1 什么是 7 天脚本

系统不再只是推荐几个 Drill，而是直接把 Drill **排进"未来 7 天的日历"**里，生成一份可编辑的 Weekly Plan。

### 3.2 脚本结构

```
┌─────────────────────────────────────────────────────────────┐
│ 正手解题计划 · 2025-11-30 创建                               │
│ 目标: 解决击球点偏晚 + 重心前倾不足                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Day 1 (11/30 · 今天)                            25 分钟   │
│  ├── [□] 热身: 动态拉伸                           5 分钟    │
│  ├── [□] Drill A: 击球点前移练习                  10 分钟   │
│  └── [□] Drill C: 重心转移练习                    10 分钟   │
│                                                             │
│  Day 2 (12/01)                                   REST      │
│                                                             │
│  Day 3 (12/02)                                   20 分钟   │
│  ├── [□] Drill A: 击球点前移练习                  10 分钟   │
│  └── [□] Drill B: 带移动的击球点练习              10 分钟   │
│                                                             │
│  Day 4 (12/03)                                   REST      │
│                                                             │
│  Day 5 (12/04)                                   25 分钟   │
│  ├── [□] Drill A (进阶): 击球点 + 上旋            10 分钟   │
│  ├── [□] Drill C: 重心转移练习                    10 分钟   │
│  └── [□] 综合练习: 连续击球                       5 分钟    │
│                                                             │
│  Day 6 (12/05)                                   REST      │
│                                                             │
│  Day 7 (12/06)                                   验证日    │
│  └── [□] 上传新视频验证进步                                  │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│ 总计: 3 个训练日 · 70 分钟 · 6 个练习                        │
└─────────────────────────────────────────────────────────────┘
```

### 3.3 用户可调整项

| 调整类型 | 操作方式 |
|---------|---------|
| **删除训练日** | 滑动删除某一天 |
| **替换 Drill** | 点击 Drill → 选择替代方案 |
| **调整频率** | 「让 Atlas 帮我调整」→ 输入「一周只能练 2 次」 |
| **跳过某天** | 标记为 REST |
| **提前验证** | 随时点击「上传验证视频」 |

### 3.4 为什么 7 天

| 理由 | 说明 |
|------|------|
| **足够形成习惯** | 一周是用户容易理解的周期 |
| **不会太长** | 2-4 周计划容易让人放弃 |
| **匹配订阅周期** | 周付费 / 月付费的自然节点 |
| **验证节奏** | 一周后上传新视频，看到进步 |

---

## 4. Tab 架构升级

### 4.1 Tab 顺序不变

```
┌─────────────────────────────────────────────────────────────┐
│  [Today]  [Drills]      [Camera]      [Analyze]  [Growth]   │
│                            ●                                │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 各 Tab 定位升级

#### Camera Tab：真正的「起点」

| V5 | V5.1 |
|----|------|
| 视频上传入口 | **新训练循环的起点** |
| 上传 → 跳转报告 | 上传 → **直接进入解题面板** |

```
用户心智:
「每次想改进什么，从这里开始」
```

#### Today Tab：从「任务列表」变成「解题计划执行页」

| V5 | V5.1 |
|----|------|
| 随便塞的 Todo List | **专注执行今天的解题训练** |
| 多来源任务混杂 | **来自单一解题计划** |

```
┌─────────────────────────────────────────────────────────────┐
│ Today                                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  正手解题计划 · Day 3                                        │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━                    │
│                                                             │
│  [□] Drill A: 击球点前移练习                      10 分钟   │
│  [□] Drill B: 带移动的击球点练习                  10 分钟   │
│                                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━                    │
│  总计: 20 分钟                                               │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              [开始第一个 Drill →]                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### Analyze Tab：从「报告历史」变成「Session 列表」

| V5 | V5.1 |
|----|------|
| 各种散乱报告 | **Session 列表（解题档案）** |
| 点击看报告 | **点击进入解题面板** |

```
┌─────────────────────────────────────────────────────────────┐
│ Analyze                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ [缩略图]  正手底线                         72 分    │   │
│  │           今天 · 2 个问题 · 7 天计划进行中    [ > ] │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │ [缩略图]  发球                             68 分    │   │
│  │           3 天前 · 3 个问题 · 计划已完成      [ > ] │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │ [缩略图]  You vs Gary                   20 : 44   │   │
│  │           上周 · 比赛分析                     [ > ] │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### Growth Tab：围绕解题计划的成长

| V5 | V5.1 |
|----|------|
| 评分趋势图 | **维度进步 + 计划执行率** |
| 通用数据 | **与解题计划关联** |

```
┌─────────────────────────────────────────────────────────────┐
│ Growth                                                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  核心维度进步 (过去 4 周)                                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 击球点 Contact                                      │   │
│  │ 58 ──────────────────────────────────────● 71       │   │
│  │                                         +13 分      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  解题计划执行情况                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 你按照解题计划完成了 67% 的训练任务                    │   │
│  │ ████████████████░░░░░░░░  67%                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 5. Atlas 角色简化

### 5.1 V5 vs V5.1 Atlas 定位

| V5 | V5.1 |
|----|------|
| 通用聊天伙伴 | **只帮你两件事** |
| 独立 YoChat Tab | **嵌入解题面板** |
| 什么都能聊 | **专注、克制** |

### 5.2 Atlas 只做两件事

#### 事情 1：判断问题优先级

```
用户: 「我有 3 个问题，先改哪个？」

Atlas: 「根据你的情况，我建议先改击球点偏晚。
       原因是：这个问题影响了你 60% 的击球质量，
       而且通常 2-3 周就能看到明显改善。

       重心问题可以放到下一个 Session。」
```

#### 事情 2：调整训练频率与强度

```
用户: 「一周只能练两次，帮我调整」

Atlas: 「好的，我帮你重新排版：

       Day 2 (周二) · 25 分钟
       ├── Drill A: 击球点前移练习
       └── Drill C: 重心转移练习

       Day 5 (周五) · 20 分钟
       ├── Drill A (进阶)
       └── 综合练习

       这样每次训练时间控制在 20-25 分钟，
       两次之间有足够恢复时间。」
```

### 5.3 为什么要限定场景

| 理由 | 说明 |
|------|------|
| **避免变成另一个 ChatGPT** | 随便聊会稀释核心价值 |
| **显得专业、克制** | 限定场景 = 专家形象 |
| **易于设计对话模板** | 内部提示词更可控 |
| **付费锚点更清晰** | 「帮我排计划」是明确价值 |

---

## 6. 用户旅程

### 6.1 新用户首次使用旅程 (15 分钟)

```
Step 1: 下载 & 注册 (2 分钟)
    ├── 应用商店宣传：「上传一条视频，获得 7 天解题训练计划」
    ├── 注册时只问：运动项目、水平自评、每周可训练时长
    └── 心智：这是一个「帮我系统化自学」的 App

Step 2: 进入 App – Camera 主界面 (30 秒)
    ├── 主视图就是 Camera Tab：大大的「上传/录制视频」按钮
    ├── 其他 Tab 几乎是空的（Today/Analyze 没数据）
    └── 心智：逻辑是从「传视频」开始

Step 3: 上传第一条视频 & 等待分析 (2 分钟)
    ├── 选一条 20-30 秒的正手底线视频
    ├── 系统显示「分析中」界面
    └── 心智：这不是纯 AI 聊天，是有「动作理解」能力的工具

Step 4: 自动进入解题面板 (3 分钟)
    ├── 顶部：Session 标题 + 视频 + Overall Score + 多维度评分
    ├── 中间：2 条 Issue，配关键帧、解释、后果
    ├── 下方：已生成的 7 天训练脚本
    └── 心智：「我知道接下来要做什么」

Step 5: 保存 & 执行今日训练 (5 分钟)
    ├── 点击「保存并开练」→ 系统写入 Today
    ├── Today 显示：「正手解题计划 · Day 1」+ 25 分钟任务
    └── 心智：「这不是'看完报告就完了'，是一个活的训练系统」

Step 6: 三天后 – 按计划继续 & Growth 种子
    ├── 再次打开 App，Today 提醒今天是 Day 3
    ├── 顶部提示：「你距离完成这次解题计划还有 2 次训练」
    └── 心智：「我被一个长期的训练进程托住了」

Step 7: 一个月后 – 多个 Session & 多条解题计划
    ├── 已经上传了正手、发球、接发等多个 Session
    ├── Analyze 里是 Session 列表，每条可点进解题面板
    ├── Growth 里能看到某些维度连续提升 + 训练完成率
    └── 心智：「这个 App 帮我记录的是'升级轨迹'」
```

### 6.2 老用户日常使用旅程

```
场景: 周末球场训练后

Step 1: 录制训练视频
    ├── 打开 App，点击中央 Camera 按钮
    ├── 录制 30 秒正手击球
    └── 选择「动作分析」

Step 2: 进入解题面板
    ├── 评分：78 分（比上次 +6 分）
    ├── 问题：击球点已改善，随挥仍需加强
    ├── 系统自动生成新的 7 天脚本
    └── 可选择：合并到现有计划 / 创建新计划

Step 3: 调整计划
    ├── 「让 Atlas 帮我调整」→ 「一周只能练 2 次」
    ├── Atlas 重新生成 Day 2 / Day 5 的训练安排
    └── 点击「保存并开练」

Step 4: 一周后查看进步
    ├── 进入 Growth Tab
    ├── 趋势图显示评分持续上升
    ├── 提示：「击球点维度 +13 分」
    └── 提示：「解题计划完成率 67%」
```

---

## 7. 用户画像

### 7.1 主要用户：自驱型「技术控」业余选手

| 维度 | 描述 |
|------|------|
| **年龄** | 25–40 岁 |
| **运动** | 网球 / 羽毛球 / 壁球 |
| **经验** | 已经练了 3–7 年，基础 OK，但瓶颈明显 |
| **行为** | 喜欢看技术视频、战术解析 |
| **付费能力** | 习惯订阅类产品（Spotify、Notion、健身 App） |

**痛点**：
- 没有系统的训练路径，都靠「看几条 YouTube + 自己乱练」
- 上课不稳定，或者不想完全依赖教练
- 很难感受到「长期变好了多少」，容易心态崩

**Yoach V5.1 给他的价值**：
- 每条视频变成「一次具体问题的诊断 + 一周训练解法」
- Growth 让他看到：不同维度在 3–6 个月的变化
- 让他觉得自己在「经营一套训练系统」，而不是随缘打球

### 7.2 次要用户：有学生/队伍的年轻教练

| 维度 | 描述 |
|------|------|
| **年龄** | 22–35 岁 |
| **运动** | 网球 / 羽毛球 / 学校队教练 |
| **特点** | 本身懂技术，也会拍学生的视频 |

**痛点**：
- 不可能为每个学生做详细的赛后复盘 & 训练脚本
- 很多学生课后不练，或者练的内容完全跑偏

**Yoach V5.1 给他的价值**：
- 可以把学生视频扔进 Yoach，自动生成解题面板 + 7 天计划
- 自己只需要在计划上稍微调整，就可以给人一种「高定制度」的感觉

---

## 8. 技术架构变更

### 8.1 新增数据模型

```swift
// 解题计划
struct ProblemSolvingPlan: Identifiable {
    let id: UUID
    let sessionId: UUID           // 关联的 Session
    let issues: [Issue]           // 问题列表
    let weeklyScript: WeeklyScript // 7 天脚本
    let createdDate: Date
    let status: PlanStatus        // .active / .completed / .paused
}

// 问题
struct Issue: Identifiable {
    let id: UUID
    let title: String             // 如「击球点偏晚」
    let description: String
    let evidenceFrames: [FrameEvidence] // 关键帧证据
    let recommendedDrills: [Drill]
    let priority: Int             // 优先级 1-3
}

// 7 天脚本
struct WeeklyScript {
    var days: [TrainingDay]       // 7 天
    var totalDuration: Int        // 总分钟数
    var targetIssues: [Issue]     // 针对的问题
}

// 单日训练
struct TrainingDay: Identifiable {
    let id: UUID
    let dayIndex: Int             // 1-7
    let date: Date
    var tasks: [TrainingTask]
    var isRestDay: Bool
    var status: DayStatus         // .pending / .completed / .skipped
}
```

### 8.2 核心流程变更

```
V5 流程:
Camera → Analysis → Report → (手动加 Drill 到 Today)

V5.1 流程:
Camera → Analysis → ProblemSolvingPanel
                          ↓
                    7-Day Script 自动生成
                          ↓
                    Today 自动填充
                          ↓
                    Growth 自动关联
```

### 8.3 API 变更

| 接口 | 变更 |
|------|------|
| `/analyze/movement` | 返回增加 `issues[]` 和 `suggestedScript` |
| `/plan/generate` | 新增：根据 issues 生成 7 天脚本 |
| `/plan/adjust` | 新增：Atlas 调整计划（频率、强度） |
| `/plan/progress` | 新增：获取计划执行进度 |

---

## 9. 成功指标

### 9.1 北极星指标升级

| V5 | V5.1 |
|----|------|
| 有视频上传行为的 WAU | **有活跃解题计划的 WAU** |

**定义**：过去 7 天内，有至少一个 `status = .active` 的 ProblemSolvingPlan 的用户数。

### 9.2 核心漏斗指标

| 阶段 | V5 目标 | V5.1 目标 |
|------|---------|----------|
| 首次上传 → 完成分析 | 80% | 85% |
| 完成分析 → **保存解题计划** | - | **70%** |
| 保存计划 → **完成 Day 1** | - | **60%** |
| 完成 Day 1 → **完成整个计划** | - | **40%** |
| 完成计划 → **上传验证视频** | - | **50%** |

### 9.3 功能使用指标

| 功能 | 指标 | V5.1 目标 |
|------|------|----------|
| **解题面板** | 平均停留时长 | ≥ 3 分钟 |
| **7 天脚本** | 计划保存率 | ≥ 70% |
| **Atlas 调整** | 使用率 | ≥ 30% |
| **Today 执行** | 日均完成任务数 | ≥ 2 个 |
| **验证视频** | 计划完成后上传率 | ≥ 50% |

### 9.4 品牌验证指标

| 验证点 | 指标 | 目标值 |
|--------|------|--------|
| **解题心智** | 用户调研「Yoach 帮你做什么」回答「解决我的问题」 | ≥ 60% |
| **计划价值** | 用户认为「7 天计划有用」 | ≥ 75% |
| **Atlas 定位** | 用户认为「Atlas 帮我排计划」 | ≥ 70% |

---

## 10. 文档索引

### 10.1 V5.1 新增文档

| 文档 | 说明 |
|------|------|
| [ORG_YoachAppV5.1.md](./ORG_YoachAppV5.1.md) | 本文档 - V5.1 系统架构 |
| [ORG_ProblemSolvingPanel.md](./Feature/ProblemSolvingPanel/ORG_ProblemSolvingPanel.md) | 解题面板核心功能 |
| [ORG_WeeklyTrainingPlan.md](./Feature/WeeklyTrainingPlan/ORG_WeeklyTrainingPlan.md) | 7 天训练脚本 |
| [ORG_VISUALTIPS.md](./ORG_VISUALTIPS.md) | Visual Tips 视觉纠正指导 |

### 10.2 需要更新的 V5 文档

| 文档 | 更新内容 |
|------|----------|
| [ORG_TODAY.md](./Tab_Today/ORG_TODAY.md) | Today 变成解题计划执行页 |
| [ORG_AnalyzeTab_MI.md](./Tab_Analyze/ORG_AnalyzeTab_MI.md) | Analyze 变成 Session 列表 |
| [ORG_YOCHAT.md](./Feature/YoChat/ORG_YOCHAT.md) | Atlas 角色简化 |
| [ORG_YoachAppV5.md](./ORG_YoachAppV5.md) | 添加 V5.1 升级说明 |

---

## 版本历史

| 版本 | 日期 | 变更说明 | 作者 |
|------|------|----------|------|
| v5.1.0 | 2025-11-30 | 创建 V5.1 系统架构文档 | Claude |
| v5.1.1 | 2025-12-02 | 新增 2.5 Visual Tips 章节，整合视觉纠正指导概念 | Claude |
| v5.1.2 | 2025-12-02 | 新增 2.6 Satori Moment 章节，补充 10 个 Core Issues 完整定义 | Claude |
| v5.1.3 | 2025-12-02 | 新增 2.7 「分析准不准」快速反馈、2.8 「30 秒挑战」微练习 | Claude |

---

**文档维护**: Yoach 产品团队
**最后更新**: 2025-12-02

---

**© 2025 YoachApp. All rights reserved.**
