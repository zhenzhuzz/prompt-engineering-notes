# Module Documentation Structure Guide

**文档类型**: 模块文档结构指南
**版本**: v1.0.0
**创建日期**: 2025-10-31
**最后更新**: 2025-10-31
**目标读者**: 产品团队、开发团队、QA团队

---

## 📑 目录

- [1. 概述](#1-概述)
- [2. 文件夹结构规范](#2-文件夹结构规范)
- [3. 文档命名规范](#3-文档命名规范)
- [4. PRD 编写指南](#4-prd-编写指南)
- [5. RD 编写指南](#5-rd-编写指南)
- [6. Bug 追踪指南](#6-bug-追踪指南)
- [7. Issue 管理指南](#7-issue-管理指南)
- [8. 工作流程](#8-工作流程)

---

## 1. 概述

### 1.1 为什么需要统一的文档结构？

- ✅ **可维护性**: 统一结构便于长期维护和更新
- ✅ **可查找性**: 快速定位需求、Bug、Issue 文档
- ✅ **协作效率**: 团队成员清楚在哪里找到什么信息
- ✅ **知识沉淀**: 系统化管理产品需求和开发历史

### 1.2 本指南的参考案例

本指南基于 **LiveTab 模块**的文档结构设计，已在实践中验证有效。

**参考路径**: `docs/LiveTab/`

---

## 2. 文件夹结构规范

### 2.1 标准模块文件夹结构

每个模块（如 LiveTab、YoChat、TodayTab）应遵循以下结构：

```
ModuleName/
├── README.md                           ← 文档导航中心（必须）
├── 开发流程与进度管理.md               ← 开发流程规范（可选）
├── 需求分类与处理策略.md               ← 需求管理规范（可选）
│
├── MI/                                 ← Module Introduction（必须）
│   └── ORG_[MODULE]_MI.md              · 模块介绍文档
│
├── PRDs/                               ← Product Requirements（必须）
│   ├── PRD_[CODE]01_[Feature].md       · 主 PRD（核心功能）
│   ├── PRD_[CODE]02_[Feature].md       · 子功能 PRD
│   └── PRD_[CODE]03_[Feature].md       · 新增功能 PRD
│
├── RDs/                                ← Requirement Documents（必须）
│   ├── RD_[CODE]01_[Feature].md        · 轻量级需求文档
│   ├── RD_[CODE]02_[Feature].md        · 小功能增强
│   └── RD_[CODE]03_[Feature].md        · 小功能增强
│
├── Bugs/                               ← Bug 追踪（必须）
│   ├── Bugs_Tracker.md                 · Bug 追踪总表
│   ├── BUG_[CODE]001_[Title].md        · P0 Bug 详情
│   └── BUG_[CODE]002_[Title].md        · P1 Bug 详情
│
├── Issues/                             ← 需求池（可选）
│   ├── Issues_Backlog.md               · 需求池总表
│   └── Weekly_Summary.md               · 每周需求汇总
│
└── Archive/                            ← 已完成/已废弃文档（必须）
    ├── PRD_[CODE]01_v1.md              · 旧版本 PRD
    └── RD_[CODE]01_archived.md         · 已完成 RD
```

### 2.2 文件夹用途说明

| 文件夹 | 用途 | 必须/可选 | 说明 |
|--------|------|----------|------|
| **MI/** | 模块介绍 | 必须 | 包含 1 个 ORG_MI 文档，定义模块的本质和价值 |
| **PRDs/** | 产品需求文档 | 必须 | 大型功能（≥3 用户故事，≥1 周开发） |
| **RDs/** | 轻量级需求文档 | 必须 | 小功能增强（1-2 用户故事，1-3 天开发） |
| **Bugs/** | Bug 追踪 | 必须 | 包含 Bug 总表 + 单个 Bug 详情文件 |
| **Issues/** | 需求池 | 可选 | 高频低优先级需求，Feature Friday 批量处理 |
| **Archive/** | 归档文档 | 必须 | 已完成/废弃的文档，保留历史记录 |

### 2.3 README.md 必须包含的内容

每个模块的 `README.md` 是文档导航中心，必须包含：

1. **文档结构树** - ASCII 树形图展示完整结构
2. **快速导航** - 分步骤引导（第一步看 MI，第二步看 PRD...）
3. **文档状态概览** - 表格展示各文档的版本、状态、完成度
4. **工作流程** - 新功能开发、Bug 修复、Issue 管理流程
5. **相关文档链接** - 指向其他模块、指南、项目总览

**参考**: `docs/LiveTab/README.md`

---

## 3. 文档命名规范

### 3.1 模块代码（Module Code）

每个模块使用 2-3 字母缩写作为代码前缀：

| 模块名称 | 模块代码 | 示例文档 |
|---------|---------|---------|
| Live Tab | LV | PRD_LV01, RD_LV02, BUG_LV001 |
| YoChat | YC | PRD_YC01, RD_YC02, BUG_YC001 |
| Today Tab | TD | PRD_TD01, RD_TD02, BUG_TD001 |
| Controller Tab | CT | PRD_CT01, RD_CT02, BUG_CT001 |
| Data Tab | DT | PRD_DT01, RD_DT02, BUG_DT001 |
| Training System | TP | PRD_TP01, RD_TP02, BUG_TP001 |

### 3.2 PRD 命名规范

**格式**: `PRD_[CODE][序号]_[功能名称].md`

**示例**:
- `PRD_LV01_Live_Tab.md` - Live Tab 主 PRD
- `PRD_LV02_触觉与音效反馈.md` - 子功能 PRD
- `PRD_YC01_YoChat_FloatingButton.md` - YoChat 浮动按钮

**规则**:
- 序号从 01 开始，递增编号
- 功能名称使用英文或中文，简洁明确
- 主 PRD 序号为 01，子功能从 02 开始

### 3.3 RD 命名规范

**格式**: `RD_[CODE][序号]_[功能名称].md`

**示例**:
- `RD_LV01_Riz激活动画优化.md`
- `RD_LV02_触觉反馈三档调节.md`
- `RD_LV04_训练信息按钮.md`

**规则**:
- 序号从 01 开始，独立于 PRD 编号
- 功能名称应体现具体改进点
- 可使用中文或英文

### 3.4 Bug 命名规范

**格式**: `BUG_[CODE][序号]_[Bug标题].md`

**示例**:
- `BUG_LV001_START按钮崩溃.md`
- `BUG_LV002_暂停后时间继续.md`
- `BUG_YC001_语音识别失败.md`

**规则**:
- 序号使用 3 位数字（001, 002, ...）
- Bug 标题简洁描述问题
- 必须有对应的 Bugs_Tracker.md 总表记录

### 3.5 ORG MI 命名规范

**格式**: `ORG_[MODULE]_MI.md`

**示例**:
- `ORG_LIVETAB_MI.md`
- `ORG_YOCHAT_MI.md`
- `ORG_TODAYTAB_MI.md`

**规则**:
- 模块名称全大写
- 每个模块只有 1 个 MI 文档
- 放置在 `MI/` 文件夹中

---

## 4. PRD 编写指南

### 4.1 什么时候写 PRD？

**判断标准**:
- ✅ 大型功能（≥ 3 个用户故事）
- ✅ 开发周期 ≥ 1 周
- ✅ 涉及多个模块或复杂交互
- ✅ 需要详细设计评审的功能

### 4.2 PRD 必须包含的章节

参考现有 [Yoach_PRD_guideline.md](./Yoach_PRD_guideline.md)，PRD 应包含：

1. **PRD 基本信息** - 编号、版本、状态、负责人
2. **业务背景与目标** - 为什么要做这个功能
3. **用户故事与验收标准** - 以用户视角描述需求
4. **功能详细设计** - UI 布局、交互流程、数据流
5. **技术实现概述** - 涉及的文件、架构设计（**不写代码**）
6. **优先级与时间规划** - P0/P1/P2 分级
7. **风险与依赖** - 技术风险、外部依赖

### 4.3 PRD 编写原则

**✅ DO（应该做）**:
- 使用自然语言和用户视角描述
- 提供 ASCII 布局图和流程图
- 明确 P0/P1/P2 优先级
- 列出清晰的验收标准
- 使用状态 emoji（📋 Pending, 🚧 In Progress, ✅ Completed）

**❌ DON'T（不应该做）**:
- ❌ 不写具体代码实现
- ❌ 不写过于技术细节的架构（留给开发评审）
- ❌ 不混淆 PRD 和 RD（大功能用 PRD，小功能用 RD）
- ❌ 不忽略边界情况和错误处理

**完整指南**: 参考 [Yoach_PRD_guideline.md](./Yoach_PRD_guideline.md)

---

## 5. RD 编写指南

### 5.1 什么时候写 RD？

**判断标准**:
- ✅ 小功能增强（1-2 个用户故事）
- ✅ 开发周期 1-3 天
- ✅ 不涉及复杂架构变更
- ✅ 对现有功能的改进或优化

### 5.2 RD 必须包含的章节

RD 是**轻量级**需求文档，结构比 PRD 简洁：

```markdown
# RD_[CODE][序号]: [功能名称]

**文档类型**: RD（轻量级需求文档）
**模块**: [Module Name]
**创建日期**: YYYY-MM-DD
**负责人**: @username
**状态**: 📋 Pending / 🚧 In Progress / ✅ Completed
**开发时间**: X 天
**完成日期**: YYYY-MM-DD

---

## 📋 需求背景

[1-2 段描述为什么需要这个功能]

## 🎯 需求描述

**作为**[用户角色]
**我希望**[做什么]
**以便于**[达成什么目标]

## ✅ 验收标准

- [ ] 验收标准 1
- [ ] 验收标准 2
- [ ] 验收标准 3

## 🎨 UI 布局 / 视觉效果

[ASCII 布局图或视觉效果描述]

## 🔧 技术实现

### 涉及文件

1. **File1.swift** (修改) - 简要说明
2. **File2.swift** (新建) - 简要说明

### 实现要点

**要点 1**: [描述实现思路，不写代码]
**要点 2**: [描述技术选型，不写代码]

## 📊 优先级

**P0/P1/P2** - [理由]

## 📅 时间估算

- 任务 1: X 天
- 任务 2: Y 天

**总计**: Z 天

---

**完成记录**:
- ✅ YYYY-MM-DD: [完成事项]
```

### 5.3 RD 编写原则

**✅ DO（应该做）**:
- 保持简洁，控制在 100-300 行
- 1 个 RD 对应 1 个小功能
- 明确列出涉及的文件
- 描述实现要点，不写代码
- 使用 checklist 跟踪进度

**❌ DON'T（不应该做）**:
- ❌ 不写完整代码块（如 Swift 代码）
- ❌ 不把多个小功能混在一个 RD 中
- ❌ 不省略验收标准
- ❌ 不忽略时间估算

**参考示例**:
- `docs/LiveTab/RDs/RD_LV01_Riz激活动画优化.md`
- `docs/LiveTab/RDs/RD_LV04_训练信息按钮.md`

---

## 6. Bug 追踪指南

### 6.1 Bug 文件夹结构

每个模块的 `Bugs/` 文件夹应包含：

1. **Bugs_Tracker.md** - Bug 追踪总表（必须）
2. **BUG_[CODE]XXX_[Title].md** - 单个 Bug 详情（按需创建）

### 6.2 Bugs_Tracker.md 必须包含的内容

```markdown
# [Module Name] - Bug 追踪总表

**模块**: [Module Name]
**最后更新**: YYYY-MM-DD

---

## 📊 Bug 统计

| 优先级 | 待修复 | 进行中 | 已修复 | 总计 |
|--------|--------|--------|--------|------|
| P0     | 0      | 0      | 2      | 2    |
| P1     | 2      | 0      | 1      | 3    |
| P2     | 3      | 0      | 0      | 3    |
| P3     | 1      | 0      | 0      | 1    |
| **总计** | **6** | **0** | **3** | **9** |

---

## 🔴 P0 Bug（Blocker - 4 小时内修复）

| Bug ID | 标题 | 状态 | 发现日期 | 修复日期 | 负责人 |
|--------|------|------|----------|----------|--------|
| BUG_LV001 | [Bug 标题] | ✅ Fixed | YYYY-MM-DD | YYYY-MM-DD | @dev1 |

## 🟠 P1 Bug（High - 1 周内修复）

[表格...]

## 🟡 P2 Bug（Medium - 下个迭代修复）

[表格...]

## 🟢 P3 Bug（Low - 有时间就修）

[表格...]

---

## 📋 Bug 优先级定义

| 级别 | 定义 | SLA | 示例 |
|------|------|-----|------|
| **P0** | Blocker - 核心功能完全不可用 | 4 小时 | 应用崩溃、数据丢失 |
| **P1** | High - 重要功能异常 | 1 周 | 功能失效、性能问题 |
| **P2** | Medium - 一般功能异常 | 下个迭代 | UI 显示问题 |
| **P3** | Low - 体验优化 | 有空再说 | 动画不流畅 |
```

### 6.3 单个 Bug 文档结构

```markdown
# BUG_[CODE]XXX: [Bug 标题]

**Bug ID**: BUG_[CODE]XXX
**优先级**: 🔴 P0 / 🟠 P1 / 🟡 P2 / 🟢 P3
**状态**: 🐛 Open / 🚧 In Progress / ✅ Fixed
**模块**: [Module Name]
**发现日期**: YYYY-MM-DD HH:MM
**修复日期**: YYYY-MM-DD HH:MM
**负责人**: @username

---

## 📋 Bug 描述

[清晰描述 Bug 现象]

## 🔄 复现步骤

1. 步骤 1
2. 步骤 2
3. **实际结果**: [描述]
4. **期望结果**: [描述]

## 💥 崩溃信息 / 错误日志

```
[粘贴崩溃堆栈或错误日志]
```

## 🔍 根本原因

[分析 Bug 的根本原因]

## ✅ 修复方案

[描述修复方案，可列出多个方案对比]

## 📝 代码变更

**文件**: [File.swift]
**Commit**: [commit hash] - [commit message]

[简要描述代码变更，不粘贴大段代码]

## 🧪 测试验证

- [x] 测试场景 1
- [x] 测试场景 2

## 📊 影响范围

- **受影响版本**: vX.X.X
- **受影响用户**: XX%
- **严重程度**: Critical / High / Medium / Low

## 📅 时间线

- **HH:MM** - 发现并报告
- **HH:MM** - 定位到根本原因
- **HH:MM** - 实现修复
- **HH:MM** - 验证通过，关闭 Bug

**总耗时**: X 小时 Y 分钟
```

### 6.4 Bug 优先级定义（标准）

| 级别 | 定义 | SLA | 示例 |
|------|------|-----|------|
| **P0** | Blocker - 核心功能完全不可用，影响所有用户 | 4 小时 | 应用崩溃、数据丢失、无法启动 |
| **P1** | High - 重要功能异常，影响主要用户体验 | 1 周 | 功能失效、严重性能问题、数据错误 |
| **P2** | Medium - 一般功能异常，有 workaround | 下个迭代 | UI 显示问题、小功能失效、兼容性问题 |
| **P3** | Low - 体验优化，不影响核心功能 | 有空再说 | 动画不流畅、文案错误、美化建议 |

**参考示例**:
- `docs/LiveTab/Bugs/Bugs_Tracker.md`
- `docs/LiveTab/Bugs/BUG_LV001_START按钮崩溃.md`

---

## 7. Issue 管理指南

### 7.1 什么是 Issue？

**Issue** 是指：
- 高频但低优先级的需求
- 用户反馈的小改进建议
- 不紧急但有价值的功能增强
- 可以批量处理的 Quick Win

### 7.2 Issue 文件夹结构

```
Issues/
├── Issues_Backlog.md      ← 需求池总表（按积分排序）
└── Weekly_Summary.md      ← 每周 Feature Friday 汇总
```

### 7.3 Issues_Backlog.md 结构

```markdown
# [Module Name] - 需求池（Issues Backlog）

**模块**: [Module Name]
**最后更新**: YYYY-MM-DD
**管理策略**: Feature Friday 批量处理

---

## 📊 需求池统计

| 状态 | 数量 | 占比 |
|------|------|------|
| 🎯 待实施 | 8 | 34.8% |
| 🚧 进行中 | 3 | 13.0% |
| ✅ 已完成 | 15 | 65.2% |

---

## 🎯 高优先级（本周 Feature Friday）

按积分排序（积分 = 用户需求频次 + 用户影响 + (5 - 开发成本)）

| ID | 需求描述 | 频次 | 影响 | 成本 | 积分 | 状态 | 负责人 |
|----|---------|------|------|------|------|------|--------|
| IS-LV-001 | [需求描述] | 5 | 4 | 2 | 12 | 🚧 In Progress | @dev1 |
| IS-LV-002 | [需求描述] | 4 | 3 | 1 | 11 | 🎯 Planned | @dev3 |

---

## 🗳️ 投票规则

每周一团队投票，每人 5 票，可重复投给同一需求。

**积分计算公式**:
```
积分 = 用户需求频次(1-5) + 用户影响(1-5) + (5 - 开发成本(1-5)) + 投票加权(0-3)
```
```

### 7.4 Weekly_Summary.md 结构

```markdown
# [Module Name] - 每周需求汇总

**模块**: [Module Name]
**最后更新**: YYYY-MM-DD

---

## 📅 本周汇总（Week XX: MM/DD - MM/DD）

### Feature Friday 成果（YYYY-MM-DD）

**时间**: 14:00 - 17:00 (3 小时)
**参与人**: @dev1, @dev2, @dev3
**完成数量**: X 个 Quick Win

| ID | 需求 | 负责人 | 预估时间 | 实际时间 | 状态 |
|----|------|--------|----------|----------|------|
| IS-XX-001 | [需求] | @dev1 | 0.5h | 0.5h | ✅ |

**总结**:
- ✅ 完成 X 个需求
- 🎯 用户反馈积极
```

**参考示例**:
- `docs/LiveTab/Issues/Issues_Backlog.md`
- `docs/LiveTab/Issues/Weekly_Summary.md`

---

## 8. 工作流程

### 8.1 新功能开发流程

```
步骤 1: 阅读 ORG MI → 理解模块定位
  ↓
步骤 2: 判断功能类型
  · 大型功能（≥ 3 用户故事）→ 编写 PRD → 放入 PRDs/
  · 小功能增强（1-2 用户故事）→ 编写 RD → 放入 RDs/
  ↓
步骤 3: 团队评审
  · PRD 需要完整评审会议
  · RD 可以异步评审
  ↓
步骤 4: 分配开发人员
  · 更新文档状态为 🚧 In Progress
  · 在 README.md 状态表中更新负责人
  ↓
步骤 5: 开发实施
  · 按照 PRD/RD 的验收标准开发
  · 不严格按照文档中的实现建议（开发有自主权）
  ↓
步骤 6: 测试验证
  · 使用 PRD/RD 中的验收标准验证
  · QA 测试通过
  ↓
步骤 7: 完成后归档
  · 更新文档状态为 ✅ Completed
  · 记录实际开发时间
  · 如果文档过时，移入 Archive/
```

### 8.2 Bug 修复流程

```
步骤 1: 在 Bugs/ 文件夹创建 Bug 记录
  · 文件名: BUG_[CODE]XXX_[Title].md
  · 包含完整的复现步骤和崩溃信息
  ↓
步骤 2: 更新 Bugs_Tracker.md
  · 添加到对应优先级表格
  · 统计数据更新
  ↓
步骤 3: 按优先级修复
  · P0: 4 小时内修复
  · P1: 1 周内修复
  · P2: 下个迭代修复
  · P3: 有空再说
  ↓
步骤 4: 修复后更新状态
  · Bug 文档状态改为 ✅ Fixed
  · 在 Bugs_Tracker.md 中标记为"已修复"
  · 记录修复时间和负责人
```

### 8.3 Issue 管理流程

```
步骤 1: 记录在 Issues/Issues_Backlog.md
  · 评估频次、影响、成本
  · 计算积分
  ↓
步骤 2: 每周投票排序（积分制）
  · 每周一团队投票
  · 更新积分和优先级
  ↓
步骤 3: Feature Friday 批量处理
  · 每周五下午 14:00-17:00
  · 选择 3-5 个高积分 Issue
  · 团队协作快速完成
  ↓
步骤 4: 完成后更新 Weekly_Summary.md
  · 记录完成数量和实际耗时
  · 总结用户反馈
```

---

## 📋 快速检查清单

### 创建新模块文档时

- [ ] 创建 6 个必须文件夹（MI/, PRDs/, RDs/, Bugs/, Issues/, Archive/）
- [ ] 创建 README.md 文档导航中心
- [ ] 创建 ORG_[MODULE]_MI.md 模块介绍
- [ ] 创建 Bugs_Tracker.md Bug 追踪总表
- [ ] 在 README.md 中添加文档结构树
- [ ] 在 README.md 中添加状态概览表

### 编写 PRD 时

- [ ] 文件名符合 `PRD_[CODE][序号]_[功能名称].md` 格式
- [ ] 包含所有必须章节（参考 Yoach_PRD_guideline.md）
- [ ] 使用自然语言和用户视角
- [ ] 提供 ASCII 布局图
- [ ] 明确 P0/P1/P2 优先级
- [ ] **不包含具体代码实现**
- [ ] 在 README.md 状态表中注册

### 编写 RD 时

- [ ] 文件名符合 `RD_[CODE][序号]_[功能名称].md` 格式
- [ ] 包含用户故事和验收标准
- [ ] 列出涉及的文件和实现要点
- [ ] **不包含具体代码块**
- [ ] 估算开发时间（≤ 3 天）
- [ ] 在 README.md 状态表中注册

### 创建 Bug 记录时

- [ ] 文件名符合 `BUG_[CODE]XXX_[标题].md` 格式
- [ ] 包含复现步骤
- [ ] 包含崩溃信息或错误日志
- [ ] 明确 P0/P1/P2/P3 优先级
- [ ] 在 Bugs_Tracker.md 中添加记录
- [ ] 更新 Bug 统计数据

---

## 📚 相关文档

- 📘 [Yoach_PRD_guideline.md](./Yoach_PRD_guideline.md) - PRD 详细编写指南
- 📘 [ORG_MI_编写指南.md](./ORG_MI_编写指南.md) - Module Introduction 编写指南
- 📚 [LiveTab/README.md](../LiveTab/README.md) - LiveTab 文档结构参考案例
- 📚 [CLAUDE.md](../../CLAUDE.md) - YoachLab 项目总览

---

**文档维护**: Yoach 产品团队
**最后更新**: 2025-10-31
**反馈渠道**: 内部文档评审会议
