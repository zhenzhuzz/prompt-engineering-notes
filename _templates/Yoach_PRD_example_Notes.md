# PRD 示例 - Notes 标签页

**用途**: Yoach 指南示例 · 展示推荐格式
**原始模块**: 笔记与成就管理
**参照版本**: 1.2.0
**最后更新**: 2025年10月31日
**示例负责人**: YoachApp Team
**评审人（示例）**: @ProductLead · @TechLead · @DesignLead

---

## 📋 文档说明

此示例基于真实的《PRD - Notes 标签页》整理，用于展示 Yoach PRD 指南推荐的章节结构、表格字段（含 `优先级` 与 `状`）及 dotted layout 的呈现方式。团队可在新建 PRD 时复制本示例并替换为实际内容。

**相关文档**：
- 🧭 [Yoach_PRD_guideline.md](./Yoach_PRD_guideline.md)
- 📝 [PRD_Notes标签页.md](../PRD_Notes标签页.md)

---

## 🎯 落地清单总览

### 状态图例
- 📋 **待开始** - 任务尚未启动
- 🚧 **进行中** - 正在执行
- ✅ **已完成** - 开发并验收通过
- 🔄 **待更新** - 需补充或修订
- ⚠️ **受阻** - 受外部依赖阻塞

### 实施进度 (示例截至 2025-10-31)

#### 核心功能模块（MVP P0）
| 模块 | 已完成 | 进行中 | 待开始 | 总计 | 完成率 |
|------|--------|--------|--------|------|--------|
| 信息架构 & 范围 | **4** | **0** | **0** | 4 | **100%** |
| 笔记管理 | **8** | **1** | **0** | 9 | **88.9%** |
| 洞察 & AI | **4** | **2** | **0** | 6 | **66.7%** |
| 错题本 & 关联练习 | **5** | **1** | **0** | 6 | **83.3%** |
| **核心功能小计** | **21** | **4** | **0** | **25** | **84.0%** ✅ |

#### 增强与优化（P1-P2）
| 模块 | 已完成 | 进行中 | 待开始 | 总计 | 完成率 |
|------|--------|--------|--------|------|--------|
| 成就体系 | **1** | **1** | **2** | 4 | **25.0%** |
| 数据 & 指标 | **1** | **1** | **1** | 3 | **33.3%** |
| 测试 & 上线 | **0** | **1** | **3** | 4 | **0.0%** |
| **增强优化小计** | **2** | **3** | **6** | **11** | **18.2%** |

#### 总体进度
| 类别 | 已完成 | 进行中 | 待开始 | 总计 | 完成率 |
|------|--------|--------|--------|------|--------|
| **项目总计** | **23** | **7** | **6** | **36** | **63.9%** |

### 阶段路线
```
· 需求对齐 · → · 线框验证 · → · 技术评审 · → · Sprint 开发 · → · 灰度上线 ·
```

---

## 1. 背景与目标

### 1.1 业务背景
> “用户在完成训练后缺少系统化沉淀，很难持续跟踪进步与薄弱环节。”

### 1.2 目标与指标
- **商业目标**: 提升 Yoach App 日活笔记留存率 +12%
- **用户目标**: 帮助用户在 2 分钟内记录训练要点并获取洞察
- **成功指标**:
  - 主指标: Notes 标签页周活跃率 ≥ 55%
  - 次指标: AI 洞察阅读完成率 ≥ 60%、错题复习点击率 ≥ 35%

### 1.3 问题陈述
- 笔记散乱、缺乏分类与检索能力
- 错题无法快速链接到练习与复习
- AI 洞察无法形成闭环行动

---

## 2. 范围定义

| 分类 | 内容 |
|------|------|
| **In Scope** | iOS Notes 标签页整体导航、Insight 模块、笔记分类与过滤、错题本、成就勋章、与 Explore/Today 页的深链接 |
| **Out of Scope** | Android/Web 端实现、自定义模版市场、团队协作/共享功能、富媒体多端同步 |
| **假设** | 用户完成至少 3 次练习以生成洞察；账户已开启云同步 |
| **依赖** | AI 服务 (InsightService)、练习数据 API、SwiftData 存储、推送系统 |

---

## 3. 用户画像与旅程

### 3.1 核心用户画像
- **Persona**: 21-40 岁的中阶网球爱好者，日均训练 30 分钟
- **动机**: 快速复盘训练、掌控成长轨迹
- **痛点**: 信息碎片化、错题回顾效率低、缺乏激励

### 3.2 用户旅程
```
┌──────────── Notes 用户旅程 ────────────┐
│ 首页快捷入口 · 查看今日洞察                     │
│ ↓                                              │
│ 决策点 · 是否查看详细洞察？                     │
│ ├─ 否：浏览分类笔记 · 添加新笔记                │
│ └─ 是：进入 Insight 详情 · 获取建议              │
│ ↓                                              │
│ 错题提醒 · 跳转至错题本 · 启动复习              │
│ ↓                                              │
│ 成就页 · 查看勋章进度 · 规划下一步行动          │
└────────────────────────────────────────┘
```

### 3.3 关键触点 (dotted layout)
`· 首页横幅 · 洞察推送 · 笔记卡片长按 · 错题复习 CTA · 成就解锁 toast ·`

---

## 4. 功能需求

### 4.1 用户故事 & 验收标准
| 编号 | 用户故事 | 验收标准 | 优先级 | 状 |
|------|----------|----------|--------|----|
| NT-US-001 | 作为用户，我希望快速浏览最新洞察，了解本周重点 | 首页显示上次同步时间、洞察摘要、CTA | P0 | ✅ |
| NT-US-002 | 作为用户，我希望对笔记按分类筛选并快速检索 | 分类标签与搜索栏联动，支持多条件过滤 | P0 | 🚧 |
| NT-US-003 | 作为用户，我希望在错题本中查看错题并跳转练习 | 每项错题提供查看详情与重新练习按钮 | P0 | 🚧 |
| NT-US-004 | 作为用户，我希望记录训练心得并同步到云端 | 新建/编辑支持自动保存与冲突提示 | P0 | ✅ |
| NT-US-005 | 作为用户，我希望查看成就进度获得激励 | 成就卡展示达成条件、进度条、奖励文案 | P1 | 📋 |
| NT-US-006 | 作为用户，我希望分享笔记给教练伙伴 | 分享入口支持导出链接/图片摘要 | P2 | 📋 |

### 4.2 非功能需求
- **性能**: 列表初次加载 < 1.5s，离线可用最近 50 条笔记
- **安全**: 敏感数据加密存储，分享前确认脱敏
- **可访问性**: 支持动态字体、VoiceOver 标签、深色模式

---

## 5. 交互与视觉

### 5.1 页面结构
```
┌────────────────────────────────────┐
│ Notes / Achievements               │ ← 顶部导航
├────────────────────────────────────┤
│ 💡 Insight Summary (可折叠)        │
│ ─────────────────────────────────── │
│ 🏷️ 分类标签条 + 搜索              │
│ ─────────────────────────────────── │
│ 笔记卡片列表 (LazyVStack)         │
│ · 卡片信息 · 时间 · 标签 · CTA      │
│ ─────────────────────────────────── │
│ 错题本区块 · 关联练习按钮          │
│ ─────────────────────────────────── │
│ 成就进度条 · 勋章列表              │
└────────────────────────────────────┘
```

### 5.2 交互细节
- 卡片左滑提供 `删除/固定` 操作；长按进入批量模式
- Insight 卡片支持 `查看更多` → 推入详情页 (dotted breadcrumbs)
- 错题卡片`继续练习`按钮直接打开对应 MCQ 练习
- 成就模块提供 `查看勋章` → `.sheet` 弹出详细条件

### 5.3 设计资源
- 线框稿: FigJam `Notes-v2-Wireframe` (v0.4)
- 视觉稿: Figma `Yoach DS - Notes` (v1.1)
- 组件库: `Yoach Design System / Cards / NoteCard`

---

## 6. 数据与分析

| 指标 | 描述 | 事件 ID | 备注 |
|------|------|---------|------|
| Notes_Tab_View | Notes 标签页曝光 | `view_notes_tab` | 页面出现即触发 |
| Note_Create | 创建笔记 | `create_note` | 携带 `note_type`、`source` |
| Insight_Read | 阅读洞察完整度 | `read_insight` | 完成后触发，记录停留时长 |
| WrongReview_Start | 启动错题复习 | `start_wrong_review` | 来自 Notes 或推送 |
| Badge_Unlock | 成就解锁 | `unlock_badge` | 携带 `badge_id`、`stage` |

> 数据保留策略：30 天滚动窗口，用于趋势分析；汇总指标同步至 Looker 仪表盘。

---

## 7. 技术实现要点

### 7.1 架构与组件
```
NotesModule/
├─ NotesView.swift
├─ Components/
│  ├─ InsightSummaryView.swift
│  ├─ NoteCardView.swift
│  ├─ TagFilterBar.swift
│  ├─ WrongSetCard.swift
│  └─ AchievementPanel.swift
├─ ViewModels/
│  ├─ NotesViewModel.swift
│  ├─ InsightViewModel.swift
│  └─ AchievementViewModel.swift
└─ Services/
   ├─ InsightService
   ├─ WrongQuestionManager
   └─ SyncEngine
```

### 7.2 数据流 & 同步
```
Home Tab → Notes Tab
  ↓
NotesViewModel (SwiftData + CloudKit)
  ├─ fetchNotes() · 本地缓存 + 云同步
  ├─ fetchInsights() · 调用 InsightService
  ├─ loadWrongSets() · 关联练习数据
  └─ loadAchievements() · 读取成就状态

编辑/删除操作 → SyncEngine → CloudKit Diff 更新
推送提醒 → NotificationCenter → 深链接到 Notes
```

### 7.3 技术约束
- Markdown 渲染使用 MarkdownUI，自定义主题
- 同步冲突需提示用户选择 `保留本地/云端/合并`
- 错题本依赖 MCQ 模块最新 API，需保持版本兼容

---

## 8. 风险与假设

| 类型 | 描述 | 影响 | 缓解措施 | 状 |
|------|------|------|----------|----|
| 风险 | AI 洞察生成超时导致体验不佳 | 中 | 设置 3s 超时并展示兜底内容 | 监控中 |
| 风险 | 云同步冲突频繁，影响数据可信度 | 高 | 引入版本号 & 冲突解决 UI | 设计中 |
| 假设 | 成就激励可提高复习率 | 待验证 | 运行 A/B 测试 (勋章 vs 文本提示) | 计划中 |
| 依赖 | WrongQuestion API 延迟上线 | 中 | 先使用本地错题数据缓存 | 跟踪中 |

---

## 9. 上线计划与验收

### 9.1 里程碑
| 里程碑 | 日期 | 负责人 | 状 |
|--------|------|--------|----|
| 需求评审通过 | 10-07 | @ProductLead | ✅ 已完成 |
| 设计走查 | 10-10 | @DesignLead | 🚧 进行中 |
| 技术方案评审 | 10-12 | @TechLead | 📋 待开始 |
| Sprint 开发完成 | 10-26 | @DevTeam | 📋 待开始 |
| QA & 验收 | 11-02 | @QALead | 📋 待开始 |
| 灰度上线 | 11-06 | @OpsLead | 📋 待开始 |

### 9.2 验收清单
```
☑ Notes 标签页首屏加载 < 1.5s
☑ 洞察、笔记、错题本入口均可正常跳转
☑ 自动保存/同步冲突弹窗符合设计
☑ 数据埋点与 Looker 指标对齐
```

---

## 10. 测试计划 (概览)

| 测试用例 | 场景 | 预期结果 | 优先级 | 状 |
|----------|------|----------|--------|----|
| TC-Notes-001 | 首次进入 Notes | 数据来源加载成功，显示洞察 + 笔记列表 | P0 | 📋 |
| TC-Notes-002 | 新建/编辑笔记 | 自动保存成功，离开再进保持最新内容 | P0 | 📋 |
| TC-Notes-003 | 错题复习跳转 | 点击错题卡进入对应练习集 | P0 | 📋 |
| TC-Notes-004 | AI 洞察失败兜底 | 服务超时时展示兜底提示 | P1 | 📋 |
| TC-Notes-005 | 成就解锁 | 达成条件后勋章动画触发 | P1 | 📋 |

---

## 11. 附录
- `Notes 模块状态机`：草稿 → 已同步 → 冲突 → 已归档
- `资源索引表`：
  - 设计资产: Figma `Yoach Notes v2`
  - 接口文档: Notion `API/Notes`
  - 任务拆解: Linear 项目 `NOTES-EPIC`

---

## 12. 版本历史（示例）

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| 1.1.0 | 2025-10-06 | 示例基于真实文档重构 | YoachApp Team |
| 1.0.0 | 2025-10-05 | 初始化示例 | YoachApp Team |

---

**使用建议**:
- 复制本示例，可快速套用 Yoach PRD 推荐结构
- 替换所有示例数据、负责人、状态，保持 `优先级` 与 `状` 列
- 更新 dotted layout 与 ASCII 图示为实际设计稿链接
