---
id: KNOW-YYYYMMDD-descriptor
kind: deep
type: debug_playbook
title: "[故障排查深度复盘标题]"
created_at: YYYY-MM-DD
last_updated_at: YYYY-MM-DD
sensitivity: internal
source_refs:
  - EVI-YYYYMMDD-XXXX
tags:
  - debug
  - postmortem
  - tag1
---

# [故障排查深度复盘标题]

> 一段话总结：本文复盘 [故障/问题描述]，记录排查过程、根因分析、修复方案及后续改进。

## Executive Summary

| 维度 | 信息 |
|------|------|
| 故障发生时间 | YYYY-MM-DD HH:MM |
| 检测时间 | YYYY-MM-DD HH:MM |
| 恢复时间 | YYYY-MM-DD HH:MM |
| 影响范围 | [用户数/功能/业务线] |
| 严重程度 | [P0/P1/P2/P3] |
| 根因类别 | [代码/配置/依赖/环境/人为] |

---

## 1. Incident Narrative（事件叙事）

### 1.1 时间线

```
[时间线 ASCII 图]

HH:MM  [触发事件]
  │
HH:MM  [第一个症状]
  │
HH:MM  [检测到异常]
  │
HH:MM  [开始排查]
  │
HH:MM  [定位根因]
  │
HH:MM  [应用修复]
  │
HH:MM  [恢复正常]
```

### 1.2 症状描述

**用户可见症状:**
- [症状 1]
- [症状 2]

**系统表现:**
- [监控指标异常]
- [错误日志]
- [告警触发]

### 1.3 影响评估

| 维度 | 影响 |
|------|------|
| 用户影响 | [描述] |
| 业务损失 | [描述] |
| 技术债务 | [描述] |

---

## 2. A/B Isolation（隔离定位）

### 2.1 假设列表

| # | 假设 | 验证方法 | 结果 |
|---|------|---------|------|
| 1 | [假设描述] | [如何验证] | ✓/✗ |
| 2 | [假设描述] | [如何验证] | ✓/✗ |
| 3 | [假设描述] | [如何验证] | ✓/✗ |

### 2.2 二分排查过程

```
[排查决策树]

问题
 ├── 是前端问题？
 │    ├── 是 → [排查分支 A]
 │    └── 否 → 是后端问题？
 │              ├── 是 → 是 API 问题？
 │              │         ├── 是 → [根因]
 │              │         └── 否 → [继续]
 │              └── 否 → [继续]
```

### 2.3 关键排查命令/操作

```bash
# 用于定位问题的关键命令
[命令 1]

# 验证假设的命令
[命令 2]
```

### 2.4 误导性线索

[记录曾经误导排查方向的信号，避免未来重蹈覆辙]

- **误导线索 1**: [描述] — 为什么误导: [原因]

---

## 3. Root Cause Analysis（根因分析）

### 3.1 直接原因

[最直接导致故障的原因]

### 3.2 根本原因

[更深层的系统性原因，5 Whys 分析]

```
Why 1: [为什么发生直接原因]
  ↓
Why 2: [为什么 Why 1 会发生]
  ↓
Why 3: [为什么 Why 2 会发生]
  ↓
Why 4: [为什么 Why 3 会发生]
  ↓
Why 5: [根本原因]
```

### 3.3 促成因素

[非直接原因但促成故障发生的因素]

- [因素 1]
- [因素 2]

---

## 4. Resolution（修复方案）

### 4.1 紧急止血

[临时修复措施，快速恢复服务]

```bash
# 紧急修复命令/操作
[命令]
```

### 4.2 根治修复

[彻底解决问题的方案]

```diff
# 代码/配置变更
- [旧代码]
+ [新代码]
```

### 4.3 修复验证

- [ ] 本地测试通过
- [ ] Staging 环境验证
- [ ] Production 灰度
- [ ] 监控指标恢复正常

---

## 5. Postmortem（事后复盘）

### 5.1 做得好的地方

- [亮点 1]
- [亮点 2]

### 5.2 需要改进的地方

- [改进点 1]
- [改进点 2]

### 5.3 Action Items

| 优先级 | 行动项 | 负责人 | 截止日期 | 状态 |
|--------|--------|--------|---------|------|
| P0 | [行动项] | [人员] | YYYY-MM-DD | [ ] |
| P1 | [行动项] | [人员] | YYYY-MM-DD | [ ] |
| P2 | [行动项] | [人员] | YYYY-MM-DD | [ ] |

---

## 6. Prevention Playbook（预防手册）

### 6.1 类似问题快速检测

```
[检测检查清单]
□ 检查项 1
□ 检查项 2
□ 检查项 3
```

### 6.2 快速恢复步骤

1. [步骤 1]
2. [步骤 2]
3. [步骤 3]

### 6.3 预防措施

| 措施 | 类型 | 成本 | 预期效果 |
|------|------|------|---------|
| [措施 1] | 监控 | 低 | [效果] |
| [措施 2] | 流程 | 中 | [效果] |
| [措施 3] | 架构 | 高 | [效果] |

---

## Transferable Rules

1. **[规则名称]**: [从故障中泛化出的通用原则]
2. **[规则名称]**: [从故障中泛化出的通用原则]

---

## Key Takeaways

### For On-Call

- [值班工程师视角的关键洞见]

### For Development

- [开发视角的关键洞见]

### For Platform/SRE

- [平台/SRE 视角的关键洞见]

---

## 复盘质量自检

- [ ] 时间线完整准确
- [ ] 根因分析深入（至少 3 层 Why）
- [ ] Action Items 可执行且有 Owner
- [ ] 预防措施已评估成本效益

---

## References

- `EVI-YYYYMMDD-XXXX`: [故障记录/日志/截图]

---

> **注意：** 本文档为深度复盘报告（kind: deep），独立产出洞见。
> 后续可从中提取原子主张为 CARD。
