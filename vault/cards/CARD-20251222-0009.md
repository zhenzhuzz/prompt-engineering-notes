---
id: CARD-20251222-0009
type: tech_blog
status: draft
created_at: 2025-12-22
last_verified_at: 2025-12-22
confidence: high
scope: "Kafka vs RabbitMQ 选型决策，适用于后端消息队列选型场景"
tags:
  - learning
  - backend
  - kafka
  - rabbitmq
  - message-queue
  - decision-boundary
sensitivity: public
evidence_refs:
  - EVI-20251222-0005#loc:findings.kafka-vs-rabbitmq
sources:
  - https://aws.amazon.com/compare/the-difference-between-rabbitmq-and-kafka/
  - https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html
---

## Claim

Kafka 和 RabbitMQ 的核心差异在于设计目标：Kafka 是分布式流平台（高吞吐、事件持久化、可重放），RabbitMQ 是消息代理（灵活路由、消息优先级、ACK 后删除）。选型决策应基于是否需要"事件回溯"和"百万级吞吐"。

## Evidence

根据 EVI-20251222-0005#loc:findings.kafka-vs-rabbitmq：

**架构差异**：
- Kafka 使用 topics/partitions，消息持久化到磁盘，消费者主动拉取，可重放
- RabbitMQ 使用 exchanges/queues/bindings，消息 ACK 后删除，支持复杂路由和优先级

**性能差异**：
- Kafka：百万级/秒（顺序磁盘 I/O），水平扩展
- RabbitMQ：数千~万/秒，垂直扩展优先

**2024-2025 更新**：
- Kafka KRaft 模式移除 ZooKeeper 依赖，运维复杂度下降
- RabbitMQ Quorum Queues 增强可靠性

## Transferable Rule

**选型决策清单：**

```
┌─────────────────────────────────────────────────────────────┐
│  选 Kafka 当：                                              │
│  □ 需要事件流重放/回溯分析（审计、日志聚合）                  │
│  □ 吞吐量要求 > 10 万/秒                                    │
│  □ 数据需长期保留                                           │
│  □ 水平扩展是核心需求                                       │
├─────────────────────────────────────────────────────────────┤
│  选 RabbitMQ 当：                                           │
│  □ 需要灵活消息路由（条件分发到不同队列）                    │
│  □ 需要消息优先级                                           │
│  □ 传统请求-响应/任务队列模式                               │
│  □ 运维复杂度要求低，规模中等                               │
└─────────────────────────────────────────────────────────────┘
```

**快速判断**：问"消息消费后还需要吗？"——需要重放选 Kafka，不需要选 RabbitMQ。
