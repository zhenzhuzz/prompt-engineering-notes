# Claude Code Sub-Agents: æ„å»ºä¸“ä¸šåŒ– AI å›¢é˜Ÿçš„å®Œæ•´æŒ‡å—

> **Source**: Claude Code Official Documentation (2025-12)
> **URL**: https://code.claude.com/docs/en/sub-agents
> **Author**: Anthropic
> **Core Theme**: å¦‚ä½•é€šè¿‡ Sub-Agents å®ç°ä»»åŠ¡å§”æ´¾ã€ä¸Šä¸‹æ–‡éš”ç¦»å’Œä¸“ä¸šåŒ–åˆ†å·¥

---

## One Paragraph Takeaway (ä¸€æ®µè¯ç²¾å)

**åç›´è§‰æ´è§**: Sub-Agents çš„æ ¸å¿ƒä»·å€¼ä¸æ˜¯"è®© AI åšæ›´å¤šäº‹"ï¼Œè€Œæ˜¯**ä¿æŠ¤ä¸»å¯¹è¯çš„ä¸Šä¸‹æ–‡çº¯å‡€åº¦**ã€‚

æ¯ä¸ª Sub-Agent æ‹¥æœ‰ç‹¬ç«‹çš„ context windowï¼Œè¿™æ„å‘³ç€æ¢ç´¢æ€§æœç´¢ã€è°ƒè¯•æ—¥å¿—ã€ä»£ç å®¡æŸ¥ç­‰"è„æ´»"ä¸ä¼šæ±¡æŸ“ä½ çš„ä¸»å¯¹è¯ã€‚çœŸæ­£çš„æ æ†åœ¨äºï¼šè®©ä¸» Agent ä¸“æ³¨äºé«˜å±‚å†³ç­–ï¼Œå°†å…·ä½“æ‰§è¡Œå§”æ´¾ç»™ä¸“ä¸šåŒ–çš„ Sub-Agentsã€‚å¦‚æœä½ è®©ä¸€ä¸ª Agent åšæ‰€æœ‰äº‹æƒ…ï¼Œä½ å¾ˆå¿«å°±ä¼šé‡åˆ° context çˆ†ç‚¸çš„é—®é¢˜ã€‚

**æ ¸å¿ƒå…¬å¼**:
> ä¸Šä¸‹æ–‡éš”ç¦» Ã— ä¸“ä¸šåŒ–æç¤ºè¯ = æ›´é«˜çš„ä»»åŠ¡æˆåŠŸç‡ + æ›´é•¿çš„æœ‰æ•ˆä¼šè¯

---

## The Essence (æ ¸å¿ƒç²¾å)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLAUDE CODE SUB-AGENTS æ ¸å¿ƒæ¶æ„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   [ç”¨æˆ·è¯·æ±‚]                                                                 â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     MAIN AGENT (ä¸» Agent)                           â”‚   â”‚
â”‚   â”‚   â€¢ é«˜å±‚å†³ç­–å’Œä»»åŠ¡è§„åˆ’                                                â”‚   â”‚
â”‚   â”‚   â€¢ ä¿æŒå¹²å‡€çš„ä¸Šä¸‹æ–‡                                                  â”‚   â”‚
â”‚   â”‚   â€¢ æ ¹æ® description è‡ªåŠ¨é€‰æ‹© Sub-Agent                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚       â–¼                  â–¼                  â–¼                  â–¼           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚ Explore â”‚       â”‚  Plan   â”‚       â”‚ General â”‚       â”‚ Custom  â”‚       â”‚
â”‚   â”‚ (Haiku) â”‚       â”‚(Sonnet) â”‚       â”‚(Sonnet) â”‚       â”‚  Agent  â”‚       â”‚
â”‚   â”‚ åªè¯»æœç´¢ â”‚       â”‚ è®¡åˆ’ç ”ç©¶ â”‚       â”‚ å¤šæ­¥æ‰§è¡Œ â”‚       â”‚ ä½ å®šä¹‰çš„ â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚   ğŸ’¡ æ ¸å¿ƒæ´è§: æ¯ä¸ª Sub-Agent æœ‰ç‹¬ç«‹ context windowï¼Œ                        â”‚
â”‚      æ¢ç´¢ç»“æœä¸æ±¡æŸ“ä¸»å¯¹è¯ â†’ æ›´é•¿æœ‰æ•ˆä¼šè¯ + æ›´é«˜æˆåŠŸç‡                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ•°æ®é€Ÿè§ˆ**:

| ç»´åº¦ | å†…ç½® Agent | è‡ªå®šä¹‰ Agent |
|------|-----------|-------------|
| **å­˜å‚¨ä½ç½®** | ç³»ç»Ÿå†…ç½® | `.claude/agents/` (é¡¹ç›®) æˆ– `~/.claude/agents/` (ç”¨æˆ·) |
| **ä¼˜å…ˆçº§** | æœ€ä½ | é¡¹ç›®çº§ > CLI > ç”¨æˆ·çº§ > å†…ç½® |
| **æ¨¡å‹é€‰æ‹©** | å›ºå®š (Haiku/Sonnet) | å¯é…ç½® (`haiku`/`sonnet`/`opus`/`inherit`) |
| **å·¥å…·æƒé™** | é¢„è®¾ | å¯é™åˆ¶æˆ–ç»§æ‰¿å…¨éƒ¨ |

---

## Executive Summary

Claude Code çš„ Sub-Agents ç³»ç»Ÿæ˜¯ä¸€ä¸ª**ä»»åŠ¡å§”æ´¾æ¶æ„**ï¼Œè®©ä¸» Agent å¯ä»¥å°†ä¸“ä¸šä»»åŠ¡åˆ†é…ç»™é¢„é…ç½®çš„å­ä»£ç†ã€‚è¿™ä¸ä»…ä»…æ˜¯"å¤šä¸ª AI åä½œ"çš„æ¦‚å¿µâ€”â€”å®ƒè§£å†³äº† LLM åº”ç”¨ä¸­æœ€å…³é”®çš„é—®é¢˜ä¹‹ä¸€ï¼š**ä¸Šä¸‹æ–‡ç®¡ç†**ã€‚

**ä¸‰å¤§æ ¸å¿ƒä»·å€¼**:
1. **Context Preservation (ä¸Šä¸‹æ–‡ä¿æŠ¤)** â€” è„æ´»åœ¨ç‹¬ç«‹çª—å£å®Œæˆï¼Œä¸»å¯¹è¯ä¿æŒå¹²å‡€
2. **Specialized Expertise (ä¸“ä¸šåŒ–)** â€” æ¯ä¸ª Agent æœ‰é’ˆå¯¹æ€§çš„ system prompt
3. **Tool Sandboxing (å·¥å…·æ²™ç®±)** â€” å¯é™åˆ¶ Agent çš„å·¥å…·è®¿é—®æƒé™

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šå†…ç½® Sub-Agents æ·±åº¦è§£æ

### 1.1 Explore Agent â€” å¿«é€Ÿåªè¯»æœç´¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXPLORE AGENT å·¥ä½œæ¨¡å¼                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ¨¡å‹: Haiku (å¿«é€Ÿã€ä½å»¶è¿Ÿ)                                                 â”‚
â”‚   æ¨¡å¼: ä¸¥æ ¼åªè¯» â€” ä¸èƒ½åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ–‡ä»¶                                   â”‚
â”‚                                                                             â”‚
â”‚   å¯ç”¨å·¥å…·:                          å½»åº•ç¨‹åº¦:                               â”‚
â”‚   â€¢ Glob  - æ–‡ä»¶æ¨¡å¼åŒ¹é…              â€¢ Quick  - å¿«é€Ÿå®šå‘æŸ¥æ‰¾                â”‚
â”‚   â€¢ Grep  - å†…å®¹æ­£åˆ™æœç´¢              â€¢ Medium - ä¸­ç­‰æ·±åº¦æ¢ç´¢                â”‚
â”‚   â€¢ Read  - è¯»å–æ–‡ä»¶å†…å®¹              â€¢ Very thorough - å…¨é¢åˆ†æ             â”‚
â”‚   â€¢ Bash  - åªè¯»å‘½ä»¤ (ls, gitç­‰)                                            â”‚
â”‚                                                                             â”‚
â”‚   å…¸å‹åœºæ™¯:                                                                  â”‚
â”‚   "Where are errors from the client handled?"                               â”‚
â”‚   "What's the codebase structure?"                                          â”‚
â”‚   "Find all API endpoints"                                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆç”¨ Haiku**: æœç´¢ä»»åŠ¡ä¸éœ€è¦å¼ºæ¨ç†èƒ½åŠ›ï¼ŒHaiku çš„ä½å»¶è¿Ÿè®©æ¢ç´¢è¿‡ç¨‹æ›´å¿«ã€‚

**å…³é”®æ´è§**: Explore Agent æ‰¾åˆ°çš„å†…å®¹**ä¸ä¼šè¿›å…¥ä¸»å¯¹è¯çš„ context**ï¼Œè¿™æ˜¯å®ƒæœ€å¤§çš„ä»·å€¼ã€‚

---

### 1.2 Plan Agent â€” è®¡åˆ’æ¨¡å¼ä¸“ç”¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PLAN AGENT å·¥ä½œæ¨¡å¼                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ¨¡å‹: Sonnet (æ›´å¼ºåˆ†æèƒ½åŠ›)                                                â”‚
â”‚   è§¦å‘: ä»…åœ¨ Plan Mode ä¸‹è‡ªåŠ¨ä½¿ç”¨                                            â”‚
â”‚                                                                             â”‚
â”‚   å¯ç”¨å·¥å…·:                          ç›®çš„:                                   â”‚
â”‚   â€¢ Read  - è¯»å–æ–‡ä»¶                  â€¢ ç ”ç©¶ä»£ç åº“ç»“æ„                        â”‚
â”‚   â€¢ Glob  - æ–‡ä»¶æœç´¢                  â€¢ æ”¶é›†å®ç°è®¡åˆ’æ‰€éœ€çš„ä¸Šä¸‹æ–‡               â”‚
â”‚   â€¢ Grep  - å†…å®¹æœç´¢                  â€¢ é˜²æ­¢ Agent æ— é™åµŒå¥—                   â”‚
â”‚   â€¢ Bash  - æ¢ç´¢å‘½ä»¤                    (Sub-Agent ä¸èƒ½å†å¬å”¤ Sub-Agent)      â”‚
â”‚                                                                             â”‚
â”‚   å…¸å‹æµç¨‹:                                                                  â”‚
â”‚   User: [Plan Mode] Help me refactor authentication                         â”‚
â”‚     â””â”€â–¶ Plan Agent æ¢ç´¢ auth ç›¸å…³ä»£ç                                        â”‚
â”‚         â””â”€â–¶ è¿”å›å‘ç°ç»™ä¸» Agent                                              â”‚
â”‚             â””â”€â–¶ ä¸» Agent åŸºäºå‘ç°åˆ¶å®šè®¡åˆ’                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 1.3 General-Purpose Agent â€” å¤šæ­¥å¤æ‚ä»»åŠ¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GENERAL-PURPOSE AGENT å·¥ä½œæ¨¡å¼                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ¨¡å‹: Sonnet (æ›´å¼ºæ¨ç†)                                                    â”‚
â”‚   æ¨¡å¼: å¯è¯»å†™ â€” å®Œæ•´å·¥å…·è®¿é—®                                                â”‚
â”‚                                                                             â”‚
â”‚   ä¸ Explore çš„åŒºåˆ«:                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Explore Agent          â”‚ General-Purpose Agent                      â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚ åªè¯»æ¨¡å¼                â”‚ å¯ä¿®æ”¹æ–‡ä»¶                                 â”‚   â”‚
â”‚   â”‚ Haiku (å¿«)             â”‚ Sonnet (å¼º)                                â”‚   â”‚
â”‚   â”‚ ç®€å•æœç´¢ä»»åŠ¡            â”‚ å¤šæ­¥éª¤å¤æ‚ä»»åŠ¡                             â”‚   â”‚
â”‚   â”‚ ç»“æœä¸å½±å“ä»£ç           â”‚ å¯ä»¥æ‰§è¡Œä¿®æ”¹                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   å…¸å‹åœºæ™¯:                                                                  â”‚
â”‚   "Find all places where we handle auth and update them to new format"      â”‚
â”‚   (éœ€è¦æœç´¢ + ç†è§£ + ä¿®æ”¹çš„å¤åˆä»»åŠ¡)                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šåˆ›å»ºè‡ªå®šä¹‰ Sub-Agent

### 2.1 æ–‡ä»¶æ ¼å¼ä¸é…ç½®

```markdown
---
name: your-sub-agent-name        # å¿…å¡«: å°å†™å­—æ¯+è¿å­—ç¬¦
description: When to use this    # å¿…å¡«: ä½•æ—¶ä½¿ç”¨çš„è‡ªç„¶è¯­è¨€æè¿°
tools: Read, Grep, Glob, Bash    # å¯é€‰: çœç•¥åˆ™ç»§æ‰¿å…¨éƒ¨å·¥å…·
model: sonnet                    # å¯é€‰: haiku/sonnet/opus/inherit
permissionMode: default          # å¯é€‰: æƒé™æ¨¡å¼
skills: skill1, skill2           # å¯é€‰: è‡ªåŠ¨åŠ è½½çš„æŠ€èƒ½
---

ä½ çš„ system prompt å†™åœ¨è¿™é‡Œã€‚
å¯ä»¥æ˜¯å¤šæ®µè½ï¼Œè¯¦ç»†å®šä¹‰ Agent çš„è§’è‰²ã€èƒ½åŠ›å’Œæ–¹æ³•ã€‚
```

**é…ç½®å­—æ®µè¯¦è§£**:

| å­—æ®µ | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `name` | âœ… | å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå°å†™+è¿å­—ç¬¦ |
| `description` | âœ… | **å…³é”®**: å†³å®š Claude ä½•æ—¶è‡ªåŠ¨è°ƒç”¨æ­¤ Agent |
| `tools` | âŒ | ä¸å¡«=ç»§æ‰¿å…¨éƒ¨ï¼›å¡«å†™=åªèƒ½ç”¨è¿™äº› |
| `model` | âŒ | `inherit` ä¼šä½¿ç”¨ä¸»å¯¹è¯çš„æ¨¡å‹ |
| `permissionMode` | âŒ | `default`/`acceptEdits`/`bypassPermissions`/`plan`/`ignore` |
| `skills` | âŒ | Agent å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½çš„æŠ€èƒ½ |

### 2.2 å­˜å‚¨ä½ç½®ä¸ä¼˜å…ˆçº§

```
ä¼˜å…ˆçº§ä»é«˜åˆ°ä½:
â”œâ”€â”€ é¡¹ç›®çº§ Agent: .claude/agents/your-agent.md     â† æœ€é«˜ä¼˜å…ˆçº§
â”œâ”€â”€ CLI å®šä¹‰:     --agents '{...}'                 â† æ¬¡é«˜
â”œâ”€â”€ ç”¨æˆ·çº§ Agent: ~/.claude/agents/your-agent.md  â† æ¬¡ä½
â””â”€â”€ å†…ç½® Agent:   Explore, Plan, General          â† æœ€ä½
```

**å®æˆ˜å»ºè®®**:
- å›¢é˜Ÿå…±äº«çš„ Agent â†’ æ”¾ `.claude/agents/`ï¼Œæäº¤åˆ° git
- ä¸ªäººåå¥½çš„ Agent â†’ æ”¾ `~/.claude/agents/`

### 2.3 CLI åŠ¨æ€å®šä¹‰ (é€‚åˆæµ‹è¯•)

```bash
claude --agents '{
  "code-reviewer": {
    "description": "Expert code reviewer. Use proactively after code changes.",
    "prompt": "You are a senior code reviewer...",
    "tools": ["Read", "Grep", "Glob", "Bash"],
    "model": "sonnet"
  }
}'
```

**é€‚ç”¨åœºæ™¯**: å¿«é€Ÿæµ‹è¯•ã€ä¸´æ—¶ä»»åŠ¡ã€è‡ªåŠ¨åŒ–è„šæœ¬ã€æ–‡æ¡£åˆ†äº«

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šæœ€ä½³å®è·µä¸ç”Ÿäº§æ¡ˆä¾‹

### 3.1 Code Reviewer Agent (ä»£ç å®¡æŸ¥)

```markdown
---
name: code-reviewer
description: Expert code review specialist. Proactively reviews code for quality,
             security, and maintainability. Use immediately after writing or
             modifying code.
tools: Read, Grep, Glob, Bash
model: inherit
---

You are a senior code reviewer ensuring high standards of code quality and security.

When invoked:
1. Run git diff to see recent changes
2. Focus on modified files
3. Begin review immediately

Review checklist:
- Code is clear and readable
- Functions and variables are well-named
- No duplicated code
- Proper error handling
- No exposed secrets or API keys
- Input validation implemented
- Good test coverage
- Performance considerations addressed

Provide feedback organized by priority:
- Critical issues (must fix)
- Warnings (should fix)
- Suggestions (consider improving)

Include specific examples of how to fix issues.
```

**å…³é”®è®¾è®¡ç‚¹**:
- `model: inherit` â€” ä½¿ç”¨ä¸»å¯¹è¯çš„æ¨¡å‹ï¼Œä¿æŒä¸€è‡´æ€§
- `description` åŒ…å« "proactively" â€” é¼“åŠ± Claude ä¸»åŠ¨è°ƒç”¨
- æ˜ç¡®çš„æ£€æŸ¥æ¸…å• â€” ç¡®ä¿è¾“å‡ºç»“æ„åŒ–

### 3.2 Debugger Agent (è°ƒè¯•ä¸“å®¶)

```markdown
---
name: debugger
description: Debugging specialist for errors, test failures, and unexpected
             behavior. Use proactively when encountering any issues.
tools: Read, Edit, Bash, Grep, Glob
---

You are an expert debugger specializing in root cause analysis.

When invoked:
1. Capture error message and stack trace
2. Identify reproduction steps
3. Isolate the failure location
4. Implement minimal fix
5. Verify solution works

For each issue, provide:
- Root cause explanation
- Evidence supporting the diagnosis
- Specific code fix
- Testing approach
- Prevention recommendations

Focus on fixing the underlying issue, not the symptoms.
```

**å…³é”®è®¾è®¡ç‚¹**:
- åŒ…å« `Edit` å·¥å…· â€” å¯ä»¥ç›´æ¥ä¿®å¤é—®é¢˜
- 5 æ­¥æ ‡å‡†æµç¨‹ â€” ç¡®ä¿ç³»ç»Ÿæ€§è°ƒè¯•
- å¼ºè°ƒ "root cause" â€” é¿å…è¡¨é¢ä¿®å¤

### 3.3 Data Scientist Agent (æ•°æ®åˆ†æ)

```markdown
---
name: data-scientist
description: Data analysis expert for SQL queries, BigQuery operations, and
             data insights. Use proactively for data analysis tasks and queries.
tools: Bash, Read, Write
model: sonnet
---

You are a data scientist specializing in SQL and BigQuery analysis.

When invoked:
1. Understand the data analysis requirement
2. Write efficient SQL queries
3. Use BigQuery command line tools (bq) when appropriate
4. Analyze and summarize results
5. Present findings clearly

For each analysis:
- Explain the query approach
- Document any assumptions
- Highlight key findings
- Suggest next steps based on data

Always ensure queries are efficient and cost-effective.
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§ç”¨æ³•

### 4.1 Agent é“¾å¼è°ƒç”¨

```
> First use the code-analyzer subagent to find performance issues,
  then use the optimizer subagent to fix them
```

è¿™ä¼šè§¦å‘ä¸¤ä¸ª Agent é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªéƒ½æœ‰ç‹¬ç«‹çš„ contextã€‚

### 4.2 å¯æ¢å¤çš„ Agent (Resumable)

```
åˆæ¬¡è°ƒç”¨:
> Use the code-analyzer agent to start reviewing the authentication module
[Agent å®Œæˆåˆæ­¥åˆ†æï¼Œè¿”å› agentId: "abc123"]

æ¢å¤ç»§ç»­:
> Resume agent abc123 and now analyze the authorization logic as well
[Agent ç»§ç»­æ‰§è¡Œï¼Œä¿ç•™ä¹‹å‰çš„å®Œæ•´ä¸Šä¸‹æ–‡]
```

**æŠ€æœ¯ç»†èŠ‚**:
- æ¯æ¬¡æ‰§è¡Œåˆ†é…å”¯ä¸€ `agentId`
- å¯¹è¯å­˜å‚¨åœ¨ `agent-{agentId}.jsonl`
- æ¢å¤æ—¶è‡ªåŠ¨åŠ è½½ä¹‹å‰çš„å®Œæ•´ä¸Šä¸‹æ–‡

**é€‚ç”¨åœºæ™¯**:
- å¤§å‹ä»£ç åº“åˆ†æï¼ˆåˆ†å¤šæ¬¡å®Œæˆï¼‰
- è¿­ä»£ä¼˜åŒ–ï¼ˆä¸ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼‰
- å¤šæ­¥å·¥ä½œæµï¼ˆä¿æŒè¿ç»­æ€§ï¼‰

### 4.3 é¼“åŠ±ä¸»åŠ¨è°ƒç”¨çš„æŠ€å·§

åœ¨ `description` ä¸­ä½¿ç”¨è¿™äº›çŸ­è¯­:
- `"Use PROACTIVELY"`
- `"MUST BE USED when..."`
- `"Use immediately after..."`

**Before vs After**:

| âŒ è¢«åŠ¨æè¿° | âœ… ä¸»åŠ¨æè¿° |
|------------|-----------|
| "Reviews code for quality" | "Proactively reviews code. Use immediately after writing code." |
| "Helps with debugging" | "MUST BE USED when encountering any errors or test failures." |

---

## Transferable Rules (å¯è¿ç§»è§„åˆ™)

### è§„åˆ™ #1: Context éš”ç¦»ä¼˜å…ˆäºåŠŸèƒ½å †ç Œ

**æ¨¡å¼**:
```
âŒ é”™è¯¯æ¨¡å¼: ä¸€ä¸ª Agent åšæ‰€æœ‰äº‹ â†’ context çˆ†ç‚¸ â†’ è´¨é‡ä¸‹é™
âœ… æ­£ç¡®æ¨¡å¼: ä¸» Agent åšå†³ç­– + Sub-Agents åšæ‰§è¡Œ â†’ context å¹²å‡€ â†’ é•¿ä¼šè¯
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: LLM çš„ context window æ˜¯æœ‰é™èµ„æºã€‚æ¢ç´¢æ€§æœç´¢äº§ç”Ÿå¤§é‡"åƒåœ¾"å†…å®¹ï¼Œå¦‚æœéƒ½åœ¨ä¸»å¯¹è¯ä¸­è¿›è¡Œï¼Œå¾ˆå¿«å°±ä¼šè¾¾åˆ° context é™åˆ¶æˆ–è´¨é‡ä¸‹é™ã€‚

**å¦‚ä½•åº”ç”¨**: ä»»ä½•éœ€è¦å¤§é‡æœç´¢ã€è°ƒè¯•ã€æˆ–è¯•é”™çš„ä»»åŠ¡ï¼Œéƒ½åº”è¯¥å§”æ´¾ç»™ Sub-Agentã€‚

---

### è§„åˆ™ #2: Description æ˜¯è‡ªåŠ¨è·¯ç”±çš„å…³é”®

**æ¨¡å¼**:
```
âŒ é”™è¯¯æ¨¡å¼: description å†™å¾—æ¨¡ç³Š â†’ Claude ä¸çŸ¥é“ä½•æ—¶è°ƒç”¨
âœ… æ­£ç¡®æ¨¡å¼: description åŒ…å«å…·ä½“è§¦å‘æ¡ä»¶ â†’ è‡ªåŠ¨ä¸”å‡†ç¡®çš„è°ƒç”¨
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: Claude æ ¹æ®ç”¨æˆ·è¯·æ±‚å’Œ Agent çš„ `description` å­—æ®µå†³å®šæ˜¯å¦å§”æ´¾ä»»åŠ¡ã€‚

**å¦‚ä½•åº”ç”¨**: å†™ description æ—¶é—®è‡ªå·±â€”â€”"ç”¨æˆ·è¯´ä»€ä¹ˆè¯æ—¶ï¼Œæˆ‘å¸Œæœ›è¿™ä¸ª Agent è¢«è°ƒç”¨ï¼Ÿ"

---

### è§„åˆ™ #3: å·¥å…·æƒé™æœ€å°åŒ–åŸåˆ™

**æ¨¡å¼**:
```
âŒ é”™è¯¯æ¨¡å¼: æ‰€æœ‰ Agent éƒ½èƒ½è®¿é—®æ‰€æœ‰å·¥å…·
âœ… æ­£ç¡®æ¨¡å¼: åªç»™ Agent å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°å·¥å…·é›†
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**:
1. å®‰å…¨æ€§ â€” é™åˆ¶æ½œåœ¨é£é™©
2. èšç„¦æ€§ â€” Agent ä¸ä¼šè¢«ä¸ç›¸å…³çš„å·¥å…·åˆ†å¿ƒ
3. å¯é¢„æµ‹æ€§ â€” è¾“å‡ºæ›´ä¸€è‡´

**å¦‚ä½•åº”ç”¨**: Explore ç±»ä»»åŠ¡åªéœ€ Read/Grep/Globï¼›ä¿®æ”¹ç±»ä»»åŠ¡æ‰ç»™ Editã€‚

---

### è§„åˆ™ #4: ç”¨ `inherit` ä¿æŒæ¨¡å‹ä¸€è‡´æ€§

**æ¨¡å¼**:
```
âŒ é”™è¯¯æ¨¡å¼: éšæ„æŒ‡å®šæ¨¡å‹ â†’ é£æ ¼/èƒ½åŠ›ä¸ä¸€è‡´
âœ… æ­£ç¡®æ¨¡å¼: ç”¨ model: inherit â†’ ä¸ä¸»å¯¹è¯ä¿æŒä¸€è‡´
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: å¦‚æœä¸»å¯¹è¯ç”¨ Opusï¼ŒSub-Agent å´ç”¨ Haikuï¼Œå¯èƒ½å‡ºç°èƒ½åŠ›æ–­å±‚æˆ–é£æ ¼å·®å¼‚ã€‚

**å¦‚ä½•åº”ç”¨**: é™¤éæœ‰æ˜ç¡®çš„æˆæœ¬/é€Ÿåº¦è€ƒè™‘ï¼Œå¦åˆ™ç”¨ `inherit`ã€‚

---

### è§„åˆ™ #5: ç‰ˆæœ¬æ§åˆ¶ä½ çš„ Agent

**æ¨¡å¼**:
```
âŒ é”™è¯¯æ¨¡å¼: Agent æ–‡ä»¶åªåœ¨æœ¬åœ° â†’ å›¢é˜Ÿæ— æ³•å…±äº«/è¿­ä»£
âœ… æ­£ç¡®æ¨¡å¼: .claude/agents/ æäº¤åˆ° git â†’ å›¢é˜Ÿåä½œä¼˜åŒ–
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: Agent çš„ system prompt æ˜¯å›¢é˜ŸçŸ¥è¯†çš„ç§¯ç´¯ï¼Œåº”è¯¥åƒä»£ç ä¸€æ ·è¢«ç‰ˆæœ¬æ§åˆ¶ã€‚

**å¦‚ä½•åº”ç”¨**: é¡¹ç›®çº§ Agent æ”¾ `.claude/agents/`ï¼ŒåŠ å…¥ git ä»“åº“ã€‚

---

## Key Takeaways

### For Individual Engineers
1. **ç”¨ Explore Agent åšæœç´¢** â€” ç»“æœä¸æ±¡æŸ“ä¸»å¯¹è¯ï¼Œä¿æŒ context å¹²å‡€
2. **åˆ›å»ºä¸ªäººå·¥å…·ç®±** â€” åœ¨ `~/.claude/agents/` æ”¾å¸¸ç”¨çš„ Agent (code-reviewer, debugger)
3. **å­¦ä¼š Resume** â€” å¤§å‹ä»»åŠ¡åˆ†å¤šæ¬¡å®Œæˆï¼Œç”¨ `agentId` æ¢å¤ä¸Šä¸‹æ–‡

### For Teams / Managers
1. **æ ‡å‡†åŒ–å›¢é˜Ÿ Agents** â€” é¡¹ç›®çº§ Agent æäº¤åˆ° gitï¼Œç¡®ä¿ä¸€è‡´æ€§
2. **å»ºç«‹ Agent åº“** â€” æ”¶é›†æœ€ä½³å®è·µçš„ Agent é…ç½®ï¼Œæ–°äººå¯å¿«é€Ÿå¤ç”¨
3. **Review Agent Prompts** â€” åƒ review ä»£ç ä¸€æ · review Agent çš„ system prompt

### For Founders / Leaders
1. **Sub-Agent æ˜¯ AI åŸç”Ÿæ¶æ„** â€” ä¸æ˜¯"å¤šä¸ª AI"ï¼Œè€Œæ˜¯"ä»»åŠ¡åˆ†å±‚ + ä¸Šä¸‹æ–‡ç®¡ç†"
2. **æŠ•èµ„ Agent è®¾è®¡** â€” å¥½çš„ Agent é…ç½®æ˜¯å¯å¤ç”¨çš„å›¢é˜Ÿèµ„äº§
3. **å…³æ³¨ context æ•ˆç‡** â€” è¿™æ˜¯ LLM åº”ç”¨ä¸­æœ€è¢«ä½ä¼°çš„ç“¶é¢ˆ

---

## Glossary (æœ¯è¯­è¡¨)

| è‹±æ–‡æœ¯è¯­ | ä¸­æ–‡ç¿»è¯‘ | è¯´æ˜ |
|----------|----------|------|
| Sub-Agent | å­ä»£ç† | è¢«ä¸» Agent å§”æ´¾ä»»åŠ¡çš„ä¸“ä¸šåŒ– Agent |
| Context Window | ä¸Šä¸‹æ–‡çª—å£ | LLM å•æ¬¡å¯¹è¯å¯å¤„ç†çš„æœ€å¤§ token æ•° |
| Context Preservation | ä¸Šä¸‹æ–‡ä¿æŠ¤ | Sub-Agent çš„ç»“æœä¸è¿›å…¥ä¸»å¯¹è¯ context |
| Tool Sandboxing | å·¥å…·æ²™ç®± | é™åˆ¶ Agent å¯è®¿é—®çš„å·¥å…·é›† |
| Resumable Agent | å¯æ¢å¤ Agent | å¯ä»¥ç”¨ agentId ç»§ç»­ä¹‹å‰å¯¹è¯çš„ Agent |
| Thoroughness Level | å½»åº•ç¨‹åº¦ | Explore Agent çš„æœç´¢æ·±åº¦ (quick/medium/very thorough) |
| Permission Mode | æƒé™æ¨¡å¼ | Agent å¤„ç†æƒé™è¯·æ±‚çš„æ–¹å¼ |

---

## Sources

- [Claude Code Sub-Agents Documentation](https://code.claude.com/docs/en/sub-agents)
- [Claude Code Tools Documentation](https://code.claude.com/docs/en/tools)
- [Claude Code Plugins Documentation](https://code.claude.com/docs/en/plugins)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-18
**æ–‡æ¡£ç±»å‹**: KNOW çŸ¥è¯†æå–æ–‡æ¡£
