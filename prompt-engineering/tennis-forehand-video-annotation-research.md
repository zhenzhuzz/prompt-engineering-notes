# ç½‘çƒæ­£æ‰‹è§†é¢‘æ ‡æ³¨ç³»ç»Ÿè°ƒç ”æŠ¥å‘Š

> è°ƒç ”æ—¥æœŸï¼š2024-12-14
> ç›®æ ‡ï¼šä¸ºç½‘çƒæ­£æ‰‹åŠ¨ä½œè¯„åˆ† WebApp çš„è§†é¢‘é˜¶æ®µæ ‡æ³¨åŠŸèƒ½æä¾›æŠ€æœ¯æ–¹æ¡ˆå’Œæœ€ä½³å®è·µå‚è€ƒ

---

## ç›®å½•

1. [ä½“è‚²é¢†åŸŸåŠ¨ä½œé˜¶æ®µåˆ’åˆ†æ ‡å‡†](#1-ä½“è‚²é¢†åŸŸåŠ¨ä½œé˜¶æ®µåˆ’åˆ†æ ‡å‡†)
2. [ä¸“ä¸šè¿åŠ¨åˆ†æè½¯ä»¶å‚è€ƒ](#2-ä¸“ä¸šè¿åŠ¨åˆ†æè½¯ä»¶å‚è€ƒ)
3. [è§†é¢‘æ ‡æ³¨ UI/UX æœ€ä½³å®è·µ](#3-è§†é¢‘æ ‡æ³¨-uiux-æœ€ä½³å®è·µ)
4. [å¼€æºè§†é¢‘æ ‡æ³¨å·¥å…·](#4-å¼€æºè§†é¢‘æ ‡æ³¨å·¥å…·)
5. [HTML5 è§†é¢‘æŠ€æœ¯å®ç°](#5-html5-è§†é¢‘æŠ€æœ¯å®ç°)
6. [è§†é¢‘æŒ‡çº¹ä¸è¯†åˆ«](#6-è§†é¢‘æŒ‡çº¹ä¸è¯†åˆ«)
7. [AI è¾…åŠ©æ–¹æ¡ˆï¼ˆæœªæ¥å‚è€ƒï¼‰](#7-ai-è¾…åŠ©æ–¹æ¡ˆæœªæ¥å‚è€ƒ)
8. [æ¨èæ–¹æ¡ˆä¸å®æ–½å»ºè®®](#8-æ¨èæ–¹æ¡ˆä¸å®æ–½å»ºè®®)

---

## 1. ä½“è‚²é¢†åŸŸåŠ¨ä½œé˜¶æ®µåˆ’åˆ†æ ‡å‡†

### 1.1 å­¦æœ¯ç•Œå…¬è®¤çš„ç½‘çƒæ­£æ‰‹ä¸‰é˜¶æ®µåˆ’åˆ†

æ ¹æ®è¿åŠ¨ç”Ÿç‰©åŠ›å­¦ç ”ç©¶ï¼Œç½‘çƒæ­£æ‰‹å‡»çƒè¢«å­¦æœ¯ç•Œæ ‡å‡†åŒ–ä¸º **ä¸‰ä¸ªé˜¶æ®µã€å››ä¸ªå…³é”®æ—¶åˆ»**ï¼š

| é˜¶æ®µ | è‹±æ–‡åç§° | æè¿° | å…³é”®åŠ¨ä½œ |
|------|----------|------|----------|
| **Phase 1** | Back-swing / Lead-in | å¼•æ‹å‡†å¤‡é˜¶æ®µ | è‚©è†€è½¬ç¦»çƒç½‘ï¼Œçƒæ‹å‘åç§»åŠ¨ï¼Œä¸Šè‚¢è‚Œç¾¤å¼€å§‹å‚ä¸ |
| **Phase 2** | Forward Acceleration Swing | å‘å‰åŠ é€ŸæŒ¥æ‹é˜¶æ®µ | çƒæ‹å¼€å§‹å‘å‰ç§»åŠ¨ç›´åˆ°å‡»çƒç¬é—´ï¼Œä¸Šä¸‹è‚¢å½¢æˆåŠ¨åŠ›é“¾ |
| **Phase 3** | Post-swing / Follow-through | éšæŒ¥æ”¶æ‹é˜¶æ®µ | ä»å‡»çƒç¬é—´åˆ°æŒ¥æ‹ç»“æŸï¼Œä¸Šè‚¢-çƒæ‹å¤åˆä½“å‡é€Ÿ |

**å››ä¸ªå…³é”®æ—¶åˆ»**ï¼š
1. å‡†å¤‡å§¿åŠ¿å¼€å§‹
2. å¼•æ‹ç»“æŸ / å‘å‰æŒ¥æ‹å¼€å§‹ (å¯¹åº”ä½ çš„ **t1**)
3. å‡»çƒç¬é—´ (å¯¹åº”ä½ çš„ **t2**)
4. éšæŒ¥ç»“æŸ

> **æ¥æº**: [PMC - Biomechanical Analysis of Touch Ball Movements in Tennis Forehand Strokes](https://pmc.ncbi.nlm.nih.gov/articles/PMC9225835/)

### 1.2 åŠ¨åŠ›é“¾ï¼ˆKinetic Chainï¼‰åŸç†

å­¦æœ¯ç ”ç©¶å¼ºè°ƒæ­£æ‰‹å‡»çƒçš„å…³é”®ç”Ÿç‰©åŠ›å­¦ç‰¹ç‚¹ï¼š

- **åŠ›é‡æ¥æº**: å‡»çƒåŠ›é‡æ¥è‡ªä¸‹è‚¢ï¼Œé€šè¿‡é«‹éƒ¨å’Œè‚©éƒ¨æ—‹è½¬ä¼ é€’åˆ°æ‰‹è‡‚
- **åè°ƒéš¾ç‚¹**: ä¸‹è‚¢ä¸»è¦åœ¨çŸ¢çŠ¶é¢æ¨è¹¬ï¼Œè€Œèº¯å¹²å’Œä¸Šè‚¢åœ¨æ°´å¹³é¢æ—‹è½¬
- **è‚©å†…æ—‹çš„é‡è¦æ€§**: è‚©å…³èŠ‚å†…æ—‹æ˜¯æ­£æ‰‹å’Œå‘çƒçš„æ ¸å¿ƒåŠ¨ä½œ

> **æ¥æº**: [PMC - Biomechanics and Tennis](https://pmc.ncbi.nlm.nih.gov/articles/PMC2577481/)

### 1.3 é«˜å°”å¤«æŒ¥æ†çš„ç±»ä¼¼é˜¶æ®µåˆ’åˆ†

é«˜å°”å¤«æŒ¥æ†åˆ†æè½¯ä»¶ï¼ˆå¦‚ GolfFix AIï¼‰å°†æŒ¥æ†åˆ†ä¸º **4 ä¸ªéƒ¨åˆ†**è®¡ç®—èŠ‚å¥ï¼š

| é˜¶æ®µ | åç§° |
|------|------|
| 1 | Swing Tempo (æ•´ä½“èŠ‚å¥) |
| 2 | Backswing (ä¸Šæ†) |
| 3 | Top Pause (é¡¶ç‚¹åœé¡¿) |
| 4 | Downswing (ä¸‹æ†) |

è¿™ä¸ç½‘çƒçš„é˜¶æ®µåˆ’åˆ†ç†å¿µä¸€è‡´ï¼Œéƒ½æ˜¯åŸºäº**ç‰©ç†è¿åŠ¨è½¨è¿¹çš„è½¬æŠ˜ç‚¹**ã€‚

> **æ¥æº**: [GolfFix AI App](https://apps.apple.com/us/app/golffix-ai-golf-swing-analyzer/id1586120680)

---

## 2. ä¸“ä¸šè¿åŠ¨åˆ†æè½¯ä»¶å‚è€ƒ

### 2.1 ä¸»æµå¹³å°å¯¹æ¯”

| è½¯ä»¶ | å®šä½ | æ ¸å¿ƒç‰¹ç‚¹ | é˜¶æ®µåˆ†å‰²æ–¹å¼ |
|------|------|----------|--------------|
| **Dartfish** | ä¸“ä¸šç”Ÿç‰©åŠ›å­¦åˆ†æ | è½¨è¿¹è¿½è¸ªã€3Dæµ‹é‡ã€å¤šç›¸æœºåŒæ­¥ | ç”¨é™æ€å…³é”®å¸§+è¯­éŸ³æ³¨é‡Šæ ‡è®°é˜¶æ®µ |
| **Hudl** | å›¢é˜Ÿè¿åŠ¨æˆ˜æœ¯åˆ†æ | ç¾å›½é«˜ä¸­/å¤§å­¦å›¢é˜Ÿæ ‡å‡†ã€è§†é¢‘åˆ†äº« | è§†é¢‘å‰ªè¾‘+æ ‡ç­¾åˆ†ç±» |
| **OnForm** | ä¸ªäººæŠ€æœ¯åˆ†æ | æ…¢åŠ¨ä½œå›æ”¾ã€å¹¶æ’å¯¹æ¯”ã€è¯­éŸ³åé¦ˆ | æ‰‹åŠ¨æ ‡è®°+AIè¾…åŠ© |
| **SwingVision** | ç½‘çƒAIåˆ†æ | è‡ªåŠ¨è®°åˆ†ã€çƒé€Ÿæ£€æµ‹ã€é«˜äº®ç”Ÿæˆ | AIè‡ªåŠ¨åˆ†å‰²æ¯ä¸€æ‹ |
| **Kinovea** | å…è´¹å¼€æº | é€å¸§åˆ†æã€è§’åº¦æµ‹é‡ã€è½¨è¿¹è¿½è¸ª | æ‰‹åŠ¨é€å¸§æ ‡è®° |

### 2.2 Dartfish çš„é˜¶æ®µæ ‡è®°æ–¹æ³•

Dartfish Express çš„ç‹¬ç‰¹æ–¹å¼ï¼š
- æ‹æ‘„**å…³é”®ä½ç½®çš„é™æ€ç…§ç‰‡**ï¼ˆå¦‚è½¬ä½“ã€é¡¶ç‚¹ã€å‡»çƒï¼‰
- åœ¨é™æ€å›¾ä¸Šè¿›è¡Œ**è¯­éŸ³æ³¨é‡Š**
- åˆ›å»ºä¸€ç³»åˆ—å…³é”®å¸§ä½œä¸ºè¯„è®ºç‚¹

> **æ¥æº**: [Tennis Techie - Video Analysis Apps](https://www.tennistechie.com/blog/2018/6/22/di8w77d2myqrom8bwtyklg3s7xffhf-lpa9z)

### 2.3 SwingVision çš„è‡ªåŠ¨åŒ–æ–¹æ³•

SwingVisionï¼ˆç½‘çƒ/åŒ¹å…‹çƒAIåˆ†æåº”ç”¨ï¼‰çš„ç‰¹ç‚¹ï¼š
- **è‡ªåŠ¨æ£€æµ‹æŒ¥æ‹åŠ¨ä½œ**å¹¶è®°å½•
- **è‡ªåŠ¨å‰ªè¾‘**å»é™¤æ­»çƒæ—¶é—´
- æŒ‰**æ‹æ•°(shot-by-shot)** æˆ– **åˆ†æ•°(point-by-point)** å›é¡¾è§†é¢‘
- æ£€æµ‹çƒé€Ÿã€è½ç‚¹æ·±åº¦ã€ç²¾åº¦å’Œå›åˆé•¿åº¦

> **æ¥æº**: [SwingVision Official](https://swing.vision/)

### 2.4 Kinoveaï¼ˆå…è´¹å¼€æºï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- é€å¸§æ’­æ”¾å’Œæ…¢åŠ¨ä½œ
- åŸºäº FFMpegï¼Œæ”¯æŒå‡ ä¹æ‰€æœ‰è§†é¢‘æ ¼å¼
- æ—¶é—´æ˜¾ç¤ºï¼šå¸§å·ã€æ¯«ç§’ã€æ ‡å‡†æ—¶é—´ç 
- æ ‡æ³¨å·¥å…·ï¼šæ ‡ç­¾ã€ç®­å¤´ã€æ›²çº¿ã€è‡ªç”±ç»˜åˆ¶
- **åŒè§†é¢‘åŒæ­¥å¯¹æ¯”**
- è½¨è¿¹è¿½è¸ªï¼ˆå³é”®ç‚¹å‡»å¯¹è±¡å³å¯è¿½è¸ªï¼‰

> **æ¥æº**: [Kinovea Features](https://www.kinovea.org/features.html) | [GitHub](https://github.com/Kinovea/Kinovea)

---

## 3. è§†é¢‘æ ‡æ³¨ UI/UX æœ€ä½³å®è·µ

### 3.1 æ—¶é—´çº¿æ ‡è®°è®¾è®¡åŸåˆ™

#### ç« èŠ‚/é”šç‚¹å¯¼èˆª
- åœ¨é•¿è§†é¢‘ä¸­æ˜¾ç¤º**ç« èŠ‚æ ‡è®°**å¸®åŠ©ç”¨æˆ·è·³è½¬
- ç±»ä¼¼ç½‘é¡µé”šç‚¹é“¾æ¥ï¼Œå…è®¸ç”¨æˆ·ç›´æ¥è®¿é—®ç‰¹å®šæ—¶é—´ç‚¹
- åœ¨è¿›åº¦æ¡ä¸Šç”¨**å°ç‚¹**è¡¨ç¤ºç« èŠ‚ä½ç½®

> **æ¥æº**: [NN/g - Videos as Instructional Content](https://www.nngroup.com/articles/instructional-video-guidelines/)

#### æ ‡è®°äº¤äº’è®¾è®¡
**Annotated Player**ï¼ˆReact è§†é¢‘æ’­æ”¾å™¨ï¼‰çš„å®ç°ï¼š
- æ—¶é—´çº¿ä¸Šé…ç½®**å¯ç‚¹å‡»çš„æ ‡è®°ç‚¹**
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºï¼šæ ‡é¢˜ã€æè¿°ã€ç¼©ç•¥å›¾é¢„è§ˆ
- ç‚¹å‡»æ ‡è®°æ—¶**å¹³æ»‘è¿‡æ¸¡**åˆ°ç›®æ ‡ä½ç½®
- å¯è‡ªå®šä¹‰ç¼©ç•¥å›¾ï¼ˆä¸å¿…ä½¿ç”¨è§†é¢‘å¸§ï¼‰

> **æ¥æº**: [GitHub - annotated-player](https://github.com/TheCodeTherapy/annotated-player)

### 3.2 æ ‡æ³¨å·¥å…· UX åŸåˆ™

| åŸåˆ™ | è¯´æ˜ |
|------|------|
| **æœ€å°åŒ–ç‚¹å‡»æ¬¡æ•°** | å‡å°‘å®Œæˆæ ‡æ³¨æ‰€éœ€çš„æ“ä½œæ­¥éª¤ |
| **å®æ—¶åé¦ˆ** | æ ‡æ³¨åç«‹å³æ˜¾ç¤ºç»“æœ |
| **æ”¯æŒæ’¤é”€/é‡åš** | å…è®¸ç”¨æˆ·ä¿®æ­£é”™è¯¯ |
| **å‡å°‘è®¤çŸ¥è´Ÿè·** | æ¸…æ™°çš„å›¾æ ‡ã€æ ‡ç­¾å’Œå·¥ä½œæµ |
| **è‰²ç›²å‹å¥½è®¾è®¡** | ä¸ä»…ä¾èµ–é¢œè‰²ï¼Œç»“åˆå›¾æ ‡å½¢çŠ¶åŒºåˆ† |
| **é”®ç›˜å¿«æ·é”®** | æé«˜æ•ˆç‡ï¼ˆå¦‚ç©ºæ ¼æš‚åœã€â†â†’é€å¸§ï¼‰ |

> **æ¥æº**: [Labellerr - Best Data Labeling UI](https://www.labellerr.com/blog/best-data-labeling-user-interface-tools-features-and-best-practices/)

### 3.3 è§†è§‰åŒºåˆ†è®¾è®¡

ç ”ç©¶è¡¨æ˜ï¼Œ**å›¾æ ‡+é¢œè‰²ç»„åˆ**çš„æ ‡è®°æ–¹å¼æ•ˆæœæœ€å¥½ï¼š
- ä»…ç”¨é¢œè‰²åŒºåˆ†é£é™©é«˜ï¼ˆè‰²ç›²ç”¨æˆ·é—®é¢˜ï¼‰
- ä»…ç”¨å½¢çŠ¶å¯èƒ½ä¸å¤Ÿæ˜¾çœ¼
- **ç»„åˆä½¿ç”¨**å›¾æ ‡å½¢çŠ¶å’Œé¢œè‰²èƒ½æœ€å¤§åŒ–è¯†åˆ«æ•ˆç‡

> **æ¥æº**: [NN/g - Visual Indicators](https://www.nngroup.com/articles/visual-indicators-differentiators/)

### 3.4 ç§»åŠ¨ç«¯é€‚é…å»ºè®®

åŸºäº React Native Video å’Œç›¸å…³ç»„ä»¶åº“çš„ç»éªŒï¼š
- ä½¿ç”¨**è‡ªå®šä¹‰æ§ä»¶**æ›¿ä»£ç³»ç»Ÿé»˜è®¤æ§ä»¶
- `seek()` æ–¹æ³•ç”¨äºè·³è½¬åˆ°æŒ‡å®šæ—¶é—´
- è€ƒè™‘ä½¿ç”¨**æ»‘å—ç»„ä»¶**ï¼ˆscrubberï¼‰å¤„ç†ç²¾ç¡®å®šä½
- æ³¨æ„ `currentTime` æ›´æ–°é¢‘ç‡å¯èƒ½ä¸å¤Ÿå¿«çš„é—®é¢˜

> **æ¥æº**: [react-native-video npm](https://www.npmjs.com/package/react-native-video)

---

## 4. å¼€æºè§†é¢‘æ ‡æ³¨å·¥å…·

### 4.1 JavaScript/HTML5 è§†é¢‘æ ‡æ³¨åº“

| åº“å | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **Video.js** | æœ€æµè¡Œçš„å¼€æºæ’­æ”¾å™¨ï¼Œ400k+ç½‘ç«™ä½¿ç”¨ | åŸºç¡€æ’­æ”¾å™¨æ¡†æ¶ |
| **videojs-annotation-comments** | Video.js æ’ä»¶ï¼Œæ”¯æŒæ—¶é—´ç‚¹/èŒƒå›´è¯„è®º | åä½œæ ‡æ³¨ |
| **OpenVideoAnnotation** | ç»“åˆ annotator.js çš„è§†é¢‘æ ‡æ³¨ | å­¦æœ¯ç ”ç©¶ |
| **OAC Video Annotator** | ç¬¦åˆ Open Annotation æ ‡å‡† | æ ‡å‡†åŒ–æ•°æ®äº¤æ¢ |
| **Annotator.js** | é€šç”¨æ ‡æ³¨æ¡†æ¶ï¼Œå¯æ‰©å±• | è‡ªå®šä¹‰æ ‡æ³¨ç³»ç»Ÿ |

> **æ¥æº**:
> - [Video.js GitHub](https://github.com/videojs/video.js)
> - [videojs-annotation-comments](https://github.com/contently/videojs-annotation-comments)
> - [Annotator.js](http://annotatorjs.org/)

### 4.2 videojs-annotation-comments åŠŸèƒ½

- æ”¯æŒ**æ—¶é—´ç‚¹æ ‡è®°**å’Œ**æ—¶é—´èŒƒå›´æ ‡è®°**
- è¯„è®º/å›å¤åŠŸèƒ½
- ä½¿ç”¨ Handlebars æ¨¡æ¿æ¸²æŸ“
- é¢„ç¼–è¯‘æ¨¡æ¿èŠ‚çœçº¦ 100kb

```javascript
// ç¤ºä¾‹é…ç½®
videojs('my-video', {
  plugins: {
    annotationComments: {
      // æ ‡è®°é…ç½®
    }
  }
});
```

### 4.3 CVATï¼ˆä¸“ä¸šæ ‡æ³¨å·¥å…·ï¼‰

CVATï¼ˆComputer Vision Annotation Toolï¼‰çš„ UX ä¼˜åŒ–ï¼š
- **å…³é”®å¸§é—´è¾¹ç•Œæ¡†æ’å€¼**ï¼ˆè‡ªåŠ¨è¡¥å…¨ä¸­é—´å¸§ï¼‰
- è‡ªåŠ¨æ ‡æ³¨åŠŸèƒ½
- å…³é”®æ“ä½œå¿«æ·é”®

> **æ¥æº**: [ResearchGate - Tool for annotating video](https://www.researchgate.net/post/Tool-for-annotating-and-evaluating-video-object-detection-or-tracking)

---

## 5. HTML5 è§†é¢‘æŠ€æœ¯å®ç°

### 5.1 currentTime ç²¾åº¦é—®é¢˜

#### åŸºæœ¬ç‰¹æ€§
- `currentTime` æ˜¯**åŒç²¾åº¦æµ®ç‚¹æ•°**ï¼Œå•ä½ä¸ºç§’
- è®¾ç½®è¯¥å€¼ä¼šè§¦å‘è§†é¢‘ seek

#### ç²¾åº¦é™åˆ¶
```
âš ï¸ é‡è¦è­¦å‘Šï¼š
- å‡ºäºå®‰å…¨è€ƒè™‘ï¼ˆé˜²æ­¢æ—¶åºæ”»å‡»å’ŒæŒ‡çº¹è¯†åˆ«ï¼‰ï¼Œæµè§ˆå™¨å¯èƒ½é™ä½ç²¾åº¦
- Firefox å¯èƒ½å°†ç²¾åº¦é™ä½åˆ° 2ms
- currentTime æ˜¯æ—¶é—´å€¼ï¼Œä¸æ˜¯å¸§å·
- å†…éƒ¨èˆå…¥å¯èƒ½å¯¼è‡´è·³è½¬åˆ°å‰ä¸€å¸§æœ«å°¾è€Œéç›®æ ‡å¸§å¼€å¤´
- HTML5 video ä¸ä¿è¯é€å¸§ç²¾ç¡® seek
```

> **æ¥æº**: [MDN - currentTime](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/currentTime) | [W3C - Frame accurate seeking issue](https://github.com/w3c/media-and-entertainment/issues/4)

#### è§£å†³æ–¹æ¡ˆï¼šrequestVideoFrameCallback

```javascript
// ä½¿ç”¨ mediaTime è·å–ç²¾ç¡®çš„å¸§æ—¶é—´æˆ³
video.requestVideoFrameCallback((now, metadata) => {
  // metadata.mediaTime æ˜¯ç²¾ç¡®çš„ PTSï¼ˆæ¼”ç¤ºæ—¶é—´æˆ³ï¼‰
  // æ¯” video.currentTime æ›´å‡†ç¡®
  console.log('Precise time:', metadata.mediaTime);
});
```

> **æ¥æº**: [web.dev - requestVideoFrameCallback](https://web.dev/requestvideoframecallback-rvfc/)

#### VideoFrame åº“ï¼ˆå¸§å·æ”¯æŒï¼‰

å¦‚æœéœ€è¦å¸§å·å’Œ SMPTE æ—¶é—´ç æ”¯æŒï¼Œå¯ä½¿ç”¨ **VideoFrame** åº“ï¼š

```javascript
// æ ¹æ®å·²çŸ¥å¸§ç‡è®¡ç®—å¸§å·
const frameNumber = Math.floor(video.currentTime * fps);
```

> **æ¥æº**: [VideoFrame Docs](https://allensarkisyan.github.io/VideoFrameDocs/)

### 5.2 è§†é¢‘ç‰‡æ®µå¾ªç¯æ’­æ”¾

#### æ–¹æ³•1ï¼štimeupdate äº‹ä»¶ç›‘å¬

```javascript
const video = document.getElementById('video');
let loopStart = 5.0;  // t1
let loopEnd = 8.5;    // t2

video.addEventListener('timeupdate', function() {
  if (video.currentTime >= loopEnd) {
    video.currentTime = loopStart;
    video.play();
  }
});
```

#### æ–¹æ³•2ï¼šå®Œæ•´å®ç°ï¼ˆå¸¦UIæ§åˆ¶ï¼‰

```javascript
const video = document.getElementById('video');

function setupLoop(startTime, endTime) {
  video.addEventListener('timeupdate', function checkLoop() {
    if (video.currentTime < startTime || video.currentTime >= endTime) {
      video.currentTime = startTime;
    }
  });
}

// ä½¿ç”¨
setupLoop(t1, t2);
```

#### æ–¹æ³•3ï¼šMedia Fragment URI

```html
<!-- ç›´æ¥åœ¨ URL ä¸­æŒ‡å®šæ’­æ”¾èŒƒå›´ -->
<video src="video.mp4#t=5,10"></video>
```

```javascript
// åŠ¨æ€è®¾ç½®
video.src = 'video.mp4#t=' + startTime + ',' + endTime;
```

#### æ–¹æ³•4ï¼šVideo.js AB Loop æ’ä»¶

```javascript
// ä½¿ç”¨ videojs-abloop æ’ä»¶
videojs('video', {
  plugins: {
    abLoopPlugin: {
      start: 5,      // å¼€å§‹æ—¶é—´
      end: 8.5,      // ç»“æŸæ—¶é—´
      enabled: true
    }
  }
});
```

> **æ¥æº**: [GitHub - videojs-abloop](https://github.com/phhu/videojs-abloop) | [Stack Overflow](https://stackoverflow.com/questions/21251979/play-full-html5-video-and-then-loop-a-section-of-it)

#### æ³¨æ„äº‹é¡¹

```
âš ï¸ å¾ªç¯æ’­æ”¾çš„å·²çŸ¥é—®é¢˜ï¼š
- æŸäº›è§†é¢‘å¯èƒ½æ— æ³•ç¬æ—¶åˆ‡æ¢ currentTime
- å¾ªç¯ä¹‹é—´å¯èƒ½æœ‰å»¶è¿Ÿ
- ä½¿ç”¨ä¸¤ä¸ªè§†é¢‘å…ƒç´ äº¤æ›¿æ’­æ”¾å¯èƒ½æ›´å¯é 
- åŸç”Ÿ loop å±æ€§æ²¡æœ‰å»¶è¿Ÿé—®é¢˜
```

### 5.3 localStorage å­˜å‚¨æ–¹æ¡ˆ

#### æ¨èçš„æ•°æ®ç»“æ„

```javascript
// è§†é¢‘æ ‡æ³¨æ•°æ®ç»“æ„
const videoAnnotation = {
  // è§†é¢‘æ ‡è¯†
  videoId: "hash_or_filename",
  fileName: "forehand_practice.mp4",
  fileSize: 15728640,  // bytes
  duration: 12.5,      // seconds

  // æ ‡æ³¨æ—¶é—´ç‚¹
  annotations: {
    t1: 2.35,          // åˆ†è…¿å«æ­¥ç»“æŸï¼ˆå¯ä¸º nullï¼‰
    t2: 3.82,          // å‡»çƒç¬é—´
    hasPhase1: true    // æ˜¯å¦æœ‰å‡†å¤‡é˜¶æ®µ
  },

  // å…ƒæ•°æ®
  createdAt: "2024-12-14T10:30:00Z",
  updatedAt: "2024-12-14T10:35:00Z",
  version: 1
};

// å­˜å‚¨
localStorage.setItem(
  `tennis_annotation_${videoAnnotation.videoId}`,
  JSON.stringify(videoAnnotation)
);

// è¯»å–
const saved = JSON.parse(
  localStorage.getItem(`tennis_annotation_${videoId}`)
);
```

#### è§†é¢‘è¯†åˆ«çš„ Key ç”Ÿæˆ

```javascript
// ç®€å•æ–¹æ¡ˆï¼šæ–‡ä»¶å + æ–‡ä»¶å¤§å°
function generateVideoKey(file) {
  return `${file.name}_${file.size}`;
}

// æ›´å¯é æ–¹æ¡ˆï¼šåŒ…å«ä¿®æ”¹æ—¶é—´
function generateVideoKeyV2(file) {
  return `${file.name}_${file.size}_${file.lastModified}`;
}
```

#### å­˜å‚¨é™åˆ¶

```
localStorage é™åˆ¶ï¼š
- å¤§å¤šæ•°æµè§ˆå™¨å…è®¸ 5MB+ å­˜å‚¨ç©ºé—´
- Key å’Œ Value å¿…é¡»æ˜¯å­—ç¬¦ä¸²
- ä½¿ç”¨ JSON.stringify/parse å¤„ç†å¯¹è±¡
- æ•°æ®åœ¨é¡µé¢åˆ·æ–°å’Œæµè§ˆå™¨é‡å¯åä¿ç•™
```

> **æ¥æº**: [javascript.info - localStorage](https://javascript.info/localstorage)

---

## 6. è§†é¢‘æŒ‡çº¹ä¸è¯†åˆ«

### 6.1 æ„ŸçŸ¥å“ˆå¸Œï¼ˆPerceptual Hashingï¼‰æ¦‚è¿°

æ„ŸçŸ¥å“ˆå¸Œä¸åŠ å¯†å“ˆå¸Œä¸åŒï¼š
- **åŠ å¯†å“ˆå¸Œ**: è¾“å…¥å¾®å°å˜åŒ–å¯¼è‡´è¾“å‡ºå‰§çƒˆå˜åŒ–
- **æ„ŸçŸ¥å“ˆå¸Œ**: ç›¸ä¼¼å†…å®¹äº§ç”Ÿç›¸ä¼¼çš„å“ˆå¸Œå€¼
- èƒ½å¤Ÿå®¹å¿ï¼šæ—‹è½¬ã€å€¾æ–œã€å¯¹æ¯”åº¦è°ƒæ•´ã€ä¸åŒå‹ç¼©æ ¼å¼

> **æ¥æº**: [pHash.org](https://www.phash.org/) | [Wikipedia - Perceptual hashing](https://en.wikipedia.org/wiki/Perceptual_hashing)

### 6.2 è§†é¢‘æŒ‡çº¹æ–¹æ¡ˆï¼ˆNode.jsï¼‰

**node-video-hash** çš„å·¥ä½œåŸç†ï¼š
1. ä½¿ç”¨ FFmpeg åœ¨å›ºå®šé—´éš”æˆªå–å¸§
2. å¯¹æ¯å¸§è¿›è¡Œæ„ŸçŸ¥å“ˆå¸Œ
3. åˆå¹¶æ‰€æœ‰å¸§å“ˆå¸Œç”Ÿæˆæœ€ç»ˆå“ˆå¸Œï¼ˆé»˜è®¤ SHA256ï¼‰

```javascript
// éœ€è¦å®‰è£… FFmpeg
const videoHash = require('video-hash');

const hash = await videoHash('video.mp4');
// è¿”å›å”¯ä¸€çš„è§†é¢‘æŒ‡çº¹
```

> **æ¥æº**: [GitHub - node-video-hash](https://github.com/KyleRoss/node-video-hash)

### 6.3 æµè§ˆå™¨ç«¯ç®€åŒ–æ–¹æ¡ˆ

ç”±äºæµè§ˆå™¨ä¸èƒ½è¿è¡Œ FFmpegï¼Œå¯ä»¥ä½¿ç”¨ç®€åŒ–æ–¹æ¡ˆï¼š

```javascript
// æ–¹æ¡ˆ1ï¼šæ–‡ä»¶å…ƒæ•°æ®ç»„åˆ
function getVideoIdentifier(file) {
  return {
    name: file.name,
    size: file.size,
    lastModified: file.lastModified,
    type: file.type
  };
}

// æ–¹æ¡ˆ2ï¼šä½¿ç”¨ Canvas æå–é¦–å¸§è¿›è¡Œå“ˆå¸Œ
async function getFirstFrameHash(videoUrl) {
  const video = document.createElement('video');
  video.src = videoUrl;
  await video.play();
  video.pause();
  video.currentTime = 0.1; // è·³è¿‡å¯èƒ½çš„é»‘å±

  const canvas = document.createElement('canvas');
  canvas.width = 64;  // å°å°ºå¯¸è¶³å¤Ÿ
  canvas.height = 64;
  const ctx = canvas.getContext('2d');
  ctx.drawImage(video, 0, 0, 64, 64);

  // ç®€å•çš„åƒç´ å“ˆå¸Œ
  const imageData = ctx.getImageData(0, 0, 64, 64);
  // ... è®¡ç®—å“ˆå¸Œ
}
```

### 6.4 å“ˆå¸Œæ¯”è¾ƒï¼šæ±‰æ˜è·ç¦»

```javascript
// æ¯”è¾ƒä¸¤ä¸ªæ„ŸçŸ¥å“ˆå¸Œçš„ç›¸ä¼¼åº¦
function hammingDistance(hash1, hash2) {
  let distance = 0;
  for (let i = 0; i < hash1.length; i++) {
    if (hash1[i] !== hash2[i]) distance++;
  }
  return distance;
}

// è·ç¦»åˆ¤æ–­ï¼š
// 0-3: éå¸¸ç›¸ä¼¼ï¼ˆå¯èƒ½æ˜¯åŒä¸€è§†é¢‘ï¼‰
// 4-10: ç›¸ä¼¼
// >10: ä¸åŒè§†é¢‘
```

---

## 7. AI è¾…åŠ©æ–¹æ¡ˆï¼ˆæœªæ¥å‚è€ƒï¼‰

### 7.1 æµè§ˆå™¨ç«¯å§¿æ€ä¼°è®¡æ¨¡å‹

TensorFlow.js æä¾›ä¸‰ä¸ªä¸»è¦æ¨¡å‹ï¼š

| æ¨¡å‹ | å…³é”®ç‚¹æ•° | é€Ÿåº¦ | é€‚ç”¨åœºæ™¯ |
|------|----------|------|----------|
| **MoveNet Lightning** | 17 | 50+ FPS | å®æ—¶åº”ç”¨ï¼Œä½å»¶è¿Ÿ |
| **MoveNet Thunder** | 17 | è¾ƒæ…¢ | é«˜ç²¾åº¦éœ€æ±‚ |
| **BlazePose** | 33 | ä¸­ç­‰ | éœ€è¦æ‰‹éƒ¨/é¢éƒ¨ç»†èŠ‚ |

> **æ¥æº**: [TensorFlow Blog - MoveNet](https://blog.tensorflow.org/2021/05/next-generation-pose-detection-with-movenet-and-tensorflowjs.html)

### 7.2 åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

```javascript
import * as poseDetection from '@tensorflow-models/pose-detection';

// åˆ›å»ºæ£€æµ‹å™¨
const detector = await poseDetection.createDetector(
  poseDetection.SupportedModels.MoveNet,
  { modelType: poseDetection.movenet.modelType.SINGLEPOSE_LIGHTNING }
);

// æ£€æµ‹å§¿æ€
const poses = await detector.estimatePoses(videoElement);

// è¿”å›çš„å…³é”®ç‚¹
poses[0].keypoints.forEach(keypoint => {
  console.log(keypoint.name, keypoint.x, keypoint.y, keypoint.score);
});
```

### 7.3 å…³é”®å¸§æ£€æµ‹çš„ç ”ç©¶æ–¹å‘

å­¦æœ¯ç ”ç©¶çš„è‡ªåŠ¨é˜¶æ®µåˆ†å‰²æ–¹æ³•ï¼š

| æ–¹æ³• | è¾“å…¥ | ç‰¹ç‚¹ |
|------|------|------|
| **æ·±åº¦ç¥ç»ç½‘ç»œåºåˆ—åˆ†ç±»** | ä¼ æ„Ÿå™¨æ•°æ® | åœ¨çº¿æ£€æµ‹ï¼Œæ”¯æŒè¾¹ç•ŒçŠ¶æ€å®šä¹‰ |
| **å…³é”®å¸§æå– + CNN** | è§†é¢‘å¸§ | å…ˆ FCN æå– ROIï¼Œå† CNN ä¼°è®¡å§¿æ€æ¦‚ç‡ |
| **èšç±» + å¤šç‰¹å¾èåˆ** | è§†é¢‘ | åŸºäºåœºæ™¯èšç±»æå–å…³é”®å¸§ |

> **æ¥æº**: [MDPI - On-Line Detection and Segmentation of Sports Motions](https://www.mdpi.com/1424-8220/18/3/913)

### 7.4 å®ç°å»ºè®®

#### çŸ­æœŸæ–¹æ¡ˆï¼ˆæ—  AIï¼‰
```
ç”¨æˆ·æ‰‹åŠ¨æ ‡æ³¨ â†’ å­˜å‚¨åˆ° localStorage â†’ ç”¨äº MCQ è¯Šæ–­
```

#### ä¸­æœŸæ–¹æ¡ˆï¼ˆè½»é‡ AI è¾…åŠ©ï¼‰
```
1. ä½¿ç”¨ MoveNet æ£€æµ‹å…³é”®ç‚¹
2. ç›‘æµ‹è„šéƒ¨å…³é”®ç‚¹ä½ç½®å˜åŒ– â†’ æ£€æµ‹åˆ†è…¿å«æ­¥
3. ç›‘æµ‹æ‰‹è…•é€Ÿåº¦å³°å€¼ â†’ ä¼°è®¡å‡»çƒç‚¹
4. æä¾› AI å»ºè®®ï¼Œç”¨æˆ·ç¡®è®¤/è°ƒæ•´
```

#### é•¿æœŸæ–¹æ¡ˆï¼ˆå…¨è‡ªåŠ¨ï¼‰
```
1. è®­ç»ƒä¸“é—¨çš„ç½‘çƒåŠ¨ä½œåˆ†ç±»æ¨¡å‹
2. ä½¿ç”¨ Temporal Action Localization æŠ€æœ¯
3. è‡ªåŠ¨åˆ†å‰²å¹¶æ ‡æ³¨æ¯ä¸ªåŠ¨ä½œé˜¶æ®µ
```

### 7.5 JS AI Body Tracker åº“

ä¸€ä¸ªå°è£…å¥½çš„æµè§ˆå™¨ç«¯å§¿æ€ä¼°è®¡åº“ï¼š

```javascript
// æ”¯æŒ MoveNetã€PoseNetã€BlazePose
// æ— éœ€ Node.jsï¼Œç›´æ¥åœ¨æµè§ˆå™¨è¿è¡Œ
import { BodyTracker } from 'js-ai-body-tracker';

const tracker = new BodyTracker('movenet');
await tracker.load();

const pose = await tracker.detect(videoElement);
```

> **æ¥æº**: [GitHub - js-ai-body-tracker](https://github.com/szczyglis-dev/js-ai-body-tracker)

---

## 8. æ¨èæ–¹æ¡ˆä¸å®æ–½å»ºè®®

### 8.1 æ ‡æ³¨æµç¨‹ä¼˜åŒ–å»ºè®®

åŸºäºè°ƒç ”ç»“æœï¼Œå¯¹ä½ ç°æœ‰è®¾è®¡çš„ä¼˜åŒ–å»ºè®®ï¼š

#### å¼•å¯¼æ–‡æ¡ˆä¼˜åŒ–

| åŸæ–‡æ¡ˆ | å»ºè®®æ”¹ä¸º | åŸå›  |
|--------|----------|------|
| "åˆ†è…¿å«æ­¥" | "åŒè„šåŒæ—¶è½åœ°" | ç”¨ç‰©ç†äº‹ä»¶æ›¿ä»£æœ¯è¯­ âœ“ |
| "å‡»çƒç‚¹" | "çƒæ‹ç¢°åˆ°çƒçš„é‚£ä¸€åˆ»" | æ›´ç›´è§‚ âœ“ |
| "å‡†å¤‡é˜¶æ®µ" | "è½åœ°å‰" | ç”¨æˆ·æ›´å®¹æ˜“ç†è§£æ—¶é—´æ¦‚å¿µ |

#### è§†è§‰å¼•å¯¼å»ºè®®

```
æ¨èæ–¹å¼ï¼šç®€ç¬”ç”» + æ–‡å­—æè¿°
â”œâ”€â”€ ä¸è¦ä½¿ç”¨çœŸå®è§†é¢‘æˆªå›¾ï¼ˆé¿å…ç”¨æˆ·æ‰¾"ä¸€æ¨¡ä¸€æ ·"çš„ç”»é¢ï¼‰
â”œâ”€â”€ ä½¿ç”¨æŠ½è±¡çš„åŠ¨ä½œè½®å»“å›¾
â”œâ”€â”€ æ ‡æ³¨å…³é”®èº«ä½“éƒ¨ä½ï¼ˆè„šã€çƒæ‹ã€çƒï¼‰
â””â”€â”€ å¯å‚è€ƒ Kinovea çš„äººä½“æ¨¡å‹å·¥å…·è®¾è®¡
```

### 8.2 UI ç»„ä»¶æ¨è

#### è¿›åº¦æ¡æ ‡è®°è®¾è®¡

```javascript
// æ¨èçš„æ ‡è®° UI ç»“æ„
const MarkerUI = {
  // è¿›åº¦æ¡ä¸Šçš„æ ‡è®°ç‚¹
  markers: [
    { time: t1, color: '#4CAF50', icon: 'ğŸ‘Ÿ', label: 'è½åœ°' },
    { time: t2, color: '#2196F3', icon: 'ğŸ¾', label: 'å‡»çƒ' }
  ],

  // é¼ æ ‡æ‚¬åœé¢„è§ˆ
  hoverPreview: {
    showThumbnail: true,
    showTime: true,
    showLabel: true
  },

  // é”®ç›˜å¿«æ·é”®
  shortcuts: {
    'Space': 'toggle play/pause',
    'ArrowLeft': 'seek -1 frame',
    'ArrowRight': 'seek +1 frame',
    ',': 'seek -0.1s (fine)',
    '.': 'seek +0.1s (fine)',
    '1': 'mark t1',
    '2': 'mark t2'
  }
};
```

### 8.3 localStorage æ•°æ®ç»“æ„ï¼ˆæœ€ç»ˆç‰ˆï¼‰

```javascript
const VideoAnnotationSchema = {
  // ä¸»é”®ï¼šç”¨äºå¿«é€ŸæŸ¥æ‰¾
  key: "tennis_v1_{videoIdentifier}",

  // æ•°æ®ç»“æ„
  value: {
    // è§†é¢‘è¯†åˆ«ä¿¡æ¯
    video: {
      name: String,        // æ–‡ä»¶å
      size: Number,        // å­—èŠ‚æ•°
      duration: Number,    // æ—¶é•¿ï¼ˆç§’ï¼‰
      lastModified: Number // æ–‡ä»¶ä¿®æ”¹æ—¶é—´æˆ³
    },

    // æ ‡æ³¨æ•°æ®
    annotations: {
      t1: Number | null,   // åˆ†è…¿å«æ­¥æ—¶é—´ç‚¹
      t2: Number,          // å‡»çƒæ—¶é—´ç‚¹ï¼ˆå¿…å¡«ï¼‰
      hasPhase1: Boolean   // æ˜¯å¦æœ‰å‡†å¤‡é˜¶æ®µ
    },

    // è¯Šæ–­çŠ¶æ€
    diagnosis: {
      selectedStroke: Number,  // é€‰æ‹©åˆ†æç¬¬å‡ æ¬¡å‡»çƒ
      completedQuestions: [],  // å·²å®Œæˆçš„é—®é¢˜ID
      answers: {}              // ç­”æ¡ˆè®°å½•
    },

    // å…ƒæ•°æ®
    meta: {
      version: 1,
      createdAt: String,   // ISO æ—¶é—´
      updatedAt: String,
      appVersion: String
    }
  }
};
```

### 8.4 æŠ€æœ¯å®ç°æ¸…å•

#### å¿…é¡»å®ç°
- [ ] HTML5 video æ’­æ”¾å™¨è‡ªå®šä¹‰æ§ä»¶
- [ ] è¿›åº¦æ¡ç‚¹å‡»/æ‹–æ‹½å®šä½
- [ ] æ ‡è®°ç‚¹çš„æ·»åŠ /ç¼–è¾‘/åˆ é™¤
- [ ] æ ‡è®°ç‚¹çš„è§†è§‰åé¦ˆï¼ˆè¿›åº¦æ¡ä¸Šçš„ç‚¹ï¼‰
- [ ] localStorage å­˜å‚¨ä¸è¯»å–
- [ ] åŒæ–‡ä»¶è‡ªåŠ¨åŠ è½½å†å²æ ‡æ³¨

#### å»ºè®®å®ç°
- [ ] é”®ç›˜å¿«æ·é”®ï¼ˆé€å¸§ã€å¿«è¿›ã€æ ‡è®°ï¼‰
- [ ] ç‰‡æ®µå¾ªç¯æ’­æ”¾ï¼ˆt1-t2ï¼‰
- [ ] æ’­æ”¾é€Ÿåº¦æ§åˆ¶ï¼ˆ0.25x - 2xï¼‰
- [ ] æ ‡è®°æ—¶çš„å¸§é¢„è§ˆ/ç¼©ç•¥å›¾

#### æœªæ¥è€ƒè™‘
- [ ] MoveNet å§¿æ€æ£€æµ‹è¾…åŠ©
- [ ] è‡ªåŠ¨æ£€æµ‹è„šè½åœ°/çƒæ‹æ¥è§¦
- [ ] è§†é¢‘æŒ‡çº¹å»é‡

### 8.5 æ€§èƒ½ä¼˜åŒ–å»ºè®®

```javascript
// timeupdate äº‹ä»¶èŠ‚æµ
let lastUpdateTime = 0;
video.addEventListener('timeupdate', function() {
  const now = Date.now();
  if (now - lastUpdateTime < 50) return; // 50ms èŠ‚æµ
  lastUpdateTime = now;

  // æ›´æ–° UI
  updateProgressBar(video.currentTime);
  checkLoopBoundary(video.currentTime);
});

// ä½¿ç”¨ requestAnimationFrame æ›´æ–° UI
function smoothProgressUpdate() {
  updateProgressBar(video.currentTime);
  if (!video.paused) {
    requestAnimationFrame(smoothProgressUpdate);
  }
}
video.addEventListener('play', smoothProgressUpdate);
```

---

## å‚è€ƒèµ„æºæ±‡æ€»

### å­¦æœ¯èµ„æº
- [PMC - Biomechanical Analysis of Tennis Forehand](https://pmc.ncbi.nlm.nih.gov/articles/PMC9225835/)
- [PMC - Biomechanics and Tennis](https://pmc.ncbi.nlm.nih.gov/articles/PMC2577481/)
- [MDPI - On-Line Detection and Segmentation of Sports Motions](https://www.mdpi.com/1424-8220/18/3/913)

### è½¯ä»¶å·¥å…·
- [Kinovea - å…è´¹å¼€æº](https://www.kinovea.org/)
- [SwingVision - ç½‘çƒAIåˆ†æ](https://swing.vision/)
- [OnForm - è¿åŠ¨è§†é¢‘åˆ†æ](https://onform.com/)
- [Dartfish - ä¸“ä¸šåˆ†æ](https://www.dartfish.com/)

### å¼€å‘èµ„æº
- [Video.js](https://github.com/videojs/video.js)
- [videojs-abloop](https://github.com/phhu/videojs-abloop)
- [videojs-annotation-comments](https://github.com/contently/videojs-annotation-comments)
- [TensorFlow.js Pose Detection](https://github.com/tensorflow/tfjs-models/tree/master/pose-detection)
- [js-ai-body-tracker](https://github.com/szczyglis-dev/js-ai-body-tracker)

### æŠ€æœ¯æ–‡æ¡£
- [MDN - HTMLMediaElement.currentTime](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/currentTime)
- [web.dev - requestVideoFrameCallback](https://web.dev/requestvideoframecallback-rvfc/)
- [NN/g - Video UX Guidelines](https://www.nngroup.com/articles/instructional-video-guidelines/)

---

> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0
> **æœ€åæ›´æ–°**: 2024-12-14
