# Claude Code é•¿æ—¶é—´ä»»åŠ¡æ‰§è¡ŒæŒ‡å—ï¼šè®© AI Agent æŒç»­å·¥ä½œæ•°å°æ—¶

> **Source**: Anthropic Engineering Blog + ç¤¾åŒºå®è·µ (2025-12)
> **Authors**: Anthropic Engineering Team, ç¤¾åŒºå¼€å‘è€…
> **Core Theme**: å¦‚ä½•è®© Claude Code æ‰§è¡Œ 2 å°æ—¶ä»¥ä¸Šçš„è‡ªä¸»ä¿¡æ¯æ”¶é›†ä¸æ•´ç†ä»»åŠ¡
> **Document Type**: KNOW æŠ€æœ¯æ‘˜è¦

---

## One Paragraph Takeaway (ä¸€æ®µè¯ç²¾å)

**åç›´è§‰æ´è§**: Claude Code æ‰§è¡Œ 2 å°æ—¶ä»¥ä¸Šä»»åŠ¡çš„å…³é”®ä¸æ˜¯"è®©å®ƒä¸€ç›´è·‘"ï¼Œè€Œæ˜¯**æ„å»ºè·¨ä¼šè¯çš„è®°å¿†æ¡¥æ¢**ã€‚

Anthropic å®˜æ–¹çš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡ `initializer agent` + `coding agent` çš„ä¸¤é˜¶æ®µæ¶æ„ï¼Œç”¨ `claude-progress.txt` å’Œç»“æ„åŒ– JSON ä»»åŠ¡åˆ—è¡¨ä½œä¸ºè·¨ context window çš„"äº¤æ¥æ–‡æ¡£"ï¼Œè®©æ¯ä¸ªæ–°ä¼šè¯èƒ½å¿«é€Ÿæ¢å¤ä¸Šä¸‹æ–‡å¹¶ç»§ç»­å·¥ä½œã€‚å¯¹äºä¿¡æ¯æ”¶é›†åœºæ™¯ï¼Œæ¨èä½¿ç”¨ Headless Mode + MCP + è„šæœ¬ç¼–æ’çš„ç»„åˆæ–¹æ¡ˆã€‚

**æ ¸å¿ƒå…¬å¼**:
> é•¿ä»»åŠ¡æˆåŠŸ = å¤šæ¬¡çŸ­ä¼šè¯ Ã— ç»“æ„åŒ–è¿›åº¦æ–‡ä»¶ Ã— è‡ªåŠ¨æ¢å¤æœºåˆ¶

---

## The Essence (æ ¸å¿ƒç²¾å)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CLAUDE CODE é•¿æ—¶é—´ä»»åŠ¡æ‰§è¡Œ - ä¸‰å¤§æ–¹æ¡ˆæ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   æ–¹æ¡ˆ 1: Headless Mode           æ–¹æ¡ˆ 2: GitHub Actions        æ–¹æ¡ˆ 3:     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         ä¸¤é˜¶æ®µ Agent   â”‚
â”‚   â”‚  claude -p      â”‚            â”‚  @claude è§¦å‘   â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚  --allowedTools â”‚            â”‚  è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡   â”‚        â”‚ Initializer  â”‚â”‚
â”‚   â”‚  --output json  â”‚            â”‚  PR/Issue é©±åŠ¨  â”‚        â”‚     â†“        â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ Coding Agent â”‚â”‚
â”‚   é€‚åˆ: è„šæœ¬è‡ªåŠ¨åŒ–               é€‚åˆ: å¼‚æ­¥ä»»åŠ¡è§¦å‘         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚   æ—¶é•¿: å•æ¬¡ä»»åŠ¡                 æ—¶é•¿: äº‹ä»¶é©±åŠ¨             é€‚åˆ: è·¨å¤©ä»»åŠ¡  â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚   + MCP æ‰©å±• (ä¿¡æ¯æ”¶é›†èƒ½åŠ›å¢å¼º)                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚  Firecrawl   â”‚  â”‚  Playwright  â”‚  â”‚  Perplexity  â”‚                      â”‚
â”‚   â”‚  ç½‘é¡µçˆ¬å–    â”‚  â”‚  æµè§ˆå™¨è‡ªåŠ¨åŒ–â”‚  â”‚  å®æ—¶æœç´¢    â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                             â”‚
â”‚   ğŸ’¡ æ ¸å¿ƒæ´è§: é•¿ä»»åŠ¡ = å¤šæ¬¡çŸ­ä¼šè¯ + ç»“æ„åŒ–è¿›åº¦æ–‡ä»¶ + è‡ªåŠ¨æ¢å¤æœºåˆ¶          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç›®å½•

- [1. æ ¸å¿ƒé—®é¢˜ä¸æŒ‘æˆ˜](#1-æ ¸å¿ƒé—®é¢˜ä¸æŒ‘æˆ˜)
- [2. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©](#2-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©)
- [3. æ–¹æ¡ˆä¸€ï¼šHeadless Mode + è„šæœ¬ç¼–æ’](#3-æ–¹æ¡ˆä¸€headless-mode--è„šæœ¬ç¼–æ’)
- [4. æ–¹æ¡ˆäºŒï¼šGitHub Actions å¼‚æ­¥è§¦å‘](#4-æ–¹æ¡ˆäºŒgithub-actions-å¼‚æ­¥è§¦å‘)
- [5. æ–¹æ¡ˆä¸‰ï¼šä¸¤é˜¶æ®µ Agent æ¶æ„](#5-æ–¹æ¡ˆä¸‰ä¸¤é˜¶æ®µ-agent-æ¶æ„)
- [6. MCP æ‰©å±•é…ç½®](#6-mcp-æ‰©å±•é…ç½®)
- [7. å®‰å…¨é…ç½®](#7-å®‰å…¨é…ç½®)
- [8. Transferable Rules](#8-transferable-rules)
- [9. Key Takeaways](#9-key-takeaways)
- [10. Glossary](#10-glossary)
- [11. Sources](#11-sources)

---

## 1. æ ¸å¿ƒé—®é¢˜ä¸æŒ‘æˆ˜

### ä¸ºä»€ä¹ˆ AI Agent éš¾ä»¥æ‰§è¡Œé•¿æ—¶é—´ä»»åŠ¡ï¼Ÿ

> "As AI agents become more capable, developers are increasingly asking them to take on complex tasks requiring work that spans hours, or even days. However, getting agents to make consistent progress across multiple context windows remains an open problem."
> â€” Anthropic Engineering

**æ ¸å¿ƒæŒ‘æˆ˜**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Context Window é™åˆ¶                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Session 1          Session 2          Session 3              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ Context â”‚       â”‚ Context â”‚       â”‚ Context â”‚              â”‚
â”‚   â”‚ Window  â”‚       â”‚ Window  â”‚       â”‚ Window  â”‚              â”‚
â”‚   â”‚  â–ˆâ–ˆâ–ˆâ–ˆ   â”‚       â”‚  â–ˆâ–ˆâ–ˆâ–ˆ   â”‚       â”‚  â–ˆâ–ˆâ–ˆâ–ˆ   â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â”‚
â”‚        â”‚                 â”‚                 â”‚                   â”‚
â”‚        â–¼                 â–¼                 â–¼                   â”‚
â”‚   âŒ è®°å¿†ä¸¢å¤±        âŒ è®°å¿†ä¸¢å¤±        âŒ è®°å¿†ä¸¢å¤±            â”‚
â”‚                                                                 â”‚
â”‚   é—®é¢˜: æ¯ä¸ªæ–°ä¼šè¯å¼€å§‹æ—¶ï¼ŒAgent ä¸çŸ¥é“ä¹‹å‰åšäº†ä»€ä¹ˆ              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Agent é¢ä¸´çš„å…·ä½“å›°å¢ƒ**:

| å›°å¢ƒ | è¡¨ç° | å½±å“ |
|------|------|------|
| **è®°å¿†æ–­å±‚** | æ–°ä¼šè¯æ— æ³•è·çŸ¥å‰åºå·¥ä½œ | é‡å¤åŠ³åŠ¨ã€é—æ¼ä»»åŠ¡ |
| **ä¸Šä¸‹æ–‡è€—å°½** | å¤æ‚ä»»åŠ¡ä¸­é€” context ç”¨å®Œ | ä»»åŠ¡åŠé€”è€ŒåºŸ |
| **çŠ¶æ€ä¸¢å¤±** | ç¯å¢ƒå˜é‡ã€ä¸´æ—¶æ–‡ä»¶æ¶ˆå¤± | éœ€è¦é‡æ–°é…ç½® |
| **è¿›åº¦ä¸å¯è§** | ä¸çŸ¥é“å®Œæˆäº†å¤šå°‘ã€è¿˜å‰©å¤šå°‘ | æ— æ³•è¯„ä¼°å’Œç»­æ¥ |

---

## 2. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©

### å››å¤§æ–¹æ¡ˆå¯¹æ¯”è¡¨

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | æ—¶é•¿é™åˆ¶ | é…ç½®éš¾åº¦ | ä¿¡æ¯æ”¶é›†åŒ¹é…åº¦ |
|------|----------|----------|----------|----------------|
| **Headless Mode + è„šæœ¬** | æ‰¹é‡ä¿¡æ¯æ”¶é›†ã€å®šæ—¶ä»»åŠ¡ | æ— é™åˆ¶ï¼ˆè„šæœ¬æ§åˆ¶ï¼‰ | â­â­ ä¸­ | âœ… é«˜ |
| **GitHub Actions** | Issue é©±åŠ¨çš„ç ”ç©¶ä»»åŠ¡ | 6 å°æ—¶/job | â­ ä½ | âœ… é«˜ |
| **ä¸¤é˜¶æ®µ Agent** | è·¨å¤©çš„å¤æ‚é¡¹ç›® | æ— é™åˆ¶ | â­â­â­ é«˜ | â­ ä¸­ |
| **MCP + è‡ªåŠ¨åŒ–å¾ªç¯** | å®æ—¶ä¿¡æ¯ç›‘æ§ | æ— é™åˆ¶ | â­â­ ä¸­ | âœ… é«˜ |

### é€‰æ‹©å†³ç­–æ ‘

```
ä½ çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ
â”œâ”€â”€ æ‰¹é‡æ”¶é›†å¤šä¸ªä¸»é¢˜çš„ä¿¡æ¯
â”‚   â””â”€â”€ âœ… æ–¹æ¡ˆä¸€: Headless Mode + è„šæœ¬
â”‚
â”œâ”€â”€ æƒ³ä»æ‰‹æœº/ä»»æ„è®¾å¤‡è§¦å‘ç ”ç©¶ä»»åŠ¡
â”‚   â””â”€â”€ âœ… æ–¹æ¡ˆäºŒ: GitHub Actions
â”‚
â”œâ”€â”€ éœ€è¦è·¨å¤šå¤©å®Œæˆçš„å¤§å‹ç ”ç©¶é¡¹ç›®
â”‚   â””â”€â”€ âœ… æ–¹æ¡ˆä¸‰: ä¸¤é˜¶æ®µ Agent
â”‚
â””â”€â”€ éœ€è¦å®æ—¶ç›‘æ§ç‰¹å®šä¸»é¢˜çš„æ–°ä¿¡æ¯
    â””â”€â”€ âœ… MCP + å®šæ—¶ä»»åŠ¡ (Cron)
```

---

## 3. æ–¹æ¡ˆä¸€ï¼šHeadless Mode + è„šæœ¬ç¼–æ’

**æœ€é€‚åˆåœºæ™¯**: æ‰¹é‡ä¿¡æ¯æ”¶é›†ã€KNOW æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

### 3.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ä¿¡æ¯æ”¶é›†è‡ªåŠ¨åŒ–ç³»ç»Ÿ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   è¾“å…¥: research-topics.json (è¦æ”¶é›†çš„ä¸»é¢˜åˆ—è¡¨)                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  {                                                                  â”‚   â”‚
â”‚   â”‚    "topics": [                                                      â”‚   â”‚
â”‚   â”‚      {"name": "gemini-2.5-flash", "query": "...", "type": "æ‘˜è¦"},  â”‚   â”‚
â”‚   â”‚      {"name": "chatgpt-o3", "query": "...", "type": "æ‘˜è¦"},        â”‚   â”‚
â”‚   â”‚      {"name": "mmpose", "query": "...", "type": "æ‘˜è¦"}             â”‚   â”‚
â”‚   â”‚    ]                                                                â”‚   â”‚
â”‚   â”‚  }                                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      ç¼–æ’è„šæœ¬ (research-runner.sh)                  â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   for topic in topics:                                              â”‚   â”‚
â”‚   â”‚     claude -p "ç ”ç©¶ $topic" \                                       â”‚   â”‚
â”‚   â”‚       --allowedTools "WebSearch,WebFetch,Read,Write" \              â”‚   â”‚
â”‚   â”‚       --output-format json >> results/$topic.json                   â”‚   â”‚
â”‚   â”‚     sleep 30  # é¿å… rate limit                                     â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â–¼                                                                    â”‚
â”‚   è¾“å‡º: KNOW æ ¼å¼çš„ Markdown æ–‡æ¡£                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Headless Mode æ ¸å¿ƒå‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-p, --print` | éäº¤äº’å¼è¿è¡Œ | `claude -p "ä»»åŠ¡æè¿°"` |
| `--allowedTools` | è‡ªåŠ¨æˆæƒçš„å·¥å…· | `"WebSearch,WebFetch,Read,Write"` |
| `--output-format` | è¾“å‡ºæ ¼å¼ | `text` / `json` / `stream-json` |
| `--continue` | ç»§ç»­æœ€è¿‘ä¼šè¯ | `claude -p "ç»§ç»­" --continue` |
| `--resume <ID>` | æ¢å¤æŒ‡å®šä¼šè¯ | `claude -p "ç»§ç»­" --resume abc123` |
| `--append-system-prompt` | è¿½åŠ ç³»ç»Ÿæç¤º | ä¿ç•™é»˜è®¤è¡Œä¸º + è‡ªå®šä¹‰æŒ‡ä»¤ |

### 3.3 å®ç°æ­¥éª¤

#### Step 1: åˆ›å»ºä»»åŠ¡é…ç½®æ–‡ä»¶

```json
// research-topics.json
{
  "topics": [
    {
      "name": "gemini-2.5-flash",
      "query": "Gemini 2.5 Flash æ–°åŠŸèƒ½ benchmark API 2025",
      "output": "gemini-2.5-flash-summary.md",
      "type": "åšå®¢æ‘˜è¦"
    },
    {
      "name": "chatgpt-o3",
      "query": "ChatGPT o3 reasoning model capabilities 2025",
      "output": "chatgpt-o3-summary.md",
      "type": "åšå®¢æ‘˜è¦"
    },
    {
      "name": "mmpose",
      "query": "MMPose pose estimation tutorial deployment 2025",
      "output": "mmpose-summary.md",
      "type": "åšå®¢æ‘˜è¦"
    }
  ]
}
```

#### Step 2: åˆ›å»ºç ”ç©¶ Prompt æ¨¡æ¿

```markdown
<!-- research-prompt-template.md -->
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯ç ”ç©¶å‘˜ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ç ”ç©¶ä¸»é¢˜: {{TOPIC}}

## ä»»åŠ¡
1. ä½¿ç”¨ WebSearch æœç´¢: "{{QUERY}}"
2. ä»æœç´¢ç»“æœä¸­é€‰æ‹© 3-5 ä¸ªæœ€ç›¸å…³çš„æ¥æº
3. ä½¿ç”¨ WebFetch è·å–æ¯ä¸ªæ¥æºçš„è¯¦ç»†å†…å®¹
4. æŒ‰ç…§ KNOW æ–‡æ¡£æ ¼å¼è¾“å‡ºç ”ç©¶æŠ¥å‘Š

## è¾“å‡ºæ ¼å¼è¦æ±‚
- å¿…é¡»åŒ…å« One Paragraph Takeaway
- å¿…é¡»åŒ…å« The Essence ASCII å›¾
- å¿…é¡»åŒ…å« Key Takeaways (æŒ‰è§’è‰²åˆ†ç±»)
- å¿…é¡»åŒ…å« Sources å¼•ç”¨

## æ–‡æ¡£ç±»å‹: {{TYPE}}

è¯·å¼€å§‹ç ”ç©¶ã€‚
```

#### Step 3: åˆ›å»ºè‡ªåŠ¨åŒ–è„šæœ¬

```bash
#!/bin/bash
# research-runner.sh

TOPICS_FILE="research-topics.json"
OUTPUT_DIR="knowledge"

mkdir -p "$OUTPUT_DIR"

# è¯»å–å¹¶éå† topics
cat "$TOPICS_FILE" | jq -c '.topics[]' | while read -r topic; do
    name=$(echo "$topic" | jq -r '.name')
    query=$(echo "$topic" | jq -r '.query')
    output=$(echo "$topic" | jq -r '.output')

    echo "=== å¼€å§‹ç ”ç©¶: $name ==="

    claude -p "ç ”ç©¶ä¸»é¢˜: $name, æœç´¢å…³é”®è¯: $query" \
        --allowedTools "WebSearch,WebFetch,Read,Write,Glob,Grep" \
        --output-format json \
        > "$OUTPUT_DIR/$name-result.json"

    # æå–ç»“æœ
    cat "$OUTPUT_DIR/$name-result.json" | jq -r '.result' > "$OUTPUT_DIR/$output"

    echo "=== å®Œæˆ: $name â†’ $OUTPUT_DIR/$output ==="
    sleep 30  # Rate limit ä¿æŠ¤
done

echo "æ‰€æœ‰ç ”ç©¶ä»»åŠ¡å®Œæˆ!"
```

#### Step 4: è¿è¡Œ

```bash
chmod +x research-runner.sh
./research-runner.sh
```

### 3.4 ä¼šè¯ç®¡ç†æŠ€å·§

```bash
# è·å–ä¼šè¯ ID ä»¥ä¾¿åç»­æ¢å¤
session_id=$(claude -p "å¼€å§‹ç ”ç©¶ä»»åŠ¡" --output-format json | jq -r '.session_id')
echo "Session: $session_id"

# æ¢å¤ç‰¹å®šä¼šè¯ç»§ç»­å·¥ä½œ
claude -p "ç»§ç»­ä¸Šæ¬¡çš„ç ”ç©¶" --resume "$session_id"

# æˆ–ä½¿ç”¨ --continue æ¢å¤æœ€è¿‘ä¼šè¯
claude -p "ç»§ç»­" --continue
```

---

## 4. æ–¹æ¡ˆäºŒï¼šGitHub Actions å¼‚æ­¥è§¦å‘

**æœ€é€‚åˆåœºæ™¯**: ä»ä»»æ„è®¾å¤‡è§¦å‘ç ”ç©¶ä»»åŠ¡ï¼Œç»“æœè‡ªåŠ¨æäº¤åˆ°ä»“åº“

### 4.1 å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Issue é©±åŠ¨ç ”ç©¶                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   1. åˆ›å»º Issue:                                                â”‚
â”‚      Title: [Research] Gemini 2.5 Flash                         â”‚
â”‚      Body: è¯·ç ”ç©¶ Gemini 2.5 Flash çš„æ–°åŠŸèƒ½...                   â”‚
â”‚      Labels: research                                           â”‚
â”‚                                                                 â”‚
â”‚   2. GitHub Action è‡ªåŠ¨è§¦å‘:                                     â”‚
â”‚      - æ£€æµ‹åˆ° research label                                    â”‚
â”‚      - å¯åŠ¨ Claude Code Action                                  â”‚
â”‚      - æ‰§è¡Œç ”ç©¶ä»»åŠ¡                                              â”‚
â”‚                                                                 â”‚
â”‚   3. è‡ªåŠ¨è¾“å‡º:                                                   â”‚
â”‚      - åœ¨ Issue ä¸‹æ·»åŠ ç ”ç©¶ç»“æœ comment                           â”‚
â”‚      - æˆ–åˆ›å»º PR æäº¤ KNOW æ–‡æ¡£                                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 GitHub Action é…ç½®

```yaml
# .github/workflows/research.yml
name: Research Agent

on:
  issues:
    types: [labeled]

jobs:
  research:
    if: github.event.label.name == 'research'
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Run Claude Code Research
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          prompt: |
            è¯·ç ”ç©¶ Issue æ ‡é¢˜ä¸­çš„ä¸»é¢˜: ${{ github.event.issue.title }}

            è¦æ±‚:
            ${{ github.event.issue.body }}

            æŒ‰ç…§ KNOW æ–‡æ¡£æ ¼å¼è¾“å‡ºï¼Œä¿å­˜åˆ° knowledge/ ç›®å½•ã€‚

          allowed_tools: "WebSearch,WebFetch,Read,Write,Glob,Grep"

      - name: Commit Results
        run: |
          git config user.name "Claude Research Bot"
          git config user.email "bot@example.com"
          git add knowledge/
          git commit -m "ğŸ“š ç ”ç©¶æŠ¥å‘Š: ${{ github.event.issue.title }}"
          git push
```

### 4.3 å¿«é€Ÿè®¾ç½®

```bash
# åœ¨ Claude Code ä¸­è¿è¡Œ
/install-github-app
```

è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨å¼•å¯¼ä½ å®Œæˆ GitHub App å’Œ Secrets çš„é…ç½®ã€‚

---

## 5. æ–¹æ¡ˆä¸‰ï¼šä¸¤é˜¶æ®µ Agent æ¶æ„

**æœ€é€‚åˆåœºæ™¯**: è·¨å¤šå¤©çš„å¤§å‹ç ”ç©¶é¡¹ç›®ï¼Œéœ€è¦æŒç»­è¿­ä»£

### 5.1 Anthropic å®˜æ–¹æ¶æ„

> "The core challenge is that agents must work in discrete sessions, and each new session begins with no memory of what came before."

**è§£å†³æ–¹æ¡ˆ**: ä¸¤é˜¶æ®µ Agent + ç»“æ„åŒ– Artifacts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ä¸¤é˜¶æ®µ Agent è·¨ä¼šè¯å·¥ä½œæœºåˆ¶                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Session 1: Initializer Agent (ä»…é¦–æ¬¡è¿è¡Œ)                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  1. åˆ›å»º init.sh (ç¯å¢ƒå¯åŠ¨è„šæœ¬)                         â”‚   â”‚
â”‚   â”‚  2. åˆ›å»º claude-progress.txt (è¿›åº¦æ—¥å¿—)                 â”‚   â”‚
â”‚   â”‚  3. ç”Ÿæˆ features.json (ç»“æ„åŒ–ä»»åŠ¡åˆ—è¡¨)                  â”‚   â”‚
â”‚   â”‚  4. åˆå§‹ git commit                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚                                                        â”‚
â”‚        â–¼ (ä¼šè¯ç»“æŸï¼Œartifacts ä¿ç•™åœ¨æ–‡ä»¶ç³»ç»Ÿ)                    â”‚
â”‚                                                                 â”‚
â”‚   Session 2-N: Coding Agent (åç»­æ¯æ¬¡è¿è¡Œ)                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  1. pwd â†’ ç¡®è®¤å·¥ä½œç›®å½•                                  â”‚   â”‚
â”‚   â”‚  2. è¯»å– git log + progress.txt â†’ æ¢å¤ä¸Šä¸‹æ–‡            â”‚   â”‚
â”‚   â”‚  3. ä» features.json é€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„æœªå®Œæˆä»»åŠ¡          â”‚   â”‚
â”‚   â”‚  4. æ‰§è¡Œä»»åŠ¡ â†’ commit â†’ æ›´æ–° progress.txt               â”‚   â”‚
â”‚   â”‚  5. å¾ªç¯ç›´åˆ° context window ç”¨å°½                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å…³é”® Artifacts è®¾è®¡

#### progress.txt (è¿›åº¦æ—¥å¿—)

```markdown
# ç ”ç©¶è¿›åº¦æ—¥å¿—

## å·²å®Œæˆ
- [2025-12-20 10:00] Gemini 2.5 Flash â†’ gemini-2.5-flash-summary.md
- [2025-12-20 11:30] ChatGPT o3 â†’ chatgpt-o3-summary.md

## è¿›è¡Œä¸­
- MMPose (æœç´¢å®Œæˆï¼Œå¾…æ•´ç†)

## å¾…ç ”ç©¶
- Claude Code Sub-Agents
- MCP æœ€ä½³å®è·µ
- LLM é¢„è®­ç»ƒ vs åè®­ç»ƒ

## ä¸‹æ¬¡ä¼šè¯æ³¨æ„äº‹é¡¹
- MMPose èµ„æ–™å·²ä¿å­˜åœ¨ temp/mmpose-raw.md
- éœ€è¦è¡¥å…… MMPose çš„éƒ¨ç½²æ•™ç¨‹éƒ¨åˆ†
```

#### features.json (ä»»åŠ¡åˆ—è¡¨)

```json
{
  "features": [
    {
      "id": "gemini-flash",
      "category": "model-research",
      "description": "ç ”ç©¶ Gemini 2.5 Flash",
      "steps": ["æœç´¢", "æŠ“å–", "æ•´ç†", "è¾“å‡ºKNOW"],
      "passes": true
    },
    {
      "id": "mmpose",
      "category": "tool-research",
      "description": "ç ”ç©¶ MMPose å§¿æ€ä¼°è®¡",
      "steps": ["æœç´¢", "æŠ“å–", "æ•´ç†", "è¾“å‡ºKNOW"],
      "passes": false
    }
  ]
}
```

### 5.3 ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡æœ‰æ•ˆ

| è®¾è®¡å†³ç­– | è§£å†³çš„é—®é¢˜ |
|----------|-----------|
| **ç»“æ„åŒ–ä»»åŠ¡åˆ—è¡¨ (JSON)** | é˜²æ­¢ Agent æå‰æ ‡è®°ä»»åŠ¡å®Œæˆæˆ–ä¿®æ”¹éœ€æ±‚ |
| **è¿›åº¦æ—¥å¿— (txt)** | å¿«é€Ÿæ¢å¤ä¸Šä¸‹æ–‡ï¼Œä¸éœ€è¦è¯»å–å…¨éƒ¨å†å² |
| **æ¯æ¬¡åªåšä¸€ä¸ªä»»åŠ¡** | é¿å… context ä¸­é€”è€—å°½å¯¼è‡´ä»»åŠ¡åŠé€”è€ŒåºŸ |
| **Git commit ä½œä¸ºæ£€æŸ¥ç‚¹** | ç•™ä¸‹æ¸…æ™°çš„ç‰ˆæœ¬å†å²ï¼Œå¯ä»¥å›æ»š |

---

## 6. MCP æ‰©å±•é…ç½®

MCP (Model Context Protocol) å¯ä»¥æ˜¾è‘—å¢å¼º Claude Code çš„ä¿¡æ¯æ”¶é›†èƒ½åŠ›ã€‚

### 6.1 æ¨è MCP æœåŠ¡å™¨

| MCP æœåŠ¡å™¨ | åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ |
|-----------|------|----------|
| **Firecrawl** | ç½‘é¡µçˆ¬å–ï¼Œè½¬ Markdown | æŠ“å–æŠ€æœ¯æ–‡æ¡£ã€åšå®¢ |
| **Playwright** | æµè§ˆå™¨è‡ªåŠ¨åŒ– | éœ€è¦ JS æ¸²æŸ“çš„é¡µé¢ |
| **Perplexity** | å®æ—¶æœç´¢ | æœ€æ–°ä¿¡æ¯æŸ¥è¯¢ |
| **Bright Data** | ä¼ä¸šçº§çˆ¬å– | å¤§è§„æ¨¡æ•°æ®æ”¶é›† |

### 6.2 é…ç½®å‘½ä»¤

```bash
# Firecrawl (æ¨èï¼Œç½‘é¡µçˆ¬å–)
claude mcp add firecrawl -e FIRECRAWL_API_KEY=your-key -- npx -y firecrawl-mcp

# Playwright (æµè§ˆå™¨è‡ªåŠ¨åŒ–)
claude mcp add playwright -- npx -y @anthropic/mcp-playwright

# éªŒè¯é…ç½®
claude mcp list
```

### 6.3 ä½¿ç”¨ç¤ºä¾‹

é…ç½®å®Œæˆåï¼Œå¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€è°ƒç”¨ï¼š

```
"æœç´¢æœ€æ–°çš„ Next.js 15 ç‰¹æ€§"
"çˆ¬å– firecrawl.dev å¹¶å‘Šè¯‰æˆ‘å®ƒæ˜¯åšä»€ä¹ˆçš„"
"è·å– Stripe API æ–‡æ¡£ä¸­å…³äº payment intents çš„éƒ¨åˆ†"
```

---

## 7. å®‰å…¨é…ç½®

### 7.1 `--dangerously-skip-permissions` ä½¿ç”¨æŒ‡å—

> âš ï¸ **è­¦å‘Š**: æ­¤æ¨¡å¼ç»•è¿‡æ‰€æœ‰æƒé™æ£€æŸ¥ï¼Œå­˜åœ¨æ•°æ®ä¸¢å¤±å’Œç³»ç»ŸæŸåé£é™©ã€‚

**ä½•æ—¶ä½¿ç”¨**:
- æ‰¹é‡ lint ä¿®å¤
- æ¨¡æ¿ä»£ç ç”Ÿæˆ
- éš”ç¦»å®¹å™¨å†…çš„è‡ªåŠ¨åŒ–ä»»åŠ¡

**ç»ä¸åº”è¯¥ä½¿ç”¨çš„åœºæ™¯**:
- ç”Ÿäº§ç¯å¢ƒ
- åŒ…å«æ•æ„Ÿæ•°æ®çš„ç›®å½•
- æ— éš”ç¦»çš„æœ¬åœ°ç¯å¢ƒ

### 7.2 å®‰å…¨è¿è¡Œæ–¹å¼

#### æ–¹å¼ä¸€ï¼šAllowedTools ç™½åå•

```bash
# åªå…è®¸å®‰å…¨çš„åªè¯»æ“ä½œ
claude -p "ç ”ç©¶ä»»åŠ¡" \
  --allowedTools "WebSearch,WebFetch,Read,Glob,Grep" \
  --dangerously-skip-permissions
```

#### æ–¹å¼äºŒï¼šDocker å®¹å™¨éš”ç¦»

```dockerfile
FROM node:20-slim

RUN npm install -g @anthropic-ai/claude-code

WORKDIR /research
COPY research-topics.json .
COPY research-runner.sh .

# å¯é€‰ï¼šç¦ç”¨ç½‘ç»œ (ä»…æœ¬åœ°æ–‡ä»¶æ•´ç†)
# docker run --network=none ...

CMD ["./research-runner.sh"]
```

è¿è¡Œï¼š

```bash
docker build -t claude-research .
docker run --rm \
  -v $(pwd)/output:/research/knowledge \
  -e ANTHROPIC_API_KEY=$ANTHROPIC_API_KEY \
  claude-research
```

### 7.3 Auto-Accept vs YOLO Mode å¯¹æ¯”

| ç‰¹æ€§ | Auto-Accept (Shift+Tab) | YOLO Mode (--dangerously-skip-permissions) |
|------|------------------------|-------------------------------------------|
| äº¤äº’æ€§ | ä¿ç•™ï¼Œå¯éšæ—¶å¹²é¢„ | å®Œå…¨æ— äººå€¼å®ˆ |
| æƒé™æç¤º | è‡ªåŠ¨åŒæ„ä½†æ˜¾ç¤º | å®Œå…¨è·³è¿‡ |
| é€‚ç”¨åœºæ™¯ | æ—¥å¸¸å¼€å‘ | CI/CDã€è„šæœ¬è‡ªåŠ¨åŒ– |
| é£é™©ç­‰çº§ | ä¸­ | é«˜ |

---

## 8. Transferable Rules

### Rule 1: ç”¨æ–‡ä»¶ç³»ç»Ÿä½œä¸ºè·¨ä¼šè¯è®°å¿†

**The Pattern**:
```
âŒ é”™è¯¯: ä¾èµ– Agent å†…éƒ¨è®°å¿†
âœ… æ­£ç¡®: æ¯ä¸ªä¼šè¯å¼€å§‹è¯»å– progress.txtï¼Œç»“æŸæ—¶æ›´æ–°
```

**Why it works**: Context window ä¼šæ¸…ç©ºï¼Œä½†æ–‡ä»¶ç³»ç»Ÿä¼šä¿ç•™ã€‚ç»“æ„åŒ–çš„è¿›åº¦æ–‡ä»¶è®©æ–°ä¼šè¯èƒ½åœ¨ 30 ç§’å†…æ¢å¤ä¸Šä¸‹æ–‡ã€‚

**How to apply**: åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `claude-progress.txt`ï¼Œè®© Agent åœ¨æ¯æ¬¡ä¼šè¯å¼€å§‹æ—¶è¯»å–ã€ç»“æŸæ—¶æ›´æ–°ã€‚

---

### Rule 2: ä¸€æ¬¡åªåšä¸€ä»¶äº‹

**The Pattern**:
```
âŒ é”™è¯¯: ä¸€ä¸ªä¼šè¯å°è¯•å®Œæˆæ‰€æœ‰ä»»åŠ¡
âœ… æ­£ç¡®: æ¯ä¸ªä¼šè¯ä¸“æ³¨å®Œæˆä¸€ä¸ªç‹¬ç«‹ä»»åŠ¡ï¼Œç„¶å commit
```

**Why it works**: å¤æ‚ä»»åŠ¡å®¹æ˜“è€—å°½ context windowã€‚å¢é‡å¼å·¥ä½œç¡®ä¿æ¯æ¬¡ä¼šè¯éƒ½æœ‰å¯äº¤ä»˜æˆæœã€‚

**How to apply**: åœ¨ä»»åŠ¡åˆ—è¡¨ä¸­æ ‡è®°ä¼˜å…ˆçº§ï¼Œæ¯ä¸ªä¼šè¯åªé€‰å–ä¼˜å…ˆçº§æœ€é«˜çš„ä¸€ä¸ªæœªå®Œæˆä»»åŠ¡ã€‚

---

### Rule 3: ç”¨ JSON ç»“æ„åŒ–ä»»åŠ¡åˆ—è¡¨

**The Pattern**:
```json
{
  "id": "task-1",
  "description": "å…·ä½“ä»»åŠ¡æè¿°",
  "steps": ["æ­¥éª¤1", "æ­¥éª¤2"],
  "passes": false
}
```

**Why it works**: è‡ªç”±æ–‡æœ¬å®¹æ˜“è¢« Agent è¯¯è§£æˆ–ä¿®æ”¹ã€‚JSON ç»“æ„å¼ºåˆ¶æ‰§è¡Œå›ºå®šæ ¼å¼ï¼Œé˜²æ­¢ä»»åŠ¡è¢«æå‰æ ‡è®°å®Œæˆã€‚

**How to apply**: ç”¨ `features.json` ç®¡ç†æ‰€æœ‰å¾…åŠä»»åŠ¡ï¼ŒAgent åªèƒ½ä¿®æ”¹ `passes` å­—æ®µã€‚

---

### Rule 4: è„šæœ¬ç¼–æ’ä¼˜äºå•æ¬¡é•¿ä¼šè¯

**The Pattern**:
```
âŒ é”™è¯¯: claude -p "å®Œæˆè¿™10ä¸ªç ”ç©¶ä»»åŠ¡"
âœ… æ­£ç¡®: for topic in topics; do claude -p "ç ”ç©¶ $topic"; done
```

**Why it works**: è„šæœ¬æ§åˆ¶å¯ä»¥æ·»åŠ é”™è¯¯å¤„ç†ã€rate limit ä¿æŠ¤ã€è¿›åº¦æŒä¹…åŒ–ã€‚å•æ¬¡é•¿ä¼šè¯ä¸€æ—¦å¤±è´¥å…¨éƒ¨ä¸¢å¤±ã€‚

**How to apply**: ç”¨ Bash/Python è„šæœ¬ç¼–æ’å¤šä¸ª Claude Code è°ƒç”¨ï¼Œæ¯ä¸ªè°ƒç”¨å®Œæˆä¸€ä¸ªç‹¬ç«‹ä»»åŠ¡ã€‚

---

### Rule 5: éš”ç¦»æ‰§è¡Œé«˜é£é™©è‡ªåŠ¨åŒ–

**The Pattern**:
```
âŒ é”™è¯¯: åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä½¿ç”¨ --dangerously-skip-permissions
âœ… æ­£ç¡®: åœ¨ Docker å®¹å™¨æˆ– VM ä¸­è¿è¡Œï¼Œé™åˆ¶æ–‡ä»¶è®¿é—®èŒƒå›´
```

**Why it works**: 32% ä½¿ç”¨è¯¥ flag çš„å¼€å‘è€…é‡åˆ°è¿‡æ„å¤–æ–‡ä»¶ä¿®æ”¹ï¼Œ9% å‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚éš”ç¦»ç¯å¢ƒé™åˆ¶äº†å½±å“èŒƒå›´ã€‚

**How to apply**: åˆ›å»ºä¸“ç”¨çš„ Docker å®¹å™¨ï¼ŒåªæŒ‚è½½å¿…è¦çš„è¾“å‡ºç›®å½•ã€‚

---

## 9. Key Takeaways

### For ä¸ªäººç ”ç©¶è€…

1. **ç«‹å³å¯ç”¨**: ä½¿ç”¨ Headless Mode + è„šæœ¬å¾ªç¯ï¼Œä»Šå¤©å°±èƒ½æ‰¹é‡æ”¶é›†ä¿¡æ¯
2. **é…ç½® MCP**: æ·»åŠ  Firecrawl è·å¾—æ›´å¼ºçš„ç½‘é¡µçˆ¬å–èƒ½åŠ›
3. **éµå¾ª KNOW æ ¼å¼**: åœ¨ prompt ä¸­æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼Œä¿æŒæ–‡æ¡£ä¸€è‡´æ€§
4. **ç®¡ç†è¿›åº¦**: ç”¨ `progress.txt` è·Ÿè¸ªå·²å®Œæˆå’Œå¾…å®Œæˆçš„ç ”ç©¶ä¸»é¢˜

### For å›¢é˜Ÿåä½œ

1. **GitHub Actions**: ç”¨ Issue label è§¦å‘ç ”ç©¶ï¼Œç»“æœè‡ªåŠ¨æäº¤åˆ°ä»“åº“
2. **CLAUDE.md**: åœ¨ä»“åº“æ ¹ç›®å½•é…ç½®é¡¹ç›®è§„èŒƒï¼ŒCI/CD ä¸­ä¹Ÿä¼šç”Ÿæ•ˆ
3. **æ ‡å‡†åŒ–æ¨¡æ¿**: å›¢é˜Ÿå…±äº« research-prompt-template.md

### For é«˜çº§è‡ªåŠ¨åŒ–

1. **Docker éš”ç¦»**: å®Œå…¨è‡ªåŠ¨åŒ–æ—¶å¿…é¡»ä½¿ç”¨å®¹å™¨éš”ç¦»
2. **ä¸¤é˜¶æ®µæ¶æ„**: è·¨å¤©é¡¹ç›®ä½¿ç”¨ initializer + coding agent æ¨¡å¼
3. **ç»“æ„åŒ– Artifacts**: ç”¨ JSON ä»»åŠ¡åˆ—è¡¨ + è¿›åº¦æ—¥å¿—å®ç°è·¨ä¼šè¯è®°å¿†

---

## 10. Glossary

| æœ¯è¯­ | ä¸­æ–‡ | å®šä¹‰ |
|------|------|------|
| **Headless Mode** | æ— å¤´æ¨¡å¼ | Claude Code çš„éäº¤äº’å¼è¿è¡Œæ¨¡å¼ï¼Œé€šè¿‡ `-p` å‚æ•°å¯ç”¨ |
| **Context Window** | ä¸Šä¸‹æ–‡çª—å£ | æ¨¡å‹å•æ¬¡ä¼šè¯èƒ½å¤„ç†çš„ token ä¸Šé™ |
| **MCP** | Model Context Protocol | Anthropic å¼€å‘çš„æ¨¡å‹ä¸å¤–éƒ¨ç³»ç»Ÿé€šä¿¡åè®® |
| **Subagent** | å­ä»£ç† | ä¸» Agent å§”æ‰˜æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„ä¸“é—¨åŒ– Agent |
| **Artifacts** | å·¥ä»¶ | è·¨ä¼šè¯ä¿ç•™çš„æ–‡ä»¶ï¼Œå¦‚ progress.txtã€features.json |
| **YOLO Mode** | å®Œå…¨è‡ªåŠ¨æ¨¡å¼ | `--dangerously-skip-permissions` å¯ç”¨çš„æ— äººå€¼å®ˆæ¨¡å¼ |
| **Rate Limit** | é€Ÿç‡é™åˆ¶ | API è°ƒç”¨é¢‘ç‡é™åˆ¶ï¼Œéœ€è¦åœ¨è„šæœ¬ä¸­æ·»åŠ  sleep |

---

## 11. Sources

### å®˜æ–¹æ–‡æ¡£
- [Effective Harnesses for Long-Running Agents - Anthropic Engineering](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents)
- [Claude Code Headless Mode Documentation](https://code.claude.com/docs/en/headless)
- [Enabling Claude Code to Work More Autonomously - Anthropic](https://www.anthropic.com/news/enabling-claude-code-to-work-more-autonomously)
- [Claude Code Best Practices - Anthropic Engineering](https://www.anthropic.com/engineering/claude-code-best-practices)

### MCP é…ç½®
- [Firecrawl MCP Setup for Claude Code](https://docs.firecrawl.dev/developer-guides/mcp-setup-guides/claude-code)
- [Best MCP Servers for Claude Code - MCPcat](https://mcpcat.io/guides/best-mcp-servers-for-claude-code/)

### GitHub Actions
- [Claude Code GitHub Actions Documentation](https://docs.claude.com/en/docs/claude-code/github-actions)
- [anthropics/claude-code-action - GitHub](https://github.com/anthropics/claude-code-action)

### ç¤¾åŒºå®è·µ
- [How I Turned Claude Code Into My Personal AI Agent Operating System - AI Maker](https://aimaker.substack.com/p/how-i-turned-claude-code-into-personal-ai-agent-operating-system-for-writing-research-complete-guide)
- [Claude --dangerously-skip-permissions Guide - PromptLayer](https://blog.promptlayer.com/claude-dangerously-skip-permissions/)
- [Claude Code Background Tasks - APIDog](https://apidog.com/blog/claude-code-background-tasks/)
- [Multi-Agent System for Claude Code - wshobson/agents](https://github.com/wshobson/agents)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-20
**æœ€åæ›´æ–°**: 2025-12-20
