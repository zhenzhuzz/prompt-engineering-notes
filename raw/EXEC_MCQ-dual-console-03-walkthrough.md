# Yoach MCQ 双端控制台 - 演示 Walkthrough

**版本**: v1.4 | **日期**: 2025-12-25 | **一句话**: 人工智慧+专家判断的混合诊断系统

---

## 核心价值

| 痛点 | 解决方案 | 价值 |
|------|----------|------|
| 纯 AI 识别不精准 | 真人专家实时判断 | 诊断准确率↑ |
| 教练审片延迟长 | 1-2 分钟完整闭环 | 用户留存↑ |
| 一次列出所有问题 | 「单一主矛盾」策略 | 用户聚焦改进 |
| 不同教练标准不一 | 46 Atoms + 22 Boosts 标准库 | 一致性↑ |

**核心发现**:
✅ 诊断响应 < 2 分钟
✅ 单管理员吞吐量 20+/小时
✅ 零后端依赖，一台电脑即可运行
⚠️ localStorage 限制 5-10MB
⚠️ 同源限制 (同浏览器)

**关键数字**:
- **5** 个维度 (准备姿势、转体引拍、击球点、动力链、随挥)
- **46** 个 Atoms (可诊断错误点)
- **22** 个 Boosts (针对性练习)
- **5** 道 MCQ 题 (每次诊断)
- **1** 个 Boost 推荐 (单一主矛盾策略)

---

## 完整业务流程

**Phase 1 动作诊断**:
- 📹 User 上传视频 → 裁剪 5 秒
- 🔔 Admin 收到叮咚 + 语音通知
- 👁️ Admin 看视频 → 每维度选 1 个 Atom
- ✅ Admin 发送 5 道 MCQ 题
- 📝 User 答题 (有/没有) → 提交

**Phase 2 生成报告**:
- 🔔 Admin 收到用户答案
- 🎯 Admin 选 1 个 Boost + 写 Summary
- 📊 User 收到 Mini Report → 跟练 Boost

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│  MCQ 双端控制台 - 完整业务闭环                                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                          Phase 1: 动作诊断                               │   │
│  │                                                                          │   │
│  │   User 端 (iOS)                        Admin 端 (桌面)                   │   │
│  │   ─────────────                        ─────────────                     │   │
│  │   ┌─────────────┐                      ┌─────────────┐                   │   │
│  │   │ 1. 上传视频  │ ──── 视频+时长 ────► │ 2. 收到请求  │                   │   │
│  │   │ 2. 裁剪5秒   │    MCQ_REQUEST       │    🔔叮咚    │                   │   │
│  │   │ 3. 等待...   │                      └──────┬──────┘                   │   │
│  │   └─────────────┘                             │                          │   │
│  │                                               ▼                          │   │
│  │                                        ┌─────────────┐                   │   │
│  │                                        │ 3. 看视频    │                   │   │
│  │                                        │ 4. 选5个MCQ  │                   │   │
│  │                                        │ 5. 发送题目  │                   │   │
│  │   ┌─────────────┐                      └──────┬──────┘                   │   │
│  │   │ 4. 收到题目  │ ◄── 5道MCQ题目 ─────────────┘                          │   │
│  │   │ 5. 答题(5题) │    MCQ_SELECTED                                        │   │
│  │   │ 6. 提交答案  │                                                        │   │
│  │   └─────────────┘                                                        │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                          │                                      │
│                                          ▼                                      │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                          Phase 2: 生成报告                               │   │
│  │                                                                          │   │
│  │   User 端 (iOS)                        Admin 端 (桌面)                   │   │
│  │   ─────────────                        ─────────────                     │   │
│  │   ┌─────────────┐                      ┌─────────────┐                   │   │
│  │   │ 7. 等待...   │                      │ 7. 收到回复  │ ◄─ REPORT_REQUEST │   │
│  │   └─────────────┘                      │    🔔叮咚    │   (视频+5个答案)  │   │
│  │         │                              └──────┬──────┘                   │   │
│  │         │                                     ▼                          │   │
│  │         │                              ┌─────────────┐                   │   │
│  │         │                              │ 8. 看用户答案│                   │   │
│  │         │                              │ 9. 选1个Boost│                   │   │
│  │         │                              │10. 写Summary │                   │   │
│  │         │                              │11. 发送报告  │                   │   │
│  │   ┌─────────────┐                      └──────┬──────┘                   │   │
│  │   │ 8. 收到报告  │ ◄── Mini Report ───────────┘                          │   │
│  │   │ 9. 查看诊断  │    REPORT_GENERATED                                    │   │
│  │   │10. 练习Boost │                                                        │   │
│  │   └─────────────┘                                                        │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

## 演示布局

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│  演示桌面 (推荐双显示器或分屏)                                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│   ┌──────────────────────┐   ┌──────────────────────────────────────────────┐  │
│   │                      │   │                                              │  │
│   │     User 端          │   │              Admin 端                        │  │
│   │   (iPhone 宽度)       │   │           (桌面全宽)                         │  │
│   │                      │   │                                              │  │
│   │   约 400px 宽         │   │           约 1200px 宽                       │  │
│   │                      │   │                                              │  │
│   │  localhost:3000/user │   │       localhost:3000/server                  │  │
│   │                      │   │                                              │  │
│   └──────────────────────┘   └──────────────────────────────────────────────┘  │
│                                                                                 │
│   ← 观众视角：同时看到用户操作 + 管理员响应                                      │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

## Step 1: User 上传视频

**触发**: 用户打开 App
**发送消息**: MCQ_REQUEST (视频 + 时长)
**音效**: 🔊 Step (点击下一步时)

```
┌─────────────────────────────────┐
│  ✕                    [🎥]•[•]  │
│                      (步骤2/4)  │
├─────────────────────────────────┤
│  Upload your video              │
│  ┌─────────────────────────┐    │
│  │                     [🔄]│    │
│  │   [视频预览画面]         │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │[▶]│[帧1][帧2][帧3][帧4]  │    │
│  │   │ ┌────────────┐      │    │ ← 拖动选择5秒
│  │   │ │ [黄色选择框]│      │    │
│  │   │ └────────────┘      │    │
│  └─────────────────────────┘    │
│  Select 5 seconds to analyze    │
│                          [→]    │ ← 🔊 Step 音效
└─────────────────────────────────┘
```

**操作**: 输入名字 → 选视频 → 拖动选5秒 → 下一步 → 进入等待页

---

## Step 2: Admin 选题 (收到 MCQ_REQUEST)

**触发**: 收到 MCQ_REQUEST
**收到通知**: 🔔 叮咚 + 语音 "您有新的订单"
**发送消息**: MCQ_SELECTED (5 道题目)
**状态变化**: 卡片 🔵 MCQ → ✅ 绿边框
**音效**: 🔊 Complete (发送后)

```
┌────────────────────────────────────────────────────────────────────────────┐
│  Admin Console v1.5                                    🔊  🟢 Connected    │
├────────────────────────────────────────────────────────────────────────────┤
│ ┌──────────────────────┐ ┌──────────────────────────────────────────────┐ │
│ │ 📋 Request Queue     │ │ 🎬 VIDEO                      ▶ 0:03 / 0:05 │ │
│ │ ───────────────────  │ │ ┌──────────────────────────────────────────┐ │ │
│ │ ┌──────────────────┐ │ │ │         (用户视频播放中)                  │ │ │
│ │ │ 🔵 MCQ     14:32 │ │ │ └──────────────────────────────────────────┘ │ │
│ │ │ ──────────────── │ │ ├──────────────────────────────────────────────┤ │
│ │ │ 📹 收到视频(5.2s)│ │ │ 📋 MCQ Configuration         [Send MCQ ▶]  │ │
│ │ └──────────────────┘ │ │ ──────────────────────────────────────────  │ │
│ │    ↑ 🔔叮咚+语音      │ │  准备姿势   转体引拍   击球点   动力链   随挥  │ │
│ │   "您有新的订单"      │ │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐    │ │
│ │ ─────────────────────│ │  │☑AT01│  │☑AT10│  │☑AT20│  │☑AT30│    │ │
│ │ [+ Mock MCQ]         │ │  └──────┘  └──────┘  └──────┘  └──────┘    │ │
│ │ [+ Mock Report]      │ │  (每维度选1个Atom，共5个)                    │ │
│ └──────────────────────┘ └──────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────────────────────┘
```

**操作**: 看视频 → 每维度勾选1个Atom → Send MCQ Batch

---

## Step 3: User 答题 (收到 MCQ_SELECTED)

**触发**: 收到 MCQ_SELECTED (5 道题目)
**发送消息**: REPORT_REQUEST (视频 + 5 个答案)
**音效**: 🔊 Click (每次选择)
**交互**: 自动跳转下一题

```
┌─────────────────────────────────┐
│  ✕        Action Diagnosis      │
├─────────────────────────────────┤
│  ┌─────────────────────────┐    │
│  │   [用户视频 - 循环播放]   │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │               [✓] [✕]   │    │ ← 切换正确/错误示范
│  │  [参考视频 - 错误示范]    │    │
│  │  ▬▬▬▬●▬▬▬▬  00:02       │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ ┌─────────────────────┐ │    │
│  │ │ 击球空间-被挤着打    │ │    │ ← 绿色标签
│  │ └─────────────────────┘ │    │
│  │ 我有没有击球被挤住?      │    │
│  │ ┌────────┐ ┌────────┐  │    │
│  │ │ ✓ 有   │ │ ✕ 没有 │  │    │ ← 🔊 Click
│  │ └────────┘ └────────┘  │    │
│  └─────────────────────────┘    │
└─────────────────────────────────┘
```

**操作**: 看对比视频 → 点「有/没有」 → 自动下一题 → 5题完成 → 进入等待页

---

## Step 4: Admin 生成报告 (收到 REPORT_REQUEST)

**触发**: 收到 REPORT_REQUEST (视频 + 5 个答案)
**收到通知**: 🔔 叮咚 + 语音 "您有新的订单"
**发送消息**: REPORT_GENERATED (5 个诊断 + Boost + Summary)
**状态变化**: 卡片 🟠 Boost → ✅ 绿边框
**音效**: 🔊 Complete (发送后)
**策略**: 💡 单一主矛盾 - 只选 1 个 Boost

```
┌────────────────────────────────────────────────────────────────────────────┐
│  Admin Console v1.5                                    🔊  🟢 Connected    │
├────────────────────────────────────────────────────────────────────────────┤
│ ┌──────────────────────┐ ┌──────────────────────────────────────────────┐ │
│ │ 📋 Request Queue     │ │ 🎬 VIDEO                      ▶ 0:03 / 0:05 │ │
│ │ ───────────────────  │ │ ┌──────────────────────────────────────────┐ │ │
│ │ ┌──────────────────┐ │ │ │         (用户视频播放中)                  │ │ │
│ │ │ 🟠 Boost   14:38 │ │ │ └──────────────────────────────────────────┘ │ │
│ │ │ ──────────────── │ │ ├──────────────────────────────────────────────┤ │
│ │ │ 📹 收到视频(5.2s)│ │ │ 🎯 Boost Recommendation     [Send Report ▶] │ │
│ │ │ 📝 收到回复 ▼     │ │ │ ──────────────────────────────────────────  │ │
│ │ │   ├─ AT45 ☑     │ │ │  User Response: ☑被挤着打 ☐靠手腕翻 ☑重心.. │ │
│ │ │   ├─ AT46 ☐     │ │ │                                              │ │
│ │ │   ├─ AT21 ☑     │ │ │  ┌────────┐ ┌────────┐ ┌────────┐           │ │
│ │ │   ├─ AT29 ☑     │ │ │  │☑BOOST01│ │☐BOOST02│ │☐BOOST03│           │ │
│ │ │   └─ AT23 ☐     │ │ │  │肘肋空间 │ │髋部同步 │ │重心前移 │           │ │
│ │ └──────────────────┘ │ │  └────────┘ └────────┘ └────────┘           │ │
│ │    ↑ 🔔叮咚+语音      │ │  (只选1个最关键的Boost - 单一主矛盾策略)      │ │
│ │ ┌──────────────────┐ │ │                                              │ │
│ │ │ 🔵 MCQ ✅  14:32 │ │ │  ┌──────────────────────────────────────┐   │ │
│ │ │ (已完成,绿边框)   │ │ │  │ ✍️ Summary: 需要关注击球空间问题...    │   │ │
│ │ └──────────────────┘ │ │  └──────────────────────────────────────┘   │ │
│ └──────────────────────┘ └──────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────────────────────┘
```

**操作**: 看用户答案 → 选1个Boost → 写Summary → Send Mini Report

---

## Step 5: User 查看报告 (收到 REPORT_GENERATED)

**触发**: 收到 REPORT_GENERATED
**音效**: 🔊 Success (收到报告时)
**内容**: 5 个诊断结果 + Summary + 1 个 Boost 卡片
**交互**: 点击 Boost 卡片 → 弹出练习视频

```
┌─────────────────────────────────┐        ┌─────────────────────────────────┐
│           Mini Report           │        │  Boost Video Bottom Sheet       │
├─────────────────────────────────┤        ├─────────────────────────────────┤
│  ┌─────────────────────────┐    │        │ ╭───────────────────────────╮   │
│  │   [用户视频预览缩略图]    │    │        │ │ ✕        肘肋空间感训练    │   │
│  └─────────────────────────┘    │        │ ├───────────────────────────┤   │
│  ┌─────────────────────────┐    │        │ │                           │   │
│  │ Check tips          [v] │    │ 点击→  │ │   [Boost 练习视频播放中]   │   │
│  │ ✓ 4        ✕ 1          │    │  [→]   │ │                           │   │
│  │ ───────────────────────│    │        │ ├───────────────────────────┤   │
│  │ ✓ 被挤着打              │    │        │ │  [⟲]     00:28     [⏸]   │   │
│  │ ✓ 靠手腕翻              │    │        │ │ (重置)  (倒计时)  (暂停)   │   │
│  │ ✓ 重心不往前            │    │        │ ╰───────────────────────────╯   │
│  │ ✓ 左手先收              │    │        └─────────────────────────────────┘
│  │ ✕ 只拉手引拍            │    │
│  └─────────────────────────┘    │        🔊 Success 音效
│  ┌─────────────────────────┐    │
│  │ Summary                 │    │
│  │ 需要关注击球空间问题，    │    │
│  │ 建议通过肘肋空间训练改善。│    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ ┌─────┐ 肘肋空间感训练   │    │
│  │ │[视频]│ 改掉霸王龙手臂  │    │
│  │ │ ▶   │                [→]│   │
│  │ └─────┘                 │    │
│  │ [入门]  [手臂与躯干]      │    │
│  └─────────────────────────┘    │
│       [ Done ]                  │ ← 完成，回到上传页
└─────────────────────────────────┘
```

**操作**: 查看诊断结果 → 阅读 Summary → 点击 Boost 卡片 → 跟练 → Done

---

## 关键演示点

🔔 **音效触发点** (观众易感知):
- Admin 收到请求 → 叮咚 + 语音 "您有新的订单"
- Admin 完成操作 → Complete 音效
- User 收到报告 → Success 音效

🎯 **演示亮点**:
- 视频实时传输 → 同一秒 Admin 端看到
- MCQ 5 题快速答完 → 用户无负担
- Boost 练习卡片 → 点击即可跟练

---

## 演示时间

| 阶段 | 时长 | 累计 |
|------|------|------|
| 上传视频 | 60s | 1:00 |
| Admin 选题 | 90s | 2:30 |
| User 答题 | 60s | 3:30 |
| Admin 报告 | 90s | 5:00 |
| 查看报告 | 60s | 6:00 |

**完整演示 6 分钟 | 精简版 3 分钟**

---

## FAQ

| 问题 | 解答 |
|------|------|
| 没声音？ | 首次需点击任意按钮激活音频 |
| Admin没收到？ | 检查同浏览器 + 同源 (localhost:3000) |
| 视频不播放？ | 确认 MP4 格式，文件在 user/public/videos/ |
| 无真实视频？ | 用 [+ Mock MCQ] / [+ Mock Report] 模拟 |
| 重新演示？ | 刷新两个页面即可 |

---

# 技术附录

## 系统架构

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│  MCQ 双端控制台 - 技术架构                                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│                              ┌──────────────────┐                               │
│                              │   Vite Dev Server │                               │
│                              │   localhost:3000  │                               │
│                              └────────┬─────────┘                               │
│                                       │                                         │
│                    ┌──────────────────┼──────────────────┐                      │
│                    ▼                  ▼                  ▼                      │
│            ┌──────────────┐   ┌──────────────┐   ┌──────────────┐               │
│            │ /user/       │   │ /server/     │   │ /videos/*    │               │
│            │ User 端入口   │   │ Admin 端入口  │   │ 静态资源     │               │
│            └──────┬───────┘   └──────┬───────┘   └──────────────┘               │
│                   │                  │                                          │
│  ┌────────────────┴──────────────────┴────────────────────────────────────┐     │
│  │                         Browser (同一浏览器)                            │     │
│  │                                                                         │     │
│  │   ┌─────────────────────────┐     ┌─────────────────────────┐          │     │
│  │   │      User 标签页         │     │      Admin 标签页        │          │     │
│  │   │   (localhost:3000/user)  │     │  (localhost:3000/server) │          │     │
│  │   │                         │     │                          │          │     │
│  │   │  ┌───────────────────┐  │     │  ┌───────────────────┐   │          │     │
│  │   │  │   React App       │  │     │  │   React App        │   │          │     │
│  │   │  │   - 视频上传/裁剪  │  │     │  │   - Request Queue  │   │          │     │
│  │   │  │   - MCQ 问答       │  │     │  │   - MCQ/Boost 选择 │   │          │     │
│  │   │  │   - Mini Report   │  │     │  │   - Summary 输入   │   │          │     │
│  │   │  └─────────┬─────────┘  │     │  └─────────┬──────────┘   │          │     │
│  │   │            │            │     │            │              │          │     │
│  │   │  ┌───────────────────┐  │     │  ┌───────────────────┐   │          │     │
│  │   │  │ sendMessage()     │──┼─────┼──│ listenForMessages()│   │          │     │
│  │   │  │ listenForMessages │◄─┼─────┼──│ sendMessage()      │   │          │     │
│  │   │  └───────────────────┘  │     │  └───────────────────┘   │          │     │
│  │   └─────────────────────────┘     └──────────────────────────┘          │     │
│  │                                                                         │     │
│  │   ┌─────────────────────────────────────────────────────────────────┐   │     │
│  │   │                      localStorage 消息总线                       │   │     │
│  │   │   ┌─────────────────────┐   ┌─────────────────────┐              │   │     │
│  │   │   │ mcq_user_to_server  │   │ mcq_server_to_user  │              │   │     │
│  │   │   │ (U → S 消息队列)     │   │ (S → U 消息队列)     │              │   │     │
│  │   │   └─────────────────────┘   └─────────────────────┘              │   │     │
│  │   └─────────────────────────────────────────────────────────────────┘   │     │
│  └─────────────────────────────────────────────────────────────────────────┘     │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

**技术选型**: Vite + React 18 + TypeScript + localStorage (零后端依赖)

**通信机制**:
- localStorage 跨标签页通信 → 无需后端服务器
- storage 事件自动触发 → 延迟 < 100ms
- 通信层已抽象 → 后续可迁移至 WebSocket

---

## 4 种消息协议

| 消息类型 | 方向 | 触发 | Payload |
|----------|------|------|---------|
| MCQ_REQUEST | U→A | 用户进入等待页 | videoDataUrl, videoDuration |
| MCQ_SELECTED | A→U | 管理员选完题 | questions[5] (atom_id, videos) |
| REPORT_REQUEST | U→A | 用户答完题 | videoDataUrl, responses[5] |
| REPORT_GENERATED | A→U | 管理员发报告 | atoms[5], summary, boost |

---

## 数据资产

- **Dimensions**: 5 个维度 (准备姿势、转体引拍、击球点、动力链、随挥恢复)
- **Atoms**: 46 个可诊断错误点
- **Boosts**: 22 个针对性练习视频
- **参考视频**: 8 个正确/错误示范

---

**文档维护**: Yoach 产品团队 | **最后更新**: 2025-12-25
