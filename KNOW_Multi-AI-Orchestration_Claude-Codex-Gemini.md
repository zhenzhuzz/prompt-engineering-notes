# Multi-AI Orchestration Report: Claude + Codex + Gemini Skill Integration

> **Source**: 小红书帖子「我把 Codex/Gemini 都注册成了 Claude Skill」by 果 ALL IN AI
> **Analysis Date**: 2025-12-25
> **Context**: 将 OpenAI Codex CLI 和 Google Gemini CLI 集成为 Claude Code 的 Skill，实现三 AI 协同工作流

---

## TL;DR (Too Long; Didn't Read)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Claude 作为主控 + Codex/Gemini 作为专家顾问 = 三倍思维深度            │
│                                                                         │
│  实现方式: 一句话创建 Skill                                             │
│  > "帮我把 codex 命令添加为 skill，使用方法参考 codex --help"           │
│                                                                         │
│  核心收益: 规划/Review 三路并行 → Claude 汇总最优方案                   │
└─────────────────────────────────────────────────────────────────────────┘
```

**30 秒要点**:
- **做什么**: 用 Claude Code Skill 包装 Codex/Gemini CLI，让 Claude 按需调用
- **为什么**: 利用各 AI 的优势（Codex 深度思考、Gemini 前端、Claude 工程能力）
- **怎么做**: 直接对话 Claude，让它自动按官方文档最佳实践创建 Skill
- **成本**: 高模式下 Codex 20 美元快速消耗，需开 200 美元订阅

---

## Executive Summary

### The Essence

```
                        ┌─────────────────────────────────────┐
                        │         USER REQUEST                │
                        │    "分析 Go 代码性能优化点"          │
                        └──────────────┬──────────────────────┘
                                       │
                                       ▼
                    ┌──────────────────────────────────────────┐
                    │           CLAUDE (Main Controller)       │
                    │  ┌─────────────────────────────────────┐ │
                    │  │  • 任务分解 & 工具调度              │ │
                    │  │  • 代码执行 & 文件操作              │ │
                    │  │  • 最终方案汇总 & 输出              │ │
                    │  └─────────────────────────────────────┘ │
                    └─────────┬─────────────────┬──────────────┘
                              │                 │
              ┌───────────────┼─────────────────┼───────────────┐
              │               │                 │               │
              ▼               ▼                 ▼               │
    ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │
    │   CODEX SKILL   │ │  GEMINI SKILL   │ │  CLAUDE NATIVE  │ │
    │   ───────────   │ │   ───────────   │ │   ───────────   │ │
    │ • 复杂计划制定  │ │ • 前端开发      │ │ • 后台开发      │ │
    │ • 深度代码审查  │ │ • UI/UX 建议    │ │ • 工程实现      │ │
    │ • 架构设计      │ │ • 多模态分析    │ │ • 代码执行      │ │
    │                 │ │                 │ │                 │ │
    │ 🐢 慢但深度高   │ │ ⚡ 快且擅长创意 │ │ 🔧 工程能力最强 │ │
    └────────┬────────┘ └────────┬────────┘ └────────┬────────┘ │
             │                   │                   │          │
             └───────────────────┼───────────────────┘          │
                                 │                              │
                                 ▼                              │
                    ┌──────────────────────────────────────────┐│
                    │         CLAUDE SYNTHESIZES               ││
                    │   三路结论 → 最优方案 → 用户输出         ││
                    └──────────────────────────────────────────┘│
                                                                │
```

### 核心价值主张

| 维度 | 单一 AI | 三 AI 协同 | 提升 |
|------|---------|-----------|------|
| **思维深度** | 一种视角 | 三种专业视角 | 3x |
| **盲点覆盖** | 依赖单一训练数据 | 互补的训练背景 | ↑↑ |
| **速度 vs 质量** | 只能二选一 | 并行获取多方案 | 两者兼得 |
| **专业分工** | 全能但不精 | 各司其职 | 更精准 |

### 用户评论关键洞察

> **@果 ALL IN AI (作者)**:
> "目前 claude 工程能力我看还是最强，所以用 claude 做主控，调用 codex & gemini"

> **@萝卜白菜**:
> "只用 CodeX 出码，对比之后我认为它的代码上限还是三家最高的，只要你能忍受它的速度。AI coding 有时候慢就是快。"

> **@大米小米三兄弟**:
> "组内要求每个功能模块必须通过 GPT Pro 出架构并提交评审，通过后才能开始编码，再用文档配合自定义 codex 计划模式。提交后再用 codex 做 code review，出 P0 级 BUG 扣绩效。"

---

## Part 1: 架构深度分析

### 1.1 为什么 Claude 作为主控？

```
┌────────────────────────────────────────────────────────────────────────┐
│                    AI 能力对比矩阵 (基于用户实战反馈)                  │
├────────────────────┬──────────────┬──────────────┬────────────────────┤
│       能力         │    Claude    │    Codex     │      Gemini        │
├────────────────────┼──────────────┼──────────────┼────────────────────┤
│ 代码工程能力       │   ★★★★★     │   ★★★★☆     │     ★★★☆☆         │
│ 深度思考/规划      │   ★★★★☆     │   ★★★★★     │     ★★★☆☆         │
│ 执行速度           │   ★★★★☆     │   ★☆☆☆☆     │     ★★★★★         │
│ 前端/UI            │   ★★★☆☆     │   ★★★☆☆     │     ★★★★★         │
│ 多模态理解         │   ★★★★☆     │   ★★★☆☆     │     ★★★★★         │
│ 工具集成生态       │   ★★★★★     │   ★★★☆☆     │     ★★☆☆☆         │
│ 持续对话上下文     │   ★★★★★     │   ★★★☆☆     │     ★★★☆☆         │
├────────────────────┼──────────────┼──────────────┼────────────────────┤
│ 最佳定位           │   主控+执行  │  规划+Review │    前端+创意       │
└────────────────────┴──────────────┴──────────────┴────────────────────┘
```

**选择 Claude 作主控的原因**:

1. **工具生态最完善**: Claude Code 原生支持 Skill、MCP、Hooks
2. **对话上下文最强**: 持续对话中保持完整上下文
3. **执行能力最平衡**: 既能规划也能执行，不会只说不做

### 1.2 分工模式详解

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        推荐分工模式 (评论区共识)                        │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   Phase 1: ARCHITECTURE                                                 │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │  GPT Pro (Deep Research) ──→ 架构设计文档                       │   │
│   │  "每个功能模块必须通过 GPT Pro 出架构并提交评审"                │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                               │                                         │
│                               ▼                                         │
│   Phase 2: PLANNING                                                     │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │  Codex (xhigh mode) ──→ 详细实施计划                            │   │
│   │  "codex 擅长制定复杂计划"                                       │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                               │                                         │
│                               ▼                                         │
│   Phase 3: IMPLEMENTATION                                               │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │  Claude (Engineering) ──→ 代码实现                              │   │
│   │  "claude 工程能力还是最强"                                      │   │
│   │  Gemini (Frontend) ──→ 前端组件                                 │   │
│   │  "gemini 前端"                                                  │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                               │                                         │
│                               ▼                                         │
│   Phase 4: REVIEW                                                       │
│   ┌─────────────────────────────────────────────────────────────────┐   │
│   │  Codex (Code Review) ──→ 质量把关                               │   │
│   │  "提交后再用 codex 做 code review，出 P0 级 BUG 扣绩效"         │   │
│   └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Part 2: 实施指南

### 2.1 创建 Codex Skill (一句话法)

原作者的方法极其简洁:

> "和 claude 对话：'帮我把 codex 命令添加为 skill，具体使用方法参考 codex --help，默认使用方法 `echo 'xxx' | codex exec`。codex 擅长制定复杂计划和 review 代码，在必要时调用辅助思考'"

**原理解析**:
```
┌─────────────────────────────────────────────────────────────────────────┐
│  Claude 内置 claude-code-guide 工具                                     │
│  ↓                                                                      │
│  自动查阅官方文档                                                       │
│  ↓                                                                      │
│  按最佳实践生成 Skill 配置                                              │
│  ↓                                                                      │
│  写入 ~/.claude/skills/codex/SKILL.md                                   │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 手动创建 Skill (完全控制)

如果你想完全理解和控制 Skill 配置:

**文件结构**:
```
~/.claude/skills/
├── codex/
│   └── SKILL.md
└── gemini/
    └── SKILL.md
```

**codex/SKILL.md**:
```markdown
---
name: codex
description: 调用 OpenAI Codex CLI 进行深度代码分析、复杂计划制定和代码审查。当需要深度思考、架构设计、性能优化分析或代码 Review 时使用。
allowed-tools: Bash(echo:*), Bash(codex:*)
---

# Codex 深度思考助手

## 使用场景

- 复杂功能的实施计划制定
- 代码架构设计和评审
- 性能优化点分析
- Code Review (PR 审查)

## 调用方式

```bash
# 标准调用
echo '分析这段代码的性能优化点' | codex exec

# 指定思考模式
echo '设计用户认证模块架构' | codex exec --mode high
```

## 注意事项

- Codex 速度较慢（可能 30 分钟起步），适合不急的深度分析
- 开 xhigh 模式成本高，20 美元订阅消耗快
- 输出结果需要 Claude 整合到最终方案中

## 最佳实践

1. 对于可拆分的任务，启动多个 Codex 并行分析
2. 与 Gemini 和 Claude 原生能力配合使用
3. 重要架构决策优先使用 Codex
```

**gemini/SKILL.md**:
```markdown
---
name: gemini
description: 调用 Google Gemini CLI 进行前端开发建议、UI/UX 分析和多模态内容理解。当处理前端组件、用户界面设计或需要图像理解时使用。
allowed-tools: Bash(gemini:*)
---

# Gemini 前端助手

## 使用场景

- 前端组件设计和实现建议
- UI/UX 优化建议
- 图像/截图分析理解
- 创意方案头脑风暴

## 调用方式

```bash
# 前端建议
gemini "设计一个响应式导航栏组件"

# 图像分析
gemini analyze --image screenshot.png "分析这个界面的用户体验问题"
```

## 与 Claude 协作

Gemini 的建议需要由 Claude 整合并转化为可执行代码。
```

### 2.3 Skill vs Slash Command 选择

| 使用场景 | 推荐方式 | 原因 |
|----------|----------|------|
| 用户主动调用 Codex | Slash Command (`/codex`) | 明确意图，避免误调用 |
| Claude 自动判断需要 Codex | Skill | 上下文感知，智能调用 |
| 规划阶段三路并行 | 两者结合 | 用户触发 + 自动分发 |

**混合方案示例**:

创建一个 `/multi-plan` Slash Command，内部调用 Skill:

```markdown
<!-- .claude/commands/multi-plan.md -->
# 多 AI 并行规划

当用户使用此命令时:

1. 将任务描述同时发送给:
   - Codex Skill (深度规划)
   - Gemini Skill (创意方案)
   - Claude 原生 (工程视角)

2. 等待所有结果返回

3. 汇总三方建议，生成最终规划方案

## 输出格式

```
## Codex 视角
[深度分析结果]

## Gemini 视角
[创意方案结果]

## Claude 工程视角
[实施建议]

## 综合最优方案
[汇总结论]
```
```

---

## Part 3: 成本效益分析

### 3.1 订阅成本对比

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         月度订阅成本分析                                │
├─────────────────────┬──────────────┬────────────────────────────────────┤
│       服务          │    价格      │              备注                  │
├─────────────────────┼──────────────┼────────────────────────────────────┤
│ Claude Pro          │   $20/月     │ Claude Code 基础使用               │
│ Claude Max          │   $100+/月   │ 高用量场景                         │
│ ChatGPT Pro         │   $20/月     │ Codex 基础使用，xhigh 快速消耗     │
│ ChatGPT Pro (推荐)  │   $200/月    │ 重度 Codex 使用者必选              │
│ Gemini Advanced     │   $20/月     │ Gemini CLI 访问                    │
├─────────────────────┼──────────────┼────────────────────────────────────┤
│ 三 AI 协同 (基础)   │   $60/月     │ 轻度使用                           │
│ 三 AI 协同 (重度)   │   $320/月    │ 企业级/高强度使用                  │
└─────────────────────┴──────────────┴────────────────────────────────────┘
```

### 3.2 ROI 分析

```
                    投入产出比计算

    ┌────────────────────────────────────────────────────────────────┐
    │                                                                │
    │   成本投入                       收益产出                      │
    │   ─────────                      ─────────                     │
    │                                                                │
    │   $60-320/月                     • 决策质量提升 (多视角)       │
    │   + 学习曲线时间                 • 代码缺陷减少 (深度 Review)  │
    │   + Skill 配置时间               • 开发速度提升 (并行思考)    │
    │                                  • P0 Bug 降低 (架构把关)      │
    │                                                                │
    │   ════════════════════════════════════════════════════════════ │
    │                                                                │
    │   适合人群:                                                    │
    │   ✅ 公司报销 / 企业用户                                       │
    │   ✅ 高价值项目开发者                                          │
    │   ✅ 重视代码质量的团队                                        │
    │   ❌ 个人轻度使用者 (成本过高)                                 │
    │   ❌ 对速度敏感的快速原型 (Codex 太慢)                         │
    │                                                                │
    └────────────────────────────────────────────────────────────────┘
```

### 3.3 速度 vs 质量权衡

> **@果 ALL IN AI**: "gpt 5.1 最高思考模式，体感上确实是思维思考深度最高的...但问题是如果开了这么高的模式，速度就会非常的慢"

```
    速度-质量曲线

    质量
      ▲
      │                              ★ Codex xhigh
      │                         ★ Codex high     (30分钟+)
      │                    ★ Claude Opus
      │               ★ Claude Sonnet
      │          ★ Gemini Flash
      │     ★ Quick modes
      │
      └──────────────────────────────────────────▶ 速度
                           快 ← → 慢

    策略: 不同场景选择不同模式
    • 快速原型 → Gemini Flash / Claude Sonnet
    • 架构设计 → Codex high/xhigh (接受慢)
    • 日常开发 → Claude 原生
```

---

## Part 4: 企业级最佳实践

### 4.1 团队工作流 (来自评论区真实案例)

> **@大米小米三兄弟**: "组内要求每个功能模块必须通过 GPT Pro 出架构并提交评审，通过后才能开始编码，再用文档配合自定义 codex 计划模式，一般不会出问题。提交后再用 codex 做 code review，出 P0 级 BUG 扣绩效。"

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     企业级 AI 辅助开发流程                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Step 1: 架构设计                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  Developer → GPT Pro Deep Research → 架构文档                     │  │
│  │              ↓                                                    │  │
│  │           架构评审会议 (人工)                                     │  │
│  │              ↓                                                    │  │
│  │           评审通过? ──No──→ 返回修改                              │  │
│  │              │                                                    │  │
│  │             Yes                                                   │  │
│  │              ↓                                                    │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  Step 2: 详细规划                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  架构文档 → Codex 计划模式 → 详细实施计划                         │  │
│  │  "用文档配合自定义 codex 计划模式"                                │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  Step 3: 代码实现                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  实施计划 → Claude Code → 代码实现                                │  │
│  │           → Gemini (前端部分)                                     │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  Step 4: 代码审查                                                       │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │  PR 提交 → Codex Code Review → 问题列表                           │  │
│  │              ↓                                                    │  │
│  │           问题修复                                                │  │
│  │              ↓                                                    │  │
│  │           Merge                                                   │  │
│  │              ↓                                                    │  │
│  │           P0 Bug? ──Yes──→ 扣绩效 ⚠️                              │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 并行执行策略

> **@果 ALL IN AI**: "这个任务很难拆分，但是实际上本身就复杂度足够。我如果做，会让 claude 调用 gemini 和 codex 工具，最终会 3 个一起跑，各自给结论，claude 汇总结论"

```bash
# 并行分析模式示意

User: "分析这个 Go 代码的性能优化点"

Claude 内部执行:
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐             │
│   │   Codex      │    │   Gemini     │    │   Claude     │             │
│   │   Skill      │    │   Skill      │    │   Native     │             │
│   └──────┬───────┘    └──────┬───────┘    └──────┬───────┘             │
│          │                   │                   │                      │
│          │ 并行执行          │                   │                      │
│          ▼                   ▼                   ▼                      │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐             │
│   │ 深度性能分析 │    │ 可读性建议   │    │ 工程最佳实践 │             │
│   │ 算法优化     │    │ 代码结构     │    │ 具体实现     │             │
│   │ 内存优化     │    │ 现代化建议   │    │ 快速修复     │             │
│   └──────┬───────┘    └──────┬───────┘    └──────┬───────┘             │
│          │                   │                   │                      │
│          └───────────────────┼───────────────────┘                      │
│                              │                                          │
│                              ▼                                          │
│                    ┌─────────────────────┐                              │
│                    │   Claude 汇总      │                              │
│                    │   最优方案输出     │                              │
│                    └─────────────────────┘                              │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## Part 5: 常见问题与解决方案

### 5.1 问题诊断表

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| Codex 太慢 (30分钟+) | xhigh 模式深度思考 | 拆分任务并行执行多个 Codex |
| 20 美元快速消耗 | xhigh 模式成本高 | 升级到 200 美元订阅 |
| Skill 不被调用 | description 太模糊 | 添加具体触发词和使用场景 |
| 三方结论冲突 | 不同 AI 有不同观点 | Claude 作为仲裁者，基于工程可行性决策 |
| 上下文丢失 | Codex/Gemini 独立运行 | 在调用时传递完整上下文 |

### 5.2 评论区踩坑经验

> **@小红薯DE1F556D**: "codex 经常半小时起步"
>
> **回应 @Peter Zerg**: "你把任务先拆开，然后还几个 codex 平行跑"
>
> **再回应**: "我就是让他找出一个 go 源码的性能优化点，这个还咋拆分，不可能几行代码给他拆分析"

**解决方案**:
```
对于不可拆分的复杂任务:
1. 接受 Codex 的慢速 (质量优先)
2. 同时让 Claude + Gemini 给出快速初步方案
3. Codex 结果返回后，用于验证和深化初步方案
4. 这样既有即时反馈，也有深度分析
```

---

## Part 6: 行动清单

### 立即可做 (10 分钟)

- [ ] **Step 1**: 确认已安装 Codex CLI (`codex --version`)
- [ ] **Step 2**: 确认已安装 Gemini CLI (`gemini --version`)
- [ ] **Step 3**: 对 Claude 说: "帮我把 codex 命令添加为 skill"
- [ ] **Step 4**: 对 Claude 说: "帮我把 gemini 命令添加为 skill"
- [ ] **Step 5**: 测试: "用 codex 帮我分析这段代码"

### 进阶优化 (按需)

- [ ] 创建 `/multi-plan` 命令实现三路并行
- [ ] 配置不同场景的 Codex 模式 (high/xhigh)
- [ ] 建立团队 Skill 规范并共享
- [ ] 设置成本预警机制

### 订阅决策

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          订阅建议决策树                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   你是否重度使用 Codex xhigh 模式?                                      │
│                │                                                        │
│        ┌───────┴───────┐                                                │
│        │               │                                                │
│       Yes             No                                                │
│        │               │                                                │
│        ▼               ▼                                                │
│   $200/月 GPT Pro    $20/月 GPT Pro                                     │
│   (必选)             (够用)                                             │
│                                                                         │
│   公司是否报销?                                                         │
│        │                                                                │
│   ┌────┴────┐                                                           │
│   │         │                                                           │
│  Yes       No                                                           │
│   │         │                                                           │
│   ▼         ▼                                                           │
│  全开      评估 ROI                                                     │
│  三家      是否值得 $60-320/月                                          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 总结: Transferable Rules

### 1. 主控选择原则
> Claude 工程能力最强 + 工具生态最完善 = 最佳主控

### 2. 分工协作原则
> 深度思考用 Codex，前端创意用 Gemini，工程实现用 Claude

### 3. 速度质量权衡
> "AI coding 有时候慢就是快" - 重要决策值得等待深度分析

### 4. 成本控制原则
> 按场景选择模式，不是所有任务都需要 xhigh

### 5. 并行执行原则
> 可并行时三路同时跑，不可拆分时接受等待换取质量

---

**Report Generated**: 2025-12-25
**Based on**: 小红书用户实战经验 + Claude Code 官方文档
