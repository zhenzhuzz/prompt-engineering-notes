# Bash + Python è·¨è¿›ç¨‹æ•°æ®ä¼ é€’ç¼–ç é™·é˜±

> **Source**: Auto-Research ç¡å‰ç ”ç©¶ç³»ç»Ÿè°ƒè¯• (2025-12-21)
> **Context**: Claude CLI Headless Mode è¾“å‡ºä¸­æ–‡ä¹±ç 
> **Core Insight**: è·¨è¿›ç¨‹ä¼ é€’æ•°æ®æ—¶ï¼Œå­—ç¬¦ä¸²åµŒå…¥ + éšå¼ç¼–ç è½¬æ¢ = åŒé‡é™·é˜±

---

## Golden Rule (é»„é‡‘å‡†åˆ™)

ðŸ† **ã€Œæ–‡ä»¶ä¼ æ•°æ®ï¼Œç¼–ç æ˜¾å¼å®šã€**

**å®Œæ•´ç‰ˆ**:
- è·¨è¿›ç¨‹ä¼ é€’æ•°æ® â†’ ç”¨ä¸´æ—¶æ–‡ä»¶ï¼Œä¸ç”¨å˜é‡åµŒå…¥
- Windows + ä¸­æ–‡ + Python â†’ æ˜¾å¼å£°æ˜Ž `encoding='utf-8'`

**å®‰å…¨å‰æ**:
- âœ… çº¯ ASCII æ•°æ® â†’ å˜é‡åµŒå…¥å®‰å…¨
- âš ï¸ å«å¼•å·/æ¢è¡Œç¬¦ â†’ å¯èƒ½ç ´åè¯­æ³•
- âš ï¸ å«ä¸­æ–‡ + Windows â†’ ç¼–ç å¿…ä¹±

**ä¸€å¥è¯ç‰ˆæœ¬**:
> è·¨è¿›ç¨‹ä¼ ä¸­æ–‡ï¼Œä¸´æ—¶æ–‡ä»¶ + UTF-8 æ˜¾å¼å£°æ˜Žï¼Œç¼ºä¸€ä¸å¯ã€‚

---

## The Essence (æ ¸å¿ƒç²¾åŽ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è·¨è¿›ç¨‹æ•°æ®ä¼ é€’ï¼šä¸¤ç§æ¨¡å¼å¯¹æ¯”                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âŒ å±é™©æ¨¡å¼ï¼šå˜é‡åµŒå…¥                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   Claude CLI                Bash å˜é‡              Python è§£æž              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ JSON è¾“å‡º   â”‚ â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ $result     â”‚ â”€â”€â”€â–¶   â”‚'''$result'''â”‚          â”‚
â”‚   â”‚ (UTF-8)     â”‚          â”‚ (æŽ§åˆ¶å°ç¼–ç ) â”‚        â”‚ (è¯­æ³•ç ´å!) â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                   â”‚                      â”‚                  â”‚
â”‚                                   â–¼                      â–¼                  â”‚
â”‚                            GBK/CP936 æ··å…¥          å¼•å·/æ¢è¡Œç ´å             â”‚
â”‚                                   â”‚                      â”‚                  â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                              â–¼                              â”‚
â”‚                                    ä¹±ç  + JSON æœªæå–                        â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  âœ… å®‰å…¨æ¨¡å¼ï¼šä¸´æ—¶æ–‡ä»¶                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚   Claude CLI                ä¸´æ—¶æ–‡ä»¶                Python è¯»å–              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ JSON è¾“å‡º   â”‚ â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ /tmp/xxx    â”‚ â”€â”€â”€â–¶   â”‚ open(...,   â”‚          â”‚
â”‚   â”‚ (UTF-8)     â”‚    >     â”‚ (å­—èŠ‚æµ)    â”‚        â”‚ encoding=   â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ 'utf-8')    â”‚          â”‚
â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                          â”‚                  â”‚
â”‚                                                          â–¼                  â”‚
â”‚                                                   æ­£ç¡®è§£ç  + æå–            â”‚
â”‚                                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                             â”‚
â”‚  ðŸ’¡ æ ¸å¿ƒæ´žè§:                                                                â”‚
â”‚     å˜é‡åµŒå…¥æœ‰ä¸¤ä¸ªéšæ‚£ï¼šç¼–ç è½¬æ¢ + è¯­æ³•æ³¨å…¥                                   â”‚
â”‚     ä¸´æ—¶æ–‡ä»¶ç»•è¿‡äº†ä¸¤è€…ï¼šå­—èŠ‚æµä¿çœŸ + æ— éœ€å¼•å·åŒ…è£¹                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é—®é¢˜çŽ°è±¡

### è¾“å…¥

è¿è¡Œ Auto-Research è„šæœ¬ï¼ŒClaude CLI ç”Ÿæˆç ”ç©¶æŠ¥å‘Šã€‚

### é¢„æœŸè¾“å‡º

```markdown
# Gemini 3 Flash å¿«é€Ÿæ¦‚è§ˆ

> **æ’°å†™æ—¶é—´**: 2025-12-21
> **ä¸€å¥è¯æ€»ç»“**: Google æœ€æ–°å‘å¸ƒçš„é«˜æ€§èƒ½ä½Žæˆæœ¬æ¨¡åž‹...
```

### å®žé™…è¾“å‡º

```
{"type":"result",...,"result":"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Þ¡ï¿½...ï¿½ï¿½ï¿½Ù¸ï¿½ï¿½ï¿½..."}
```

**ä¸¤ä¸ªé—®é¢˜å åŠ **ï¼š
1. JSON åŒ…è£…å™¨æœªè¢«å‰¥ç¦» â†’ Python æå–å¤±è´¥
2. ä¸­æ–‡æ˜¾ç¤ºä¸º `ï¿½ï¿½ï¿½` â†’ ç¼–ç é”™é…

---

## æ ¹å› åˆ†æž

### æ ¹å›  #1: Python ä¸‰å¼•å·è¯­æ³•æ³¨å…¥

**é—®é¢˜ä»£ç **:

```bash
local result=$(claude -p "$prompt" --output-format json 2>&1)

python -c "
import json
try:
    data = json.loads('''$result''')    # â† $result ç›´æŽ¥åµŒå…¥ä¸‰å¼•å·
    ...
except:
    print('''$result''')                # â† å¤±è´¥æ—¶åŽŸæ ·è¾“å‡º
"
```

**å¤±è´¥åœºæ™¯**:

| è¾“å‡ºå†…å®¹ | åŽæžœ |
|----------|------|
| åŒ…å« `'` å•å¼•å· | Python å­—ç¬¦ä¸²æå‰ç»ˆæ­¢ |
| åŒ…å« `'''` ä¸‰å¼•å· | è¯­æ³•å®Œå…¨ç ´å |
| åŒ…å«æ¢è¡Œç¬¦ | å¤šè¡Œå­—ç¬¦ä¸²è¾¹ç•Œæ··ä¹± |
| åŒ…å« `\` åæ–œæ  | è½¬ä¹‰å­—ç¬¦å†²çª |

**ç»“æžœ**: `json.loads()` å¤±è´¥ â†’ `except` åˆ†æ”¯æ‰§è¡Œ â†’ æ•´ä¸ª JSON åŽŸæ ·å†™å…¥æ–‡ä»¶

### æ ¹å›  #2: Windows æŽ§åˆ¶å°ç¼–ç é“¾

**ç¼–ç è½¬æ¢é“¾è·¯**:

```
Claude CLI (UTF-8 è¾“å‡º)
    â†“
Git Bash / MSYS2 (ç»§æ‰¿ Windows ç³»ç»Ÿç¼–ç )
    â†“
Windows ä¸­æ–‡ç‰ˆ (é»˜è®¤ GBK/CP936)
    â†“
$result å˜é‡ (å·²è¢«è½¬æ¢ä¸º GBK å­—èŠ‚)
    â†“
Python print() (ä½¿ç”¨ stdout é»˜è®¤ç¼–ç )
    â†“
æ–‡ä»¶é‡å®šå‘ > (æ— ç¼–ç å£°æ˜Ž)
    â†“
æœ€ç»ˆæ–‡ä»¶ (GBK å­—èŠ‚è¢«å½“ä½œ ISO-8859-1 è¯»å– = ä¹±ç )
```

**è¯æ®** (xxd åå…­è¿›åˆ¶åˆ†æž):

```
bf b4 c0 b4  = GBK ç¼–ç çš„ "å¿«æ¥"
ä½†è¢«è¯»å–ä¸º ISO-8859-1 â†’ æ˜¾ç¤ºä¸º "Â¿Â´Ã€Â´"
```

---

## ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ #1: ç”¨ä¸´æ—¶æ–‡ä»¶æ›¿ä»£å˜é‡åµŒå…¥

**Before (å±é™©)**:

```bash
local result=$(claude -p "$prompt" ... 2>&1)
python -c "data = json.loads('''$result''')"
```

**After (å®‰å…¨)**:

```bash
local temp_result=$(mktemp)

# è¾“å‡ºåˆ°ä¸´æ—¶æ–‡ä»¶ï¼Œä¿æŒå­—èŠ‚æµåŽŸæ ·
claude -p "$prompt" ... > "$temp_result" 2>&1

# Python è¯»å–æ–‡ä»¶ï¼Œæ˜¾å¼æŒ‡å®šç¼–ç 
python -c "
with open('$temp_result', 'r', encoding='utf-8') as f:
    content = f.read()
data = json.loads(content)
"

rm -f "$temp_result"
```

### ä¿®å¤ #2: å¼ºåˆ¶ UTF-8 çŽ¯å¢ƒ

åœ¨è„šæœ¬å¼€å¤´æ·»åŠ ï¼š

```bash
export PYTHONIOENCODING=utf-8
export LANG=en_US.UTF-8
```

### å®Œæ•´ä¿®å¤ Diff

```diff
 # Windows Git Bash é…ç½®
 export CLAUDE_CODE_GIT_BASH_PATH="C:\\Program Files\\Git\\bin\\bash.exe"

+# å¼ºåˆ¶ UTF-8 ç¼–ç 
+export PYTHONIOENCODING=utf-8
+export LANG=en_US.UTF-8

 do_research() {
     ...
-    local result=$(claude -p "$prompt" ... 2>&1)
-    python -c "... json.loads('''$result''') ..."
+    local temp_result=$(mktemp)
+    claude -p "$prompt" ... > "$temp_result" 2>&1
+    python -c "
+with open('$temp_result', 'r', encoding='utf-8') as f:
+    content = f.read()
+data = json.loads(content)
+..."
+    rm -f "$temp_result"
 }
```

---

## è¯Šæ–­æ–¹æ³•è®º

### å¿«é€Ÿè¯Šæ–­æ¸…å•

å½“è¾“å‡ºå‡ºçŽ°ä¹±ç æ—¶ï¼š

```
1. ç¡®è®¤ç¼–ç ç±»åž‹
   $ file output.md
   â†’ ISO-8859 text (é”™è¯¯) vs UTF-8 Unicode text (æ­£ç¡®)

2. æŸ¥çœ‹åŽŸå§‹å­—èŠ‚
   $ xxd output.md | head -30
   â†’ bf b4 c0 b4 = GBK
   â†’ e4 b8 ad e6 96 87 = UTF-8 "ä¸­æ–‡"

3. æ£€æŸ¥æ•°æ®ä¼ é€’æ–¹å¼
   â†’ å˜é‡åµŒå…¥? â†’ é«˜å±
   â†’ æ–‡ä»¶ä¼ é€’? â†’ æ£€æŸ¥ encoding å‚æ•°
```

### ç¼–ç é€ŸæŸ¥è¡¨

| å­—èŠ‚åºåˆ— | ç¼–ç  | ç¤ºä¾‹ |
|----------|------|------|
| `e4 b8 ad` | UTF-8 | "ä¸­" |
| `d6 d0` | GBK | "ä¸­" |
| `bf b4 c0 b4` | GBK | "å¿«æ¥" |
| `c4 e3 ba c3` | GBK | "ä½ å¥½" |

---

## å¯è¿ç§»è§„åˆ™

### è§„åˆ™ #1: è·¨è¿›ç¨‹ä¼ æ•°æ®ç”¨æ–‡ä»¶

**æ¨¡å¼**:
```
âŒ é”™è¯¯: process_a | python -c "data = '''$(cat)'''"
âœ… æ­£ç¡®: process_a > /tmp/data && python read_file.py /tmp/data
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: æ–‡ä»¶æ˜¯å­—èŠ‚æµï¼Œä¸ç»è¿‡ Shell å˜é‡æ›¿æ¢ï¼Œé¿å…å¼•å·/è½¬ä¹‰é—®é¢˜ã€‚

**å¦‚ä½•åº”ç”¨**: ä»»ä½•æ—¶å€™éœ€è¦åœ¨ Bash å’Œ Python ä¹‹é—´ä¼ é€’éžçº¯ ASCII æ•°æ®ï¼Œéƒ½ç”¨ä¸´æ—¶æ–‡ä»¶ã€‚

### è§„åˆ™ #2: Windows + ä¸­æ–‡ = æ˜¾å¼ç¼–ç 

**æ¨¡å¼**:
```
âŒ é”™è¯¯: open('file.txt')  # ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¼–ç 
âœ… æ­£ç¡®: open('file.txt', encoding='utf-8')
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: Windows ä¸­æ–‡ç‰ˆé»˜è®¤ç¼–ç æ˜¯ GBKï¼Œä¸Ž UTF-8 ä¸å…¼å®¹ã€‚

**å¦‚ä½•åº”ç”¨**: åœ¨ Windows ä¸Šè¿è¡Œçš„ä»»ä½• Python ä»£ç ï¼Œå‡¡æ¶‰åŠæ–‡ä»¶è¯»å†™ï¼Œéƒ½æ˜¾å¼æŒ‡å®š `encoding='utf-8'`ã€‚

### è§„åˆ™ #3: çŽ¯å¢ƒå˜é‡å…œåº•

**æ¨¡å¼**:
```bash
export PYTHONIOENCODING=utf-8
export LANG=en_US.UTF-8
```

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**: å½±å“ Python çš„ stdin/stdout é»˜è®¤ç¼–ç ï¼Œä»¥åŠç³»ç»Ÿ localeã€‚

**å¦‚ä½•åº”ç”¨**: åœ¨ Bash è„šæœ¬å¼€å¤´ç»Ÿä¸€è®¾ç½®ï¼Œç¡®ä¿æ•´ä¸ªè„šæœ¬æ‰§è¡ŒçŽ¯å¢ƒä¸€è‡´ã€‚

---

## æŽ¢ç©¶è¿‡ç¨‹æ—¶é—´çº¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          é—®é¢˜æŽ¢ç©¶æ—¶é—´çº¿                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  02:30  å‘çŽ°é—®é¢˜                                                             â”‚
â”‚         â”œâ”€â”€ è¾“å‡ºæ–‡ä»¶åŒ…å« JSON åŒ…è£…å™¨                                         â”‚
â”‚         â””â”€â”€ ä¸­æ–‡æ˜¾ç¤ºä¸º "ï¿½ï¿½ï¿½" ä¹±ç                                             â”‚
â”‚                                                                             â”‚
â”‚  02:35  åˆæ­¥è¯Šæ–­                                                             â”‚
â”‚         â”œâ”€â”€ file å‘½ä»¤: ISO-8859 text (åº”ä¸º UTF-8)                            â”‚
â”‚         â””â”€â”€ xxd æŸ¥çœ‹: å­—èŠ‚ä¸º GBK ç¼–ç                                         â”‚
â”‚                                                                             â”‚
â”‚  02:40  æ ¹å› å®šä½                                                             â”‚
â”‚         â”œâ”€â”€ æ ¹å›  #1: Python ä¸‰å¼•å·åµŒå…¥å˜é‡ï¼Œè¯­æ³•è¢«ç ´å                        â”‚
â”‚         â””â”€â”€ æ ¹å›  #2: Windows GBK ä¸Ž UTF-8 æ··åˆ                               â”‚
â”‚                                                                             â”‚
â”‚  02:50  è®¾è®¡ä¿®å¤æ–¹æ¡ˆ                                                         â”‚
â”‚         â”œâ”€â”€ æ–¹æ¡ˆ #1: ç”¨ä¸´æ—¶æ–‡ä»¶æ›¿ä»£å˜é‡åµŒå…¥                                   â”‚
â”‚         â””â”€â”€ æ–¹æ¡ˆ #2: æ·»åŠ  UTF-8 çŽ¯å¢ƒå˜é‡                                     â”‚
â”‚                                                                             â”‚
â”‚  03:00  å®žæ–½ä¿®å¤                                                             â”‚
â”‚         â”œâ”€â”€ ä¿®æ”¹ research.sh ç¬¬ 12-14 è¡Œ (çŽ¯å¢ƒå˜é‡)                          â”‚
â”‚         â””â”€â”€ ä¿®æ”¹ research.sh ç¬¬ 147-192 è¡Œ (do_research å‡½æ•°)                â”‚
â”‚                                                                             â”‚
â”‚  03:05  éªŒè¯ä¿®å¤                                                             â”‚
â”‚         â”œâ”€â”€ bash -n è¯­æ³•æ£€æŸ¥é€šè¿‡                                             â”‚
â”‚         â””â”€â”€ git diff ç¡®è®¤ä¿®æ”¹æ­£ç¡®                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Takeaways

### For Shell è„šæœ¬å¼€å‘è€…

1. **æ°¸è¿œä¸è¦ç”¨ä¸‰å¼•å·åµŒå…¥å˜é‡** â€” `'''$var'''` æ˜¯å®šæ—¶ç‚¸å¼¹
2. **è·¨è¿›ç¨‹ä¼ æ•°æ®ç”¨ä¸´æ—¶æ–‡ä»¶** â€” `mktemp` æ˜¯ä½ çš„æœ‹å‹
3. **Windows è„šæœ¬å¼€å¤´åŠ ç¼–ç å£°æ˜Ž** â€” `PYTHONIOENCODING=utf-8`

### For Python å¼€å‘è€…

1. **Windows ä¸Šæ°¸è¿œæ˜¾å¼æŒ‡å®šç¼–ç ** â€” `open(f, encoding='utf-8')`
2. **ä¸è¦ä¾èµ–ç³»ç»Ÿé»˜è®¤ç¼–ç ** â€” å®ƒåœ¨ä¸åŒæœºå™¨ä¸Šå¯èƒ½ä¸åŒ
3. **è°ƒè¯•ä¹±ç å…ˆç”¨ `xxd`** â€” çœ‹åŽŸå§‹å­—èŠ‚æ¯”çŒœç¼–ç é è°±

### For Claude Code / AI å·¥å…·ä½¿ç”¨è€…

1. **Headless Mode è¾“å‡ºæ˜¯ JSON** â€” éœ€è¦æå– `result` å­—æ®µ
2. **è¾“å‡ºå¯èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦** â€” ä¸èƒ½ç”¨ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æŽ¥
3. **æµ‹è¯•è„šæœ¬è¦ç”¨çœŸå®žä¸­æ–‡æ•°æ®** â€” çº¯è‹±æ–‡æµ‹è¯•ä¸ä¼šæš´éœ²ç¼–ç é—®é¢˜

---

## ç›¸å…³æ–‡æ¡£

- [KNOW_debugging-cognitive-traps-path-format.md](_knowledge/KNOW_debugging-cognitive-traps-path-format.md) â€” åŒä¸€è°ƒè¯•ä¼šè¯çš„è·¯å¾„æ ¼å¼é—®é¢˜
- [research.sh](auto-research/_shared/research.sh) â€” ä¿®å¤åŽçš„è„šæœ¬

---

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-21
> **ä½œè€…**: Claude Code (Opus 4.5)
