# MCP Best Practices æ·±åº¦ç ”ç©¶æŠ¥å‘Š

> **Source**: å®˜æ–¹æ–‡æ¡£ + æŠ€æœ¯åšå®¢ + å¼€æºé¡¹ç›®
> **Research Date**: 2025-12-21
> **Sources Count**: 10+ æƒå¨æ¥æº
> **Core Theme**: AI å·¥å…·é€šä¿¡çš„æ ‡å‡†åŒ–åè®® â€”â€” è®© AI è¿æ¥çœŸå®ä¸–ç•Œæ•°æ®çš„"æ€»çº¿ç³»ç»Ÿ"

---

## One Paragraph Takeaway (ä¸€æ®µè¯ç²¾å)

**åç›´è§‰æ´è§**: MCP ä¸æ˜¯è®© AI å˜èªæ˜çš„æ¡†æ¶ï¼Œè€Œæ˜¯è®© AI **æ‰¾åˆ°å·¥å…·**çš„æ ‡å‡†åè®® â€”â€” å®ƒè§£å†³çš„ä¸æ˜¯"å¦‚ä½•æ€è€ƒ"ï¼Œè€Œæ˜¯"å¦‚ä½•è¿æ¥"ã€‚

ä¼ ç»Ÿ AI å¼€å‘ä¸­ï¼Œæ¯æ¥å…¥ä¸€ä¸ªæ–°çš„æ•°æ®æºæˆ–å·¥å…·ï¼ˆæ•°æ®åº“ã€APIã€æ–‡ä»¶ç³»ç»Ÿï¼‰éƒ½éœ€è¦å†™å®šåˆ¶åŒ–çš„é›†æˆä»£ç ï¼Œå¦‚åŒæ¯ä¸ªä¼ æ„Ÿå™¨éƒ½è¦å¼€å‘ä¸“å±é©±åŠ¨ã€‚MCP çš„é©å‘½æ€§åœ¨äºï¼šå®ƒåƒ ROS çš„ Topic/Service æœºåˆ¶ä¸€æ ·ï¼Œå®šä¹‰äº†ä¸€å¥—**æ ‡å‡†æ¶ˆæ¯æ ¼å¼å’Œå‘ç°æœºåˆ¶**ï¼Œè®©ä»»ä½• MCP å…¼å®¹çš„ AI åº”ç”¨èƒ½å³æ’å³ç”¨åœ°è®¿é—®ä»»ä½• MCP æœåŠ¡å™¨æä¾›çš„å·¥å…·ã€‚è¿™æ„å‘³ç€ï¼šä¸€ä¸ª GitHub MCP æœåŠ¡å™¨å†™å¥½åï¼ŒClaudeã€ChatGPTã€Gemini éƒ½èƒ½ç”¨åŒä¸€å¥—æ¥å£è°ƒç”¨å®ƒ â€”â€” è¿™æ˜¯ä»"å®šåˆ¶é›†æˆ"åˆ°"æ ‡å‡†åè®®"çš„èŒƒå¼è½¬ç§»ã€‚

**æ ¸å¿ƒå…¬å¼**:
> æ ‡å‡†åŒ–åè®® Ã— åŠ¨æ€å‘ç°æœºåˆ¶ = å¯æ‰©å±•çš„ AI å·¥å…·ç”Ÿæ€ç³»ç»Ÿ

---

## The Essence (æ ¸å¿ƒç²¾å)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MCP åè®®æ ¸å¿ƒæ¶æ„                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   MCP Host (ä¸»æœº)          MCP Client (å®¢æˆ·ç«¯)        MCP Server (æœåŠ¡å™¨)    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  Claude Code â”‚   â—„â”€â”€â–º â”‚  åè®®ç¿»è¯‘å±‚   â”‚   â—„â”€â”€â–º   â”‚  GitHub API  â”‚     â”‚
â”‚   â”‚  VS Code     â”‚        â”‚  (JSON-RPC)  â”‚           â”‚  PostgreSQL  â”‚     â”‚
â”‚   â”‚  Chat App    â”‚        â”‚              â”‚           â”‚  File System â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚   åè°ƒå¤šä¸ªå®¢æˆ·ç«¯            ç»´æŒè¿æ¥ + ç¿»è¯‘            æš´éœ²å·¥å…·/èµ„æº         â”‚
â”‚                                                                             â”‚
â”‚   æ ¸å¿ƒé€šä¿¡æµç¨‹:                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  1. Initialize  â†’ èƒ½åŠ›åå•† (æˆ‘èƒ½åšä»€ä¹ˆï¼Ÿ)                          â”‚    â”‚
â”‚   â”‚  2. tools/list  â†’ å·¥å…·å‘ç° (ä½ æœ‰å“ªäº›å·¥å…·ï¼Ÿ)                        â”‚    â”‚
â”‚   â”‚  3. tools/call  â†’ å·¥å…·è°ƒç”¨ (æ‰§è¡Œè¿™ä¸ªä»»åŠ¡)                          â”‚    â”‚
â”‚   â”‚  4. Notificationâ†’ å®æ—¶æ›´æ–° (å·¥å…·åˆ—è¡¨å˜äº†)                          â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚   ğŸ’¡ æ ¸å¿ƒæ´è§: MCP æ˜¯"åè®®å±‚"è€Œé"åº”ç”¨å±‚" â€”â€” å®ƒå®šä¹‰å¦‚ä½•é€šä¿¡ï¼Œ                â”‚
â”‚                ä¸å®šä¹‰å¦‚ä½•æ€è€ƒã€‚ç±»æ¯”ï¼šTCP/IP vs æµè§ˆå™¨                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç›®å½•

- [1. èƒŒæ™¯ä¸å®šä¹‰](#1-èƒŒæ™¯ä¸å®šä¹‰)
- [2. æ ¸å¿ƒåŠŸèƒ½ä¸ç‰¹ç‚¹](#2-æ ¸å¿ƒåŠŸèƒ½ä¸ç‰¹ç‚¹)
- [3. æŠ€æœ¯åŸç†](#3-æŠ€æœ¯åŸç†)
- [4. å®æˆ˜æŒ‡å—](#4-å®æˆ˜æŒ‡å—)
- [5. æœ€ä½³å®è·µ](#5-æœ€ä½³å®è·µ)
- [6. å¯¹æ¯”åˆ†æ](#6-å¯¹æ¯”åˆ†æ)
- [7. Transferable Rules](#7-transferable-rules)
- [8. Key Takeaways](#8-key-takeaways)
- [9. Glossary](#9-glossary)
- [10. Sources](#10-sources)

---

## 1. èƒŒæ™¯ä¸å®šä¹‰

### 1.1 æ˜¯ä»€ä¹ˆ

**Model Context Protocol (MCP)** æ˜¯ Anthropic åœ¨ 2024 å¹´ 11 æœˆæ¨å‡ºçš„å¼€æºæ ‡å‡†åè®®ï¼Œç”¨äºè¿æ¥ AI åº”ç”¨ä¸å¤–éƒ¨æ•°æ®æºã€å·¥å…·å’ŒæœåŠ¡ã€‚

**ç±»æ¯”ç†è§£**ï¼ˆæœºæ¢°å·¥ç¨‹å¸ˆè§†è§’ï¼‰:
- **ROS (Robot Operating System)**: MCP å°±åƒæœºå™¨äººç³»ç»Ÿä¸­çš„ ROS â€”â€” å®ƒä¸æ˜¯"æœºå™¨äººæœ¬èº«"ï¼Œè€Œæ˜¯è®©ä¸åŒç»„ä»¶ï¼ˆä¼ æ„Ÿå™¨ã€æ‰§è¡Œå™¨ã€ç®—æ³•æ¨¡å—ï¼‰èƒ½ç›¸äº’é€šä¿¡çš„**ä¸­é—´ä»¶åè®®**
- **CAN æ€»çº¿**: å¦‚åŒæ±½è½¦ä¸­çš„ CAN æ€»çº¿ï¼ŒMCP å®šä¹‰äº†æ ‡å‡†æ¶ˆæ¯æ ¼å¼ï¼Œè®©ä¸åŒå‚å•†çš„ ECUï¼ˆç”µæ§å•å…ƒï¼‰èƒ½äº’è”äº’é€š
- **ä¿¡å·é‡‡é›†ç³»ç»Ÿ**: ç±»æ¯”ä½ ç†Ÿæ‚‰çš„æŒ¯åŠ¨ä¿¡å·é‡‡é›† â€”â€” MCP æ˜¯é‡‡é›†å¡çš„"é©±åŠ¨å±‚"ï¼Œè®©ä»»ä½•åˆ†æè½¯ä»¶ï¼ˆAIï¼‰éƒ½èƒ½è¯»å–ä»»ä½•ä¼ æ„Ÿå™¨ï¼ˆæ•°æ®æºï¼‰

### 1.2 è§£å†³ä»€ä¹ˆé—®é¢˜

**Before (ä¼ ç»Ÿæ–¹å¼):**
```
æ¯ä¸ª AI åº”ç”¨ Ã— æ¯ä¸ªæ•°æ®æº = N Ã— M ç§å®šåˆ¶é›†æˆ
- Claude è¦è¿ GitHub â†’ å†™ä¸“å±é€‚é…å™¨
- ChatGPT è¦è¿ GitHub â†’ é‡æ–°å†™ä¸€éé€‚é…å™¨
- Cursor è¦è¿ GitHub â†’ å†å†™ä¸€é...
```

**After (MCP æ–¹å¼):**
```
ä»»ä½• MCP å®¢æˆ·ç«¯ Ã— ä»»ä½• MCP æœåŠ¡å™¨ = å³æ’å³ç”¨
- 1 ä¸ª GitHub MCP Server â†’ æ‰€æœ‰ MCP å®¢æˆ·ç«¯é€šç”¨
- æ–°å¢æ•°æ®æºï¼Ÿåªéœ€å®ç° MCP æ¥å£
- æ–°å¢ AI åº”ç”¨ï¼Ÿè‡ªåŠ¨å‘ç°æ‰€æœ‰ MCP å·¥å…·
```

**æ ¸å¿ƒç—›ç‚¹**:
1. **é‡å¤åŠ³åŠ¨**: æ¯æ¬¡é›†æˆéƒ½è¦ä»å¤´å†™é€‚é…ä»£ç 
2. **ç»´æŠ¤åœ°ç‹±**: API å˜åŒ–æ—¶éœ€åŒæ­¥æ›´æ–°æ‰€æœ‰é›†æˆç‚¹
3. **å­¤å²›æ•ˆåº”**: å·¥å…·æ— æ³•è·¨ AI åº”ç”¨å¤ç”¨
4. **å®‰å…¨éšæ‚£**: æ¯ä¸ªå®šåˆ¶é›†æˆéƒ½æœ‰ç‹¬ç«‹çš„å®‰å…¨å®ç°

### 1.3 å‘å±•å†ç¨‹

| æ—¶é—´ | é‡Œç¨‹ç¢‘ |
|------|--------|
| 2024-11-25 | Anthropic å‘å¸ƒ MCP 1.0ï¼Œå¼€æºè§„èŒƒå’Œ SDK |
| 2024-12 | Claude Desktop å†…ç½® MCP æ”¯æŒï¼Œå‘å¸ƒé¦–æ‰¹å®˜æ–¹æœåŠ¡å™¨ (GitHub, Postgres, Slack) |
| 2025-03 | OpenAI å®˜æ–¹é‡‡ç”¨ MCP æ ‡å‡†ï¼Œå‘å¸ƒ MCP 2025-03-26 è§„èŒƒ |
| 2025-04 | Google DeepMind ç¡®è®¤åœ¨ Gemini ä¸­æ”¯æŒ MCP |
| 2025-10 | Microsoft å‘å¸ƒ Agent Framework with MCPï¼ŒAzure åŸç”Ÿé›†æˆ |
| 2025-12 | ç¤¾åŒºå·²æœ‰ 200+ MCP æœåŠ¡å™¨å®ç°ï¼Œè¦†ç›–ä¸»æµä¼ä¸šå·¥å…· |

---

## 2. æ ¸å¿ƒåŠŸèƒ½ä¸ç‰¹ç‚¹

### 2.1 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **Tools (å·¥å…·)** | å¯æ‰§è¡Œçš„å‡½æ•°è°ƒç”¨ | æ–‡ä»¶æ“ä½œã€API è°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ |
| **Resources (èµ„æº)** | å¯è¯»å–çš„æ•°æ®æº | æ–‡æ¡£å†…å®¹ã€é…ç½®æ–‡ä»¶ã€æ•°æ®åº“è®°å½• |
| **Prompts (æç¤ºè¯)** | å¯å¤ç”¨çš„äº¤äº’æ¨¡æ¿ | ç³»ç»Ÿæç¤ºè¯ã€Few-shot ç¤ºä¾‹ |
| **Sampling (é‡‡æ ·)** | è¯·æ±‚ LLM ç”Ÿæˆè¡¥å…¨ | æœåŠ¡å™¨éœ€è¦ AI è¾…åŠ©å†³ç­–æ—¶ |
| **Logging (æ—¥å¿—)** | å‘é€è°ƒè¯•/ç›‘æ§æ¶ˆæ¯ | ç”Ÿäº§ç¯å¢ƒè¯Šæ–­ã€æ€§èƒ½ç›‘æ§ |

### 2.2 ä¸‰å¤§æ ¸å¿ƒåŸè¯­ (Primitives)

**1. Tools (å·¥å…·) - "èƒ½åšä»€ä¹ˆ"**
```json
// å‘ç°å·¥å…·
Request:  tools/list
Response: [
  {
    "name": "weather_current",
    "title": "Get Current Weather",
    "inputSchema": {
      "type": "object",
      "properties": {
        "location": {"type": "string"},
        "units": {"type": "string", "enum": ["metric", "imperial"]}
      }
    }
  }
]

// è°ƒç”¨å·¥å…·
Request:  tools/call("weather_current", {"location": "San Francisco"})
Response: "Current weather in San Francisco: 72Â°F, Partly Cloudy"
```

**2. Resources (èµ„æº) - "èƒ½è¯»ä»€ä¹ˆ"**
```json
// å‘ç°èµ„æº
Request:  resources/list
Response: [
  {
    "uri": "github://issue/123",
    "name": "Issue #123: Add dark mode",
    "mimeType": "application/json"
  }
]

// è¯»å–èµ„æº
Request:  resources/read("github://issue/123")
Response: {è¯¦ç»†çš„ Issue å†…å®¹}
```

**3. Prompts (æç¤ºè¯æ¨¡æ¿) - "æ€ä¹ˆäº¤äº’"**
```json
// è·å–æç¤ºè¯æ¨¡æ¿
Request:  prompts/get("code_review")
Response: {
  "messages": [
    {
      "role": "system",
      "content": "You are an expert code reviewer..."
    }
  ]
}
```

### 2.3 ç‹¬ç‰¹ä¼˜åŠ¿

**ç›¸æ¯”ä¼ ç»Ÿé›†æˆæ–¹å¼:**

| ç»´åº¦ | ä¼ ç»Ÿ REST API | MCP åè®® |
|------|--------------|----------|
| **é›†æˆå¤æ‚åº¦** | æ¯ä¸ª AI åº”ç”¨ç‹¬ç«‹å®ç° | ä¸€æ¬¡å®ç°ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯é€šç”¨ |
| **å·¥å…·å‘ç°** | ç¡¬ç¼–ç å·¥å…·åˆ—è¡¨ | è¿è¡Œæ—¶åŠ¨æ€å‘ç° (`tools/list`) |
| **ç±»å‹å®‰å…¨** | æ‰‹åŠ¨è§£æ + éªŒè¯ | JSON Schema è‡ªåŠ¨éªŒè¯ |
| **å®æ—¶æ›´æ–°** | éœ€è¦è½®è¯¢ | åŸºäºé€šçŸ¥çš„æ¨é€æœºåˆ¶ |
| **å®‰å…¨æ¨¡å‹** | å„è‡ªå®ç°è®¤è¯ | ç»Ÿä¸€ OAuth 2.1 æ ‡å‡† |
| **è·¨è¯­è¨€æ”¯æŒ** | éœ€å¤šå¥— SDK | åè®®ä¸­ç«‹ (Python/TS/Java/Rust) |

**ç±»æ¯”ç†è§£**:
- **REST API**: å¦‚åŒæ¯ä¸ªä¼ æ„Ÿå™¨æœ‰ç‹¬ç«‹çš„æ•°æ®æ‰‹å†Œï¼Œä½ éœ€è¦é’ˆå¯¹æ¯ä¸ªä¼ æ„Ÿå™¨å†™ä¸“å±è§£æä»£ç 
- **MCP**: å¦‚åŒæ‰€æœ‰ä¼ æ„Ÿå™¨éƒ½éµå¾ªç»Ÿä¸€çš„ OPC UA åè®®ï¼Œé‡‡é›†ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶è¯»å–

---

## 3. æŠ€æœ¯åŸç†

### 3.1 æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MCP åˆ†å±‚æ¶æ„                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ•°æ®å±‚ (Data Layer) - å®šä¹‰"è¯´ä»€ä¹ˆ"                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ç”Ÿå‘½å‘¨æœŸç®¡ç†  â”‚  å·¥å…·åŸè¯­     â”‚  èµ„æºåŸè¯­     â”‚  é€šçŸ¥æœºåˆ¶     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ initialize   â”‚ tools/list   â”‚resources/listâ”‚notifications â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ initialized  â”‚ tools/call   â”‚resources/readâ”‚progress      â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚  åŸºäº JSON-RPC 2.0 åè®®                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â–²                                           â”‚
â”‚                              â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ä¼ è¾“å±‚ (Transport Layer) - å®šä¹‰"æ€ä¹ˆä¼ "                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚  â”‚ Stdio        â”‚ HTTP + SSE   â”‚ WebSocket    â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ (æœ¬åœ°è¿›ç¨‹)    â”‚ (è¿œç¨‹æœåŠ¡å™¨)  â”‚ (åŒå‘é€šä¿¡)    â”‚                â”‚    â”‚
â”‚  â”‚  â”‚              â”‚              â”‚              â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ æ ‡å‡†è¾“å…¥è¾“å‡º  â”‚ POSTè¯·æ±‚     â”‚ æŒä¹…è¿æ¥     â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ æœ€ä½å»¶è¿Ÿ     â”‚ æ”¯æŒé˜²ç«å¢™   â”‚ å®æ—¶æ¨é€     â”‚                â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                           â”‚
â”‚  è®¾è®¡åŸåˆ™:                                                                â”‚
â”‚  â€¢ æ•°æ®å±‚ä¸ä¼ è¾“å±‚è§£è€¦ (åè®®æ— å…³ä¼ è¾“æ–¹å¼)                                   â”‚
â”‚  â€¢ èƒ½åŠ›åå•†æœºåˆ¶ (å®¢æˆ·ç«¯/æœåŠ¡å™¨å£°æ˜æ”¯æŒçš„ç‰¹æ€§)                              â”‚
â”‚  â€¢ åŠ¨æ€å‘ç°è®¾è®¡ (è¿è¡Œæ—¶è·å–å·¥å…·åˆ—è¡¨ï¼Œè€Œéç¡¬ç¼–ç )                           â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 å·¥ä½œåŸç† - å®Œæ•´äº¤äº’æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Host   â”‚                 â”‚ MCP Client  â”‚                 â”‚ MCP Server  â”‚
â”‚ (Claude App)â”‚                 â”‚ (åè®®å®¢æˆ·ç«¯) â”‚                 â”‚ (GitHub)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚                               â”‚
       â”‚  1. å¯åŠ¨è¿æ¥                   â”‚                               â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚  2. Initialize (èƒ½åŠ›åå•†)      â”‚
       â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                               â”‚  {capabilities: {tools: {}}}  â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚  {capabilities: {resources:{}}}â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚  3. tools/list (å‘ç°å·¥å…·)      â”‚
       â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚  ["create_issue", "search_pr"]â”‚
       â”‚                               â”‚                               â”‚
       â”‚  4. ç”¨æˆ·è¾“å…¥: "åˆ›å»º Issue"      â”‚                               â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚  5. tools/call(create_issue)  â”‚
       â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                               â”‚  {title:"Bug", body:"..."}    â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚  {result: "Issue #789 created"}â”‚
       â”‚                               â”‚                               â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
       â”‚  "å·²åˆ›å»º Issue #789"           â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚  6. Notification (å·¥å…·å˜æ›´)    â”‚
       â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚  notifications/tools/list_changedâ”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚  7. tools/list (é‡æ–°è·å–)      â”‚
       â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                               â”‚                               â”‚

```

**å…³é”®è®¾è®¡ç‚¹**:
1. **èƒ½åŠ›åå•†**: å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨åˆå§‹åŒ–æ—¶å£°æ˜å„è‡ªæ”¯æŒçš„åŠŸèƒ½ (tools, resources, prompts)
2. **åŠ¨æ€å‘ç°**: è¿è¡Œæ—¶é€šè¿‡ `tools/list` è·å–å¯ç”¨å·¥å…·ï¼Œè€Œéé™æ€é…ç½®
3. **é€šçŸ¥é©±åŠ¨**: æœåŠ¡å™¨ä¸»åŠ¨æ¨é€å˜æ›´ï¼Œå®¢æˆ·ç«¯æ— éœ€è½®è¯¢
4. **æ— çŠ¶æ€è°ƒç”¨**: æ¯æ¬¡ `tools/call` æ˜¯ç‹¬ç«‹äº‹åŠ¡ï¼Œå»ºè®®æ¯æ¬¡å»ºç«‹æ–°è¿æ¥

### 3.3 èƒ½åŠ›åå•†æœºåˆ¶ (Capability Negotiation)

```json
// å®¢æˆ·ç«¯å£°æ˜: "æˆ‘èƒ½åšä»€ä¹ˆ"
{
  "capabilities": {
    "elicitation": {},      // å¯ä»¥å‘ç”¨æˆ·æé—®
    "sampling": {           // å¯ä»¥è¯·æ±‚ LLM è¡¥å…¨
      "supportsStreaming": true
    }
  }
}

// æœåŠ¡å™¨å£°æ˜: "æˆ‘æä¾›ä»€ä¹ˆ"
{
  "capabilities": {
    "tools": {
      "listChanged": true   // æ”¯æŒå·¥å…·åˆ—è¡¨å˜æ›´é€šçŸ¥
    },
    "resources": {
      "subscribe": true,    // æ”¯æŒèµ„æºè®¢é˜…
      "listChanged": true
    },
    "prompts": {}           // æä¾›æç¤ºè¯æ¨¡æ¿
  }
}
```

**å®é™…æ„ä¹‰**:
- **å‘å‰å…¼å®¹**: è€å®¢æˆ·ç«¯è¿æ¥æ–°æœåŠ¡å™¨æ—¶ï¼Œè‡ªåŠ¨å¿½ç•¥ä¸æ”¯æŒçš„ç‰¹æ€§
- **åŠŸèƒ½é™çº§**: å¦‚å®¢æˆ·ç«¯ä¸æ”¯æŒ `sampling`ï¼ŒæœåŠ¡å™¨å°±ä¸è°ƒç”¨è¯¥èƒ½åŠ›
- **æœ€å°æƒŠè®¶åŸåˆ™**: åŒæ–¹æ˜ç¡®"å¥‘çº¦"ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯

---

## 4. å®æˆ˜æŒ‡å—

### 4.1 ç¯å¢ƒå‡†å¤‡

**å®‰è£… Claude Code CLI (æ¨èæ–¹å¼):**
```bash
# macOS/Linux
curl -fsSL https://code.claude.com/install.sh | sh

# Windows (PowerShell)
irm https://code.claude.com/install.ps1 | iex

# éªŒè¯å®‰è£…
claude --version
```

**æˆ–è€…ä½¿ç”¨ç°æœ‰ AI åº”ç”¨:**
- Claude Desktop (å†…ç½® MCP æ”¯æŒ)
- VS Code + Claude Code Extension
- Cursor / Windsurf (2025 å¹´æ–°å¢ MCP æ”¯æŒ)

### 4.2 å¿«é€Ÿå¼€å§‹ - ä¸‰ç§éƒ¨ç½²æ–¹å¼

#### **æ–¹å¼ 1: è¿œç¨‹ HTTP æœåŠ¡å™¨ (æ¨èç”Ÿäº§ç¯å¢ƒ)**

```bash
# æ·»åŠ è¿œç¨‹ MCP æœåŠ¡å™¨
claude mcp add --transport http github https://api.githubcopilot.com/mcp/

# å¸¦è®¤è¯ä»¤ç‰Œ
claude mcp add --transport http stripe https://mcp.stripe.com \
  --header "Authorization: Bearer ${STRIPE_API_KEY}"

# ä½¿ç”¨ç¯å¢ƒå˜é‡
export NOTION_API_KEY="secret_xxx"
claude mcp add --transport http notion https://mcp.notion.com/mcp \
  --header "X-Notion-Version: 2025-01-01"
```

**ä¼˜åŠ¿**: é€‚åˆä¼ä¸šéƒ¨ç½²ï¼Œæ”¯æŒè´Ÿè½½å‡è¡¡ã€é˜²ç«å¢™ç©¿é€ã€OAuth è®¤è¯

#### **æ–¹å¼ 2: æœ¬åœ° Stdio æœåŠ¡å™¨ (æœ€ä½å»¶è¿Ÿ)**

```bash
# ä½¿ç”¨ npx è¿è¡Œæœ¬åœ°æœåŠ¡å™¨
claude mcp add --transport stdio filesystem \
  --env READ_ONLY=true \
  -- npx -y @modelcontextprotocol/server-filesystem /path/to/allowed/dir

# Python æœåŠ¡å™¨
claude mcp add --transport stdio postgres \
  --env DB_URL="postgresql://user:pass@localhost/db" \
  -- python -m mcp_server_postgres

# Windows ç”¨æˆ· (éœ€è¦ cmd /c åŒ…è£…)
claude mcp add --transport stdio my-server \
  -- cmd /c npx -y @some/package
```

**ä¼˜åŠ¿**: é›¶ç½‘ç»œå»¶è¿Ÿï¼Œé€‚åˆå¼€å‘è°ƒè¯•ã€æœ¬åœ°å·¥å…·é›†æˆ

#### **æ–¹å¼ 3: SSE (Server-Sent Events, å·²å¼ƒç”¨)**

```bash
# ä»…ç”¨äºå…¼å®¹è€ç‰ˆæœ¬ MCP æœåŠ¡å™¨
claude mcp add --transport sse asana https://mcp.asana.com/sse \
  --header "X-API-Key: ${ASANA_KEY}"
```

**æ³¨æ„**: 2025-03 è§„èŒƒæ¨èä½¿ç”¨ HTTP + SSE ç»„åˆï¼Œçº¯ SSE å·²å¼ƒç”¨

### 4.3 å¸¸è§ç”¨ä¾‹

#### **ç”¨ä¾‹ 1: è¿æ¥ GitHub è¿›è¡Œä»£ç å®¡æŸ¥**

```bash
# 1. æ·»åŠ  GitHub MCP æœåŠ¡å™¨
claude mcp add --transport http github https://api.githubcopilot.com/mcp/

# 2. åœ¨ Claude Code ä¸­è®¤è¯
> /mcp
# é€‰æ‹© github â†’ æµè§ˆå™¨ OAuth ç™»å½•

# 3. è‡ªç„¶è¯­è¨€äº¤äº’
> å¸®æˆ‘å®¡æŸ¥ PR #456ï¼Œé‡ç‚¹å…³æ³¨å®‰å…¨é—®é¢˜å’Œæ€§èƒ½
> åœ¨æœ€è¿‘ 10 ä¸ª Issue ä¸­æ‰¾å‡ºä¸è®¤è¯ç›¸å…³çš„ Bug
> åŸºäº Issue #123 çš„æè¿°åˆ›å»ºæ–°åˆ†æ”¯å¹¶å®ç°åŠŸèƒ½
```

**èƒŒåå‘ç”Ÿçš„äº‹**:
```json
// Claude è‡ªåŠ¨è°ƒç”¨ MCP å·¥å…·
tools/call("github_get_pr", {"pr_number": 456, "include_diff": true})
tools/call("github_list_issues", {"labels": ["auth", "bug"], "limit": 10})
tools/call("github_create_branch", {"issue_id": 123, "branch_name": "feature/auth-fix"})
```

#### **ç”¨ä¾‹ 2: æŸ¥è¯¢ PostgreSQL æ•°æ®åº“**

```bash
# 1. æ·»åŠ åªè¯»æ•°æ®åº“è¿æ¥
claude mcp add --transport stdio analytics_db \
  --env DB_DSN="postgresql://readonly:[email protected]:5432/analytics" \
  -- npx -y @bytebase/dbhub

# 2. è‡ªç„¶è¯­è¨€æŸ¥è¯¢
> ä¸Šä¸ªæœˆæ€»é”€å”®é¢æ˜¯å¤šå°‘ï¼Ÿ
> æ‰¾å‡ºæ¶ˆè´¹è¶…è¿‡ $1000 çš„ç”¨æˆ·é‚®ç®±
> å“ªä¸ªäº§å“ç±»åˆ«çš„é€€è´§ç‡æœ€é«˜ï¼Ÿ
```

**SQL è‡ªåŠ¨ç”Ÿæˆç¤ºä¾‹**:
```sql
-- AI æ ¹æ®è‡ªç„¶è¯­è¨€ç”ŸæˆæŸ¥è¯¢
SELECT SUM(amount) as total_sales
FROM orders
WHERE created_at >= date_trunc('month', CURRENT_DATE - interval '1 month')
  AND created_at < date_trunc('month', CURRENT_DATE);
```

#### **ç”¨ä¾‹ 3: ä» Figma è®¾è®¡ç”Ÿæˆä»£ç **

```bash
# 1. è¿æ¥ Figma MCP
claude mcp add --transport http figma https://mcp.figma.com \
  --header "X-Figma-Token: ${FIGMA_TOKEN}"

# 2. åœ¨ Claude Code ä¸­ä½¿ç”¨
> å°† Figma è®¾è®¡ "Dashboard-v3" è½¬æ¢ä¸º React ç»„ä»¶
> æå–è®¾è®¡ç³»ç»Ÿä¸­çš„æ‰€æœ‰é¢œè‰²å˜é‡åˆ° Tailwind é…ç½®
> å¯¹æ¯”è®¾è®¡ç¨¿å’Œå½“å‰ä»£ç çš„å·®å¼‚
```

**å®é™…å·¥ä½œæµ**:
1. MCP è¯»å– Figma è®¾è®¡æ–‡ä»¶ (Resources)
2. æå–ç»„ä»¶å±‚æ¬¡ã€æ ·å¼ã€å°ºå¯¸
3. ç”Ÿæˆå¯¹åº”çš„ JSX/CSS ä»£ç 
4. è‡ªåŠ¨åŒ¹é…è®¾è®¡ Token åˆ°ä»£ç å˜é‡

---

## 5. æœ€ä½³å®è·µ

### 5.1 æ¨èåšæ³•

| âœ… Do | âŒ Don't |
|-------|---------|
| **æ¯ä¸ªå·¥å…·è°ƒç”¨éƒ½å»ºç«‹æ–°è¿æ¥** (æ— çŠ¶æ€è®¾è®¡) | âŒ åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶å»ºç«‹å…¨å±€è¿æ¥æ±  |
| **ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯** (`${API_KEY}`) | âŒ ç¡¬ç¼–ç  API å¯†é’¥åˆ°é…ç½®æ–‡ä»¶ |
| **å®ç°æœ‰æ„ä¹‰çš„é”™è¯¯æ¶ˆæ¯** ("éœ€è¦ GITHUB_TOKEN ç¯å¢ƒå˜é‡") | âŒ è¿”å›é€šç”¨é”™è¯¯ ("Access denied") |
| **å•ä¸€èŒè´£**: ä¸€ä¸ª MCP æœåŠ¡å™¨ä¸“æ³¨ä¸€ä¸ªæœåŠ¡ | âŒ ä¸€ä¸ªæœåŠ¡å™¨èšåˆå¤šä¸ªä¸ç›¸å…³ API |
| **Stdio ç”¨äºæœ¬åœ°å·¥å…·ï¼ŒHTTP ç”¨äºè¿œç¨‹æœåŠ¡** | âŒ è¿œç¨‹æœåŠ¡ç”¨ Stdio (æ— æ³•æ‰©å±•) |
| **OAuth 2.1 è®¤è¯è¿œç¨‹æœåŠ¡å™¨** (2025 è§„èŒƒå¼ºåˆ¶) | âŒ ä½¿ç”¨ Session ID æˆ– Cookie è®¤è¯ |
| **Stdio æœåŠ¡å™¨æ°¸è¿œä¸å†™ stdout** (ä¼šç ´å JSON-RPC) | âŒ ç”¨ `print()` æˆ– `console.log()` è°ƒè¯• |
| **å®ç° `listChanged` é€šçŸ¥æœºåˆ¶** | âŒ è®©å®¢æˆ·ç«¯è½®è¯¢å·¥å…·åˆ—è¡¨ |
| **ä½¿ç”¨ JSON Schema ä¸¥æ ¼å®šä¹‰è¾“å…¥** | âŒ æ¥å—ä»»æ„ JSON å¯¹è±¡ |
| **ä¸º AI ä¼˜åŒ–é”™è¯¯æ¶ˆæ¯** ("éœ€é…ç½® API_TOKEN") | âŒ æŠ€æœ¯é”™è¯¯ ("NullPointerException at line 42") |

### 5.2 å®‰å…¨æœ€ä½³å®è·µ

#### **1. å¤šå±‚é˜²å¾¡ (Defense in Depth)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®‰å…¨å±‚çº§                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: ç½‘ç»œéš”ç¦»                          â”‚
â”‚  â€¢ ç”Ÿäº§æœåŠ¡å™¨ä»…å…è®¸å†…ç½‘è®¿é—®                  â”‚
â”‚  â€¢ ä½¿ç”¨ VPN æˆ– API Gateway                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: è®¤è¯ (Authentication)             â”‚
â”‚  â€¢ OAuth 2.1 with PKCE                     â”‚
â”‚  â€¢ API Key é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 3: æˆæƒ (Authorization)              â”‚
â”‚  â€¢ æœ€å°æƒé™åŸåˆ™ (åªè¯»/åªå†™åˆ†ç¦»)              â”‚
â”‚  â€¢ åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 4: è¾“å…¥éªŒè¯                          â”‚
â”‚  â€¢ JSON Schema å¼ºåˆ¶éªŒè¯                    â”‚
â”‚  â€¢ SQL å‚æ•°åŒ–æŸ¥è¯¢ (é˜²æ³¨å…¥)                  â”‚
â”‚  â€¢ æ–‡ä»¶è·¯å¾„ç™½åå•                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 5: è¾“å‡ºæ¸…ç†                          â”‚
â”‚  â€¢ HTML/JS è½¬ä¹‰ (é˜² XSS)                   â”‚
â”‚  â€¢ æ•æ„Ÿæ•°æ®è„±æ•                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä»£ç ç¤ºä¾‹ (è¾“å…¥éªŒè¯):**
```python
# âŒ å±é™©: SQL æ³¨å…¥é£é™©
def search_users(query: str):
    sql = f"SELECT * FROM users WHERE name LIKE '%{query}%'"
    return db.execute(sql)

# âœ… å®‰å…¨: å‚æ•°åŒ–æŸ¥è¯¢ + JSON Schema éªŒè¯
from pydantic import BaseModel, Field

class SearchInput(BaseModel):
    query: str = Field(..., max_length=100, pattern=r'^[a-zA-Z0-9\s]+$')

def search_users(input: SearchInput):
    sql = "SELECT * FROM users WHERE name LIKE %s"
    return db.execute(sql, (f"%{input.query}%",))
```

#### **2. ç¯å¢ƒå˜é‡é…ç½®æ¨¡å¼**

```json
// .mcp.json (å¯æäº¤åˆ° Git)
{
  "mcpServers": {
    "production-db": {
      "type": "http",
      "url": "${DB_HOST:-https://db.prod.company.com}/mcp",
      "headers": {
        "Authorization": "Bearer ${DB_READ_TOKEN}",
        "X-Environment": "${DEPLOY_ENV:-production}"
      }
    }
  }
}
```

```bash
# .env (ä¸æäº¤åˆ° Git)
DB_HOST=https://db.staging.company.com
DB_READ_TOKEN=secret_abc123
DEPLOY_ENV=staging
```

### 5.3 æ€§èƒ½ä¼˜åŒ–

#### **1. è¿æ¥æ±  vs å³æ—¶è¿æ¥**

```python
# âŒ åæ¨¡å¼: å…¨å±€è¿æ¥ (è¿å MCP æ— çŠ¶æ€åŸåˆ™)
class BadMcpServer:
    def __init__(self):
        self.db = connect_to_database()  # å¯åŠ¨æ—¶è¿æ¥

    async def call_tool(self, name, args):
        return await self.db.query(args)  # å¤ç”¨è¿æ¥

# âœ… æ¨è: æ¯æ¬¡è°ƒç”¨å»ºç«‹è¿æ¥
class GoodMcpServer:
    async def call_tool(self, name, args):
        async with database_connection() as db:  # çŸ­æœŸè¿æ¥
            return await db.query(args)
        # è¿æ¥è‡ªåŠ¨å…³é—­

# âœ… é«˜çº§: æ™ºèƒ½ç¼“å­˜ + è¿æ¥æ± 
class OptimizedMcpServer:
    def __init__(self):
        self.pool = ConnectionPool(max_size=10, timeout=30)
        self.cache = TTLCache(maxsize=100, ttl=60)

    async def call_tool(self, name, args):
        cache_key = f"{name}:{hash(frozenset(args.items()))}"
        if cache_key in self.cache:
            return self.cache[cache_key]

        async with self.pool.connection() as db:
            result = await db.query(args)
            self.cache[cache_key] = result
            return result
```

**ä¸ºä»€ä¹ˆæ¨èæ¯æ¬¡å»ºç«‹è¿æ¥ï¼Ÿ**
- **å®¹é”™æ€§**: æŸæ¬¡è°ƒç”¨å¤±è´¥ä¸å½±å“åç»­è¯·æ±‚
- **èµ„æºé‡Šæ”¾**: é¿å…é•¿æ—¶é—´å ç”¨è¿æ¥
- **æ‰©å±•æ€§**: æ˜“äºå®ç°è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»
- **MCP å“²å­¦**: å·¥å…·è°ƒç”¨åº”å½“è‡ªåŒ…å« (self-contained)

#### **2. ç¼“å­˜ç­–ç•¥**

```python
from functools import lru_cache
from datetime import datetime, timedelta

class CachingMcpServer:
    # Level 1: å†…å­˜ç¼“å­˜ (è¿›ç¨‹å†…)
    @lru_cache(maxsize=128)
    def get_user_by_id(self, user_id: int):
        return db.query("SELECT * FROM users WHERE id = %s", user_id)

    # Level 2: åˆ†å¸ƒå¼ç¼“å­˜ (Redis)
    async def get_popular_products(self):
        cache_key = "products:popular:v1"
        cached = await redis.get(cache_key)
        if cached:
            return json.loads(cached)

        products = await db.query("SELECT * FROM products ORDER BY sales DESC LIMIT 10")
        await redis.setex(cache_key, 300, json.dumps(products))  # 5 åˆ†é’Ÿè¿‡æœŸ
        return products

    # Level 3: HTTP ç¼“å­˜å¤´
    def handle_request(self, request):
        last_modified = get_last_db_update_time()
        if request.headers.get("If-Modified-Since") == last_modified:
            return Response(status=304)  # Not Modified

        data = self.fetch_data()
        return Response(
            data=data,
            headers={
                "Last-Modified": last_modified,
                "Cache-Control": "max-age=60"
            }
        )
```

#### **3. é™æµä¸é™çº§**

```python
from aiolimiter import AsyncLimiter

class ResilientMcpServer:
    def __init__(self):
        # æ¯ç§’æœ€å¤š 10 æ¬¡å¤–éƒ¨ API è°ƒç”¨
        self.rate_limiter = AsyncLimiter(10, 1)
        self.circuit_breaker = CircuitBreaker(
            failure_threshold=5,
            recovery_timeout=60
        )

    async def call_external_api(self, endpoint, params):
        # é™æµ
        async with self.rate_limiter:
            try:
                # ç†”æ–­ä¿æŠ¤
                async with self.circuit_breaker:
                    response = await httpx.get(endpoint, params=params, timeout=5.0)
                    return response.json()
            except CircuitBreakerOpen:
                # é™çº§: è¿”å›ç¼“å­˜æ•°æ®
                return self.get_cached_data(endpoint, params)
            except httpx.TimeoutException:
                # è¶…æ—¶é‡è¯• (æœ€å¤š 3 æ¬¡)
                return await self.retry_with_backoff(endpoint, params, max_retries=3)
```

### 5.4 ç›‘æ§ä¸å¯è§‚æµ‹æ€§

```python
import structlog
from prometheus_client import Counter, Histogram

# ç»“æ„åŒ–æ—¥å¿—
logger = structlog.get_logger()

# Prometheus æŒ‡æ ‡
request_counter = Counter('mcp_requests_total', 'Total MCP requests', ['tool', 'status'])
request_duration = Histogram('mcp_request_duration_seconds', 'Request duration', ['tool'])

class ObservableMcpServer:
    async def call_tool(self, name: str, arguments: dict):
        start_time = time.time()

        try:
            logger.info("tool_call_start", tool=name, args=arguments)
            result = await self._execute_tool(name, arguments)

            # è®°å½•æˆåŠŸ
            request_counter.labels(tool=name, status='success').inc()
            logger.info("tool_call_success", tool=name, duration=time.time()-start_time)
            return result

        except Exception as e:
            # è®°å½•å¤±è´¥
            request_counter.labels(tool=name, status='error').inc()
            logger.error("tool_call_error", tool=name, error=str(e), exc_info=True)
            raise

        finally:
            # è®°å½•è€—æ—¶
            request_duration.labels(tool=name).observe(time.time() - start_time)
```

**å…³é”®æŒ‡æ ‡**:
- **ååé‡**: `mcp_requests_total` (æŒ‰å·¥å…·åˆ†ç±»)
- **å»¶è¿Ÿ**: P50/P95/P99 å“åº”æ—¶é—´
- **é”™è¯¯ç‡**: `(error_count / total_count) Ã— 100%`
- **å¯ç”¨æ€§**: `(successful_requests / total_requests) Ã— 100%`

**ç›®æ ‡ SLA**:
- ååé‡: > 1000 req/s
- P95 å»¶è¿Ÿ: < 100ms
- é”™è¯¯ç‡: < 0.1%
- å¯ç”¨æ€§: > 99.9% (æœˆåº¦)

### 5.5 æµ‹è¯•ç­–ç•¥

```python
import pytest
from mcp.server import Server
from mcp.client import ClientSession

# 1. å•å…ƒæµ‹è¯• (å·¥å…·é€»è¾‘)
def test_search_users():
    result = search_users({"query": "alice"})
    assert len(result) > 0
    assert result[0]["name"].lower().contains("alice")

# 2. é›†æˆæµ‹è¯• (MCP åè®®äº¤äº’)
@pytest.mark.asyncio
async def test_mcp_tools_list():
    async with stdio_server("my-mcp-server") as (reader, writer):
        client = ClientSession(reader, writer)
        await client.initialize()

        # æµ‹è¯•å·¥å…·å‘ç°
        tools = await client.list_tools()
        assert "search_users" in [t.name for t in tools]

        # æµ‹è¯•å·¥å…·è°ƒç”¨
        result = await client.call_tool("search_users", {"query": "alice"})
        assert result.status == "success"

# 3. å¥‘çº¦æµ‹è¯• (éªŒè¯ JSON Schema)
def test_tool_schema_compliance():
    schema = get_tool_schema("search_users")
    validate(instance={"query": "test"}, schema=schema)  # åº”é€šè¿‡

    with pytest.raises(ValidationError):
        validate(instance={"invalid_field": 123}, schema=schema)

# 4. æ··æ²Œå·¥ç¨‹ (æ•…éšœæ³¨å…¥)
@pytest.mark.chaos
async def test_database_failure_resilience():
    # æ¨¡æ‹Ÿæ•°æ®åº“å®•æœº
    with mock_database_failure():
        result = await call_tool("search_users", {"query": "test"})
        # åº”è¿”å›å‹å¥½é”™è¯¯è€Œéå´©æºƒ
        assert result.error.message.contains("database temporarily unavailable")
        assert result.error.retry_after == 30  # å»ºè®® 30 ç§’åé‡è¯•
```

---

## 6. å¯¹æ¯”åˆ†æ

### 6.1 MCP vs LangChain vs OpenAI Agents SDK

| ç»´åº¦ | MCP | LangChain | OpenAI Agents SDK |
|------|-----|-----------|-------------------|
| **å®šä½** | å·¥å…·é€šä¿¡åè®® | AI åº”ç”¨å¼€å‘æ¡†æ¶ | Agent ç¼–æ’æ¡†æ¶ |
| **ç±»æ¯”** | TCP/IP | Django/Flask | Kubernetes |
| **æ ¸å¿ƒåŠŸèƒ½** | æ ‡å‡†åŒ–å·¥å…·æ¥å£ | Prompt é“¾ + è®°å¿†ç®¡ç† | Agent å§”æ‰˜ + çŠ¶æ€æœº |
| **ä»£ç é‡** | ~10 è¡Œå¯åŠ¨ MCP å®¢æˆ·ç«¯ | ~50 è¡Œæ„å»ºå¤æ‚é“¾ | ~30 è¡Œå®šä¹‰ Agent |
| **å­¦ä¹ æ›²çº¿** | ä½ (åè®®ç®€å•) | ä¸­ç­‰ (æ¦‚å¿µå¤š) | ä¸­ç­‰ (éœ€ç†è§£ Agent æ¨¡å¼) |
| **ç”Ÿæ€ç³»ç»Ÿ** | 200+ æœåŠ¡å™¨ (2025-12) | 1000+ é›†æˆ | OpenAI ä¸“å± |
| **æ¨¡å‹å…¼å®¹æ€§** | æ¨¡å‹æ— å…³ | æ”¯æŒæ‰€æœ‰ä¸»æµæ¨¡å‹ | ä»… OpenAI æ¨¡å‹ |
| **é€‚ç”¨åœºæ™¯** | å·¥å…·æ ‡å‡†åŒ–ã€è·¨åº”ç”¨å¤ç”¨ | å¤æ‚ RAG + å¤šæ­¥æ¨ç† | å¤š Agent åä½œ |
| **ä¼˜åŠ¿** | å³æ’å³ç”¨ã€é›¶ä¾›åº”å•†é”å®š | åŠŸèƒ½å…¨é¢ã€ç¤¾åŒºåºå¤§ | åŸç”Ÿæµå¼ã€çŠ¶æ€ç®¡ç†å¼º |
| **åŠ£åŠ¿** | ä¸å¤„ç†æ¨ç†é€»è¾‘ | å­¦ä¹ æˆæœ¬é«˜ã€æ˜“è¿‡åº¦å·¥ç¨‹ | ç»‘å®š OpenAI |

### 6.2 ä½•æ—¶ä½¿ç”¨å“ªä¸ªï¼Ÿ

```
å†³ç­–æ ‘:

ä½ æ˜¯å¦éœ€è¦æ„å»º AI åº”ç”¨çš„"å¤§è„‘"(æ¨ç†ã€è®°å¿†ã€é“¾å¼è°ƒç”¨)ï¼Ÿ
â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ LangChain æˆ– OpenAI Agents SDK
â”‚         â”œâ”€ éœ€è¦å¤šæ¨¡å‹æ”¯æŒ â†’ LangChain
â”‚         â””â”€ ä»…ç”¨ OpenAI + éœ€è¦é«˜æ€§èƒ½æµå¼ â†’ OpenAI Agents SDK
â”‚
â””â”€ å¦ï¼Œåªéœ€è¦è¿æ¥å¤–éƒ¨å·¥å…· â†’ ä½¿ç”¨ MCP
          â”œâ”€ åœ¨ä¸å—æ§çš„åº”ç”¨ä¸­ (Claude Desktop, Cursor) â†’ MCP æ˜¯å”¯ä¸€é€‰æ‹©
          â””â”€ åœ¨è‡ªå·±å¼€å‘çš„åº”ç”¨ä¸­ â†’ MCP + LangChain ç»„åˆä½¿ç”¨

```

**ç»„åˆä½¿ç”¨ç¤ºä¾‹** (æœ€ä½³å®è·µ):
```python
from langchain.agents import AgentExecutor
from langchain_mcp import MCPToolkit

# LangChain è´Ÿè´£æ¨ç†ï¼ŒMCP è´Ÿè´£å·¥å…·è¿æ¥
toolkit = MCPToolkit.from_server("stdio", "github-server")
agent = AgentExecutor(
    tools=toolkit.get_tools(),  # ä» MCP è·å–å·¥å…·
    llm=ChatAnthropic(model="claude-3-5-sonnet"),
    memory=ConversationBufferMemory()  # LangChain ç®¡ç†è®°å¿†
)

result = agent.run("Find all open issues labeled 'bug' and summarize")
```

**æ ¸å¿ƒåŒºåˆ«æ€»ç»“**:
- **MCP**: "å·¥å…·æ€ä¹ˆè¿æ¥" (åè®®å±‚)
- **LangChain**: "AI æ€ä¹ˆæ€è€ƒ" (åº”ç”¨å±‚)
- **OpenAI Agents SDK**: "å¤šä¸ª AI æ€ä¹ˆåä½œ" (ç¼–æ’å±‚)

### 6.3 ç«å“å¯¹æ¯”

| ç‰¹æ€§ | MCP | LangChain Tools | Microsoft Semantic Kernel | AutoGen |
|------|-----|-----------------|---------------------------|---------|
| **åè®®æ ‡å‡†åŒ–** | âœ… å¼€æ”¾æ ‡å‡† | âŒ æ¡†æ¶ç§æœ‰ | âŒ æ¡†æ¶ç§æœ‰ | âŒ æ¡†æ¶ç§æœ‰ |
| **è·¨åº”ç”¨å¤ç”¨** | âœ… æ‰€æœ‰ MCP å®¢æˆ·ç«¯ | âŒ ä»… LangChain åº”ç”¨ | âŒ ä»… SK åº”ç”¨ | âŒ ä»… AutoGen |
| **åŠ¨æ€å·¥å…·å‘ç°** | âœ… `tools/list` | âŒ éœ€æ‰‹åŠ¨æ³¨å†Œ | âœ… Plugin è‡ªåŠ¨å‘ç° | âŒ ç¼–è¯‘æ—¶ç»‘å®š |
| **å®æ—¶é€šçŸ¥** | âœ… Notification æœºåˆ¶ | âŒ éœ€è½®è¯¢ | âŒ éœ€è½®è¯¢ | âŒ |
| **å¤šè¯­è¨€ SDK** | âœ… Python/TS/Java/Rust | âœ… Python/JS | âœ… C#/Python/Java | âœ… Python |
| **å®‰å…¨æ¨¡å‹** | âœ… OAuth 2.1 å¼ºåˆ¶ | âŒ è‡ªè¡Œå®ç° | âœ… Azure AD é›†æˆ | âŒ è‡ªè¡Œå®ç° |
| **ä¼ä¸šé‡‡ç”¨** | Block, Anthropic, Replit | å¹¿æ³›ä½¿ç”¨ | Microsoft ç”Ÿæ€ | ç ”ç©¶å¯¼å‘ |

---

## 7. Transferable Rules

### Rule 1: åè®® vs æ¡†æ¶ â€”â€” é€‰å¯¹æŠ½è±¡å±‚çº§

**The Pattern**:
```
âŒ é”™è¯¯æ¨¡å¼: ç”¨æ¡†æ¶è§£å†³åè®®é—®é¢˜
ç¤ºä¾‹: ç”¨ LangChain å®ç° GitHub é›†æˆ â†’ åªèƒ½åœ¨ LangChain åº”ç”¨ä¸­ä½¿ç”¨

âœ… æ­£ç¡®æ¨¡å¼: ç”¨åè®®è§£å†³é›†æˆé—®é¢˜ï¼Œç”¨æ¡†æ¶è§£å†³æ¨ç†é—®é¢˜
ç¤ºä¾‹:
  1. å†™ GitHub MCP Server â†’ æ‰€æœ‰ AI åº”ç”¨é€šç”¨
  2. åœ¨ LangChain ä¸­è°ƒç”¨ MCP å·¥å…· â†’ å¤ç”¨å·²æœ‰å·¥å…·
```

**Why it works**:
åˆ†å±‚æ¶æ„åŸåˆ™ â€”â€” ä½å±‚åè®®åº”å½“ç¨³å®šä¸”é€šç”¨ï¼Œé«˜å±‚æ¡†æ¶è´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€‚ç±»æ¯”ï¼š
- **TCP/IP** (åè®®) vs **HTTP æ¡†æ¶** (Django/Flask)
- **USB åè®®** vs **è®¾å¤‡é©±åŠ¨** (æ¯ä¸ªæ“ä½œç³»ç»Ÿç‹¬ç«‹å®ç°)
- **CAN æ€»çº¿** vs **ECU åº”ç”¨è½¯ä»¶**

**How to apply**:
åœ¨è®¾è®¡ç³»ç»Ÿæ—¶é—®ï¼š
1. è¿™ä¸ªç»„ä»¶éœ€è¦è·¨åº”ç”¨å¤ç”¨å—ï¼Ÿâ†’ ç”¨åè®® (MCP)
2. è¿™ä¸ªç»„ä»¶åŒ…å«å¤æ‚æ¨ç†é€»è¾‘å—ï¼Ÿâ†’ ç”¨æ¡†æ¶ (LangChain)
3. ä¸¤è€…éƒ½éœ€è¦ï¼Ÿâ†’ ç»„åˆä½¿ç”¨

**è¿ç§»åˆ°å…¶ä»–é¢†åŸŸ**:
- **æœºå™¨äºº**: ROS 2 (åè®®) + MoveIt (è¿åŠ¨è§„åˆ’æ¡†æ¶)
- **å‰ç«¯**: HTTP API (åè®®) + React (UI æ¡†æ¶)
- **ä¿¡å·å¤„ç†**: MATLAB æ•°æ®æ ¼å¼ (åè®®) + Simulink (å»ºæ¨¡æ¡†æ¶)

---

### Rule 2: æ— çŠ¶æ€å·¥å…·è°ƒç”¨ â€”â€” å®¹é”™ä¼˜å…ˆäºæ€§èƒ½

**The Pattern**:
```
âŒ é”™è¯¯æ¨¡å¼: æœåŠ¡å™¨å¯åŠ¨æ—¶å»ºç«‹å…¨å±€æ•°æ®åº“è¿æ¥
class Server:
    def __init__(self):
        self.db = create_connection()  # å…¨å±€è¿æ¥

    def call_tool(self, name, args):
        return self.db.query(args)  # å¤ç”¨è¿æ¥

é£é™©: è¿æ¥æ–­å¼€åæ‰€æœ‰åç»­è¯·æ±‚å¤±è´¥ï¼Œéœ€é‡å¯æœåŠ¡å™¨

âœ… æ­£ç¡®æ¨¡å¼: æ¯æ¬¡å·¥å…·è°ƒç”¨å»ºç«‹æ–°è¿æ¥
def call_tool(name, args):
    with create_connection() as db:  # ä¸´æ—¶è¿æ¥
        return db.query(args)
    # è‡ªåŠ¨å…³é—­
```

**Why it works**:
æŒ¯åŠ¨æµ‹è¯•ç±»æ¯” â€”â€” å¦‚æœç”¨ä¸€ä¸ªå…¨å±€ä¼ æ„Ÿå™¨è¿ç»­é‡‡é›† 8 å°æ—¶ï¼Œä¸­é€”æ–­çº¿å°±ä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼›å¦‚æœæ¯æ¬¡æµ‹è¯•éƒ½é‡æ–°åˆå§‹åŒ–ä¼ æ„Ÿå™¨ï¼ŒæŸæ¬¡å¤±è´¥ä¸å½±å“å…¶ä»–æµ‹è¯•ã€‚

**How to apply**:
1. **è®¾è®¡é˜¶æ®µ**: å‡è®¾æ¯æ¬¡è°ƒç”¨éƒ½åœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­æ‰§è¡Œ
2. **å¼‚å¸¸å¤„ç†**: æ¯æ¬¡è°ƒç”¨éƒ½åº”å½“ `try-finally` é‡Šæ”¾èµ„æº
3. **æ€§èƒ½ä¼˜åŒ–**: ç”¨è¿æ¥æ± è€Œéå…¨å±€è¿æ¥ (`asyncpg.create_pool()`)

**è¿ç§»åˆ°å…¶ä»–é¢†åŸŸ**:
- **Web åç«¯**: RESTful API çš„æ— çŠ¶æ€åŸåˆ™ (æ¯æ¬¡è¯·æ±‚ç‹¬ç«‹)
- **åµŒå…¥å¼ç³»ç»Ÿ**: çœ‹é—¨ç‹—å®šæ—¶å™¨ (watchdog) â€”â€” å‡è®¾ç¨‹åºå¯èƒ½å´©æºƒ
- **åˆ†å¸ƒå¼ç³»ç»Ÿ**: Serverless Functions (æ¯æ¬¡è°ƒç”¨å†·å¯åŠ¨)

---

### Rule 3: ä¸º AI ä¼˜åŒ–é”™è¯¯æ¶ˆæ¯ â€”â€” å¯æ“ä½œæ€§ > æŠ€æœ¯ç»†èŠ‚

**The Pattern**:
```
âŒ é”™è¯¯æ¨¡å¼: æŠ€æœ¯é”™è¯¯æ¶ˆæ¯
{
  "error": "NullPointerException at line 42 in github_client.py",
  "stack_trace": "..."
}
â†’ AI æ— æ³•ç†è§£å¦‚ä½•ä¿®å¤

âœ… æ­£ç¡®æ¨¡å¼: å¯æ“ä½œçš„é”™è¯¯æ¶ˆæ¯
{
  "error": "GitHub API access requires authentication. Please configure the GITHUB_TOKEN environment variable with a personal access token.",
  "help_url": "https://docs.github.com/en/authentication",
  "retry_after": null  # é…ç½®é—®é¢˜ï¼Œé‡è¯•æ— æ„ä¹‰
}
â†’ AI çŸ¥é“ç¼ºå°‘ GITHUB_TOKENï¼Œä¼šæç¤ºç”¨æˆ·é…ç½®
```

**Why it works**:
AI æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ç±»æ¯”äºäººç±»å·¥ä½œè®°å¿† â€”â€” å¦‚æœé”™è¯¯æ¶ˆæ¯åŒ…å«å†—é•¿çš„å †æ ˆè·Ÿè¸ªï¼Œä¼šæŒ¤å æœ‰é™çš„ token é¢„ç®—ï¼Œä¸” AI æ— æ³•è®¿é—®æºä»£ç æ¥è°ƒè¯•ã€‚æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯ç›¸å½“äºç»™ AI æä¾›"ä¸‹ä¸€æ­¥è¡ŒåŠ¨æŒ‡å—"ã€‚

**How to apply**:
```python
# é”™è¯¯æ¶ˆæ¯è®¾è®¡æ¨¡æ¿
def create_error_message(error_type, context):
    return {
        "error": f"{error_type}: {human_readable_description}",
        "required_action": "What the user/AI should do",
        "help_url": "Link to documentation",
        "retry_after": seconds_or_null,  # None è¡¨ç¤ºä¸å¯é‡è¯•
        "error_code": "GITHUB_AUTH_MISSING"  # æœºå™¨å¯è¯»ä»£ç 
    }

# ç¤ºä¾‹
raise ToolError(
    message="Database connection failed: host 'db.prod.com' unreachable",
    required_action="Check network connectivity or contact DevOps team",
    retry_after=60,  # 1 åˆ†é’Ÿåå¯é‡è¯•
    error_code="DB_CONNECTION_TIMEOUT"
)
```

**è¿ç§»åˆ°å…¶ä»–é¢†åŸŸ**:
- **ç¼–è¯‘å™¨è®¾è®¡**: Rust ç¼–è¯‘å™¨çš„é”™è¯¯æ¶ˆæ¯ (å»ºè®®å¦‚ä½•ä¿®å¤ï¼Œè€Œéä»…æŒ‡å‡ºè¯­æ³•é”™è¯¯)
- **æµ‹è¯•æ¡†æ¶**: Jest/Pytest çš„ Diff è¾“å‡º (æ˜¾ç¤ºæœŸæœ› vs å®é™…å€¼)
- **ç›‘æ§å‘Šè­¦**: "CPU usage > 90% for 5 min â†’ Scale up instance" è€Œé "High CPU"

---

### Rule 4: å•ä¸€èŒè´£æœåŠ¡å™¨ â€”â€” ç»„åˆä¼˜äºèšåˆ

**The Pattern**:
```
âŒ é”™è¯¯æ¨¡å¼: ä¸€ä¸ª MCP Server èšåˆå¤šä¸ªä¸ç›¸å…³æœåŠ¡
class MonolithicServer:
    def list_tools(self):
        return [
            "github_create_issue",
            "stripe_create_payment",
            "sendgrid_send_email",
            "postgres_query"
        ]
    # é—®é¢˜: ä»»ä½•ä¸€ä¸ªæœåŠ¡å˜æ›´éƒ½éœ€è¦é‡å¯æ•´ä¸ªæœåŠ¡å™¨

âœ… æ­£ç¡®æ¨¡å¼: æ¯ä¸ªæœåŠ¡ä¸€ä¸ªç‹¬ç«‹ MCP Server
- github-mcp-server    â†’ ä»… GitHub å·¥å…·
- stripe-mcp-server    â†’ ä»… Stripe å·¥å…·
- sendgrid-mcp-server  â†’ ä»… SendGrid å·¥å…·
- postgres-mcp-server  â†’ ä»…æ•°æ®åº“å·¥å…·

å®¢æˆ·ç«¯ç»„åˆä½¿ç”¨:
{
  "mcpServers": {
    "github": {...},
    "stripe": {...},
    "email": {...},
    "db": {...}
  }
}
```

**Why it works**:
Unix å“²å­¦ â€”â€” "Do one thing and do it well"ã€‚ç±»æ¯”ï¼š
- **æœºæ¢°è®¾è®¡**: æ¨¡å—åŒ–è®¾è®¡ â€”â€” æ¯ä¸ªå­ç³»ç»Ÿç‹¬ç«‹æµ‹è¯•ã€ç‹¬ç«‹æ›¿æ¢
- **ä¿¡å·é“¾**: å‰ç½®æ”¾å¤§å™¨ â†’ æ»¤æ³¢å™¨ â†’ ADC â€”â€” æ¯ä¸ªæ¨¡å—å¯ç‹¬ç«‹ä¼˜åŒ–
- **ROS**: æ¯ä¸ª Node è´Ÿè´£å•ä¸€åŠŸèƒ½ (æ¿€å…‰é›·è¾¾ Node, è·¯å¾„è§„åˆ’ Node)

**How to apply**:
åˆ¤æ–­æ˜¯å¦åº”æ‹†åˆ†æœåŠ¡å™¨çš„æ ‡å‡†ï¼š
1. **å˜æ›´é¢‘ç‡ä¸åŒ**: GitHub API æ¯å‘¨æ›´æ–°ï¼Œä½† Stripe API å¾ˆç¨³å®š â†’ æ‹†åˆ†
2. **æ•…éšœåŸŸéš”ç¦»**: Stripe å®•æœºä¸åº”å½±å“ GitHub å·¥å…· â†’ æ‹†åˆ†
3. **æƒé™è¾¹ç•Œ**: ä¸åŒç”¨æˆ·æœ‰ä¸åŒ API æƒé™ â†’ æ‹†åˆ†
4. **éƒ¨ç½²ç‹¬ç«‹æ€§**: æŸäº›å·¥å…·éœ€è¦ç‰¹æ®Šç¯å¢ƒ (GPU, ç‰¹å®š Python ç‰ˆæœ¬) â†’ æ‹†åˆ†

**åä¾‹ (ä½•æ—¶å¯ä»¥èšåˆ)**:
- åŒä¸€ä¸ªæœåŠ¡çš„ä¸åŒç«¯ç‚¹ (GitHub Issues + PRs â†’ åŒä¸€ä¸ª Server âœ…)
- ç´§å¯†è€¦åˆçš„æ“ä½œ (æ•°æ®åº“è¯» + å†™ â†’ åŒä¸€ä¸ª Server âœ…)

---

### Rule 5: ç¯å¢ƒå˜é‡ + é»˜è®¤å€¼ â€”â€” å®‰å…¨æ€§ä¸ä¾¿åˆ©æ€§çš„å¹³è¡¡

**The Pattern**:
```
âŒ é”™è¯¯æ¨¡å¼: ç¡¬ç¼–ç é…ç½®
{
  "url": "https://api.prod.company.com",
  "apiKey": "sk_live_abc123xyz"  # æ³„éœ²é£é™©
}

âŒ é”™è¯¯æ¨¡å¼: å¼ºåˆ¶ç¯å¢ƒå˜é‡æ— é»˜è®¤å€¼
{
  "url": "${API_URL}",  # æœ¬åœ°å¼€å‘æ—¶æ¯æ¬¡éƒ½è¦é…ç½®ï¼Œä½“éªŒå·®
}

âœ… æ­£ç¡®æ¨¡å¼: ç¯å¢ƒå˜é‡ + åˆç†é»˜è®¤å€¼
{
  "url": "${API_URL:-https://api.staging.company.com}",
  "apiKey": "${API_KEY}",  # æ•æ„Ÿä¿¡æ¯æ— é»˜è®¤å€¼
  "timeout": "${TIMEOUT:-30}",
  "retries": "${RETRIES:-3}"
}
```

**Why it works**:
åˆ†å±‚é…ç½®ç­–ç•¥ â€”â€” ç±»æ¯”æŒ¯åŠ¨æµ‹è¯•è®¾å¤‡é…ç½®ï¼š
- **å‡ºå‚é»˜è®¤å€¼**: é€‚åˆå¤§å¤šæ•°åœºæ™¯ (staging URL, 30s è¶…æ—¶)
- **ç¯å¢ƒè¦†ç›–**: ç”Ÿäº§ç¯å¢ƒé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›– (production URL)
- **æ•æ„Ÿå‚æ•°**: æ°¸è¿œä¸æä¾›é»˜è®¤å€¼ (API Key å¿…é¡»æ˜¾å¼é…ç½®)

**How to apply**:
```bash
# .mcp.json (æäº¤åˆ° Git)
{
  "mcpServers": {
    "api": {
      "url": "${API_BASE:-https://dev.api.com}",
      "auth": "${API_TOKEN}",
      "debug": "${DEBUG:-false}"
    }
  }
}

# .env.development (æœ¬åœ°å¼€å‘)
DEBUG=true
API_TOKEN=dev_token_xxx

# .env.production (ç”Ÿäº§ç¯å¢ƒï¼Œä¸æäº¤)
API_BASE=https://prod.api.com
API_TOKEN=prod_token_yyy
DEBUG=false
```

**å®‰å…¨æ£€æŸ¥æ¸…å•**:
- [ ] API å¯†é’¥/Token æ°¸ä¸æäº¤åˆ° Git
- [ ] ç”Ÿäº§ç¯å¢ƒ URL é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–
- [ ] æœ¬åœ°å¼€å‘ç”¨ staging/dev é»˜è®¤å€¼
- [ ] æ•æ„Ÿå­—æ®µæ— é»˜è®¤å€¼ (å¯åŠ¨æ—¶æ£€æŸ¥å¹¶æŠ¥é”™)

---

## 8. Key Takeaways

### For ä¸ªäººå¼€å‘è€…

1. **ç«‹å³è¡ŒåŠ¨: å®‰è£…ç¬¬ä¸€ä¸ª MCP æœåŠ¡å™¨**
   ```bash
   # 10 ç§’å¼€å§‹ä½¿ç”¨ GitHub MCP
   claude mcp add --transport http github https://api.githubcopilot.com/mcp/
   # ç„¶å: "å¸®æˆ‘å®¡æŸ¥æœ€æ–°çš„ 3 ä¸ª PR"
   ```

2. **ä¼˜å…ˆä½¿ç”¨å®˜æ–¹æœåŠ¡å™¨**: åœ¨ [modelcontextprotocol.io/servers](https://modelcontextprotocol.io/servers) æŸ¥æ‰¾å¸¸ç”¨æœåŠ¡ (GitHub, Postgres, Filesystem)ï¼Œé¿å…é‡å¤é€ è½®å­

3. **å­¦ä¹ è·¯å¾„**:
   - ç¬¬ 1 å‘¨: ä½¿ç”¨ 5 ä¸ªç°æœ‰ MCP æœåŠ¡å™¨ (ä½“éªŒå³æ’å³ç”¨)
   - ç¬¬ 2 å‘¨: å‚è€ƒå®˜æ–¹ç¤ºä¾‹å†™ç¬¬ä¸€ä¸ªç®€å•æœåŠ¡å™¨ (æ–‡ä»¶ç³»ç»Ÿå·¥å…·)
   - ç¬¬ 3 å‘¨: é›†æˆçœŸå® API (è‡ªå·±å…¬å¸çš„å†…éƒ¨æœåŠ¡)

### For å›¢é˜Ÿ/ç®¡ç†è€…

1. **åˆ¶å®š MCP ä¼˜å…ˆç­–ç•¥**: æ–°å·¥å…·é›†æˆé»˜è®¤ç”¨ MCP å®ç°ï¼Œè€Œéå®šåˆ¶åŒ– LangChain é›†æˆ â†’ é™ä½ 50% ç»´æŠ¤æˆæœ¬

2. **å»ºç«‹ä¼ä¸š MCP æœåŠ¡å™¨ä»“åº“**:
   ```
   company-mcp-servers/
   â”œâ”€â”€ jira-server/          # å†…éƒ¨ JIRA é›†æˆ
   â”œâ”€â”€ slack-server/         # ä¼ä¸š Slack é›†æˆ
   â”œâ”€â”€ analytics-db-server/  # æ•°æ®åˆ†ææ•°æ®åº“
   â””â”€â”€ deploy-toolkit-server/# éƒ¨ç½²å·¥å…·é›†
   ```

3. **å®‰å…¨ç­–ç•¥**: ä½¿ç”¨ `managed-mcp.json` é™åˆ¶å‘˜å·¥åªèƒ½ä½¿ç”¨å…¬å¸æ‰¹å‡†çš„ MCP æœåŠ¡å™¨ (é˜²æ­¢æ•°æ®æ³„éœ²)

4. **æŠ•èµ„å›æŠ¥**:
   - **çŸ­æœŸ (1-3 æœˆ)**: å‡å°‘ API é›†æˆå¼€å‘æ—¶é—´ 60% (å¤ç”¨ç°æœ‰æœåŠ¡å™¨)
   - **ä¸­æœŸ (3-6 æœˆ)**: AI å·¥å…·é‡‡ç”¨ç‡æå‡ 3 å€ (é™ä½ä½¿ç”¨é—¨æ§›)
   - **é•¿æœŸ (6-12 æœˆ)**: è·¨å›¢é˜Ÿå·¥å…·å¤ç”¨ (åç«¯å†™çš„ MCP Server, äº§å“/è¿è¥ä¹Ÿèƒ½ç”¨)

### For æ¶æ„å¸ˆ/é«˜çº§å·¥ç¨‹å¸ˆ

1. **æ¶æ„å†³ç­–**:
   - **API è®¾è®¡**: æ–°çš„å†…éƒ¨æœåŠ¡ä¼˜å…ˆæä¾› MCP æ¥å£ (è€Œéä»… REST API)
   - **å¾®æœåŠ¡æ¶æ„**: æ¯ä¸ªå¾®æœåŠ¡æš´éœ² MCP Server â†’ AI èƒ½ç›´æ¥ç¼–æ’æœåŠ¡è°ƒç”¨
   - **é—ç•™ç³»ç»Ÿ**: ç”¨ MCP Adapter åŒ…è£…è€ API â†’ æ¸è¿›å¼è¿ç§»

2. **æ€§èƒ½ä¼˜åŒ–é‡ç‚¹**:
   - **å·¥å…·å‘ç°**: ç¼“å­˜ `tools/list` ç»“æœ (60 ç§’ TTL)
   - **å¤§ç»“æœé›†**: å®ç°åˆ†é¡µ (`offset` + `limit` å‚æ•°)
   - **é•¿è€—æ—¶æ“ä½œ**: è¿”å› `task_id` + æä¾› `get_task_status` å·¥å…· (å¼‚æ­¥æ¨¡å¼)

3. **å¯è§‚æµ‹æ€§è®¾è®¡**:
   ```python
   # åœ¨æ¯ä¸ª MCP Server ä¸­æš´éœ²ç›‘æ§å·¥å…·
   {
     "name": "server_health",
     "description": "Get server health metrics",
     "returns": {
       "uptime_seconds": 86400,
       "requests_total": 12500,
       "error_rate": 0.002,
       "p95_latency_ms": 45
     }
   }
   ```

4. **æ‰©å±•æ€§æ¨¡å¼**:
   - **æ°´å¹³æ‰©å±•**: ç”¨ Kubernetes éƒ¨ç½² MCP Server (HTTP æ¨¡å¼)
   - **è´Ÿè½½å‡è¡¡**: Nginx/Envoy å‰ç½® (AI å®¢æˆ·ç«¯é…ç½® LB åœ°å€)
   - **å¤šç§Ÿæˆ·**: æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹ MCP Server å®ä¾‹ (èµ„æºéš”ç¦»)

5. **æœªæ¥å‡†å¤‡**: å…³æ³¨ MCP 2026 è§„èŒƒè‰æ¡ˆ (é¢„è®¡æ–°å¢ Streaming Tools, Binary Resources)

---

## 9. Glossary

| æœ¯è¯­ | ä¸­æ–‡ | å®šä¹‰ |
|------|------|------|
| **MCP (Model Context Protocol)** | æ¨¡å‹ä¸Šä¸‹æ–‡åè®® | AI åº”ç”¨ä¸å¤–éƒ¨å·¥å…·é€šä¿¡çš„å¼€æºæ ‡å‡†åè®® |
| **MCP Host** | MCP ä¸»æœº | åè°ƒå¤šä¸ª MCP å®¢æˆ·ç«¯çš„ AI åº”ç”¨ (å¦‚ Claude Desktop) |
| **MCP Client** | MCP å®¢æˆ·ç«¯ | ç»´æŒä¸ MCP æœåŠ¡å™¨è¿æ¥å¹¶ç¿»è¯‘åè®®çš„ç»„ä»¶ |
| **MCP Server** | MCP æœåŠ¡å™¨ | æš´éœ²å·¥å…·ã€èµ„æºã€æç¤ºè¯çš„ç¨‹åº (å¦‚ GitHub Server) |
| **Tool** | å·¥å…· | å¯æ‰§è¡Œçš„å‡½æ•°è°ƒç”¨ (å¦‚ `create_issue`, `query_database`) |
| **Resource** | èµ„æº | å¯è¯»å–çš„æ•°æ®æº (å¦‚æ–‡ä»¶å†…å®¹ã€API å“åº”) |
| **Prompt** | æç¤ºè¯æ¨¡æ¿ | å¯å¤ç”¨çš„äº¤äº’æ¨¡æ¿ (å¦‚ç³»ç»Ÿæç¤ºè¯) |
| **Stdio Transport** | æ ‡å‡†è¾“å…¥è¾“å‡ºä¼ è¾“ | é€šè¿‡è¿›ç¨‹çš„ stdin/stdout é€šä¿¡ (æœ¬åœ°æ¨¡å¼) |
| **HTTP Transport** | HTTP ä¼ è¾“ | é€šè¿‡ HTTP POST + SSE é€šä¿¡ (è¿œç¨‹æ¨¡å¼) |
| **Capability Negotiation** | èƒ½åŠ›åå•† | å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨åˆå§‹åŒ–æ—¶äº¤æ¢æ”¯æŒçš„ç‰¹æ€§ |
| **JSON-RPC 2.0** | JSON è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ | MCP æ•°æ®å±‚ä½¿ç”¨çš„åº•å±‚åè®® |
| **Sampling** | é‡‡æ · | MCP æœåŠ¡å™¨è¯·æ±‚ LLM ç”Ÿæˆè¡¥å…¨çš„èƒ½åŠ› |
| **Elicitation** | è¯±å¯¼/è¯¢é—® | MCP æœåŠ¡å™¨è¯·æ±‚ç”¨æˆ·æä¾›ä¿¡æ¯çš„èƒ½åŠ› |
| **Notification** | é€šçŸ¥ | æœåŠ¡å™¨ä¸»åŠ¨æ¨é€çš„å•å‘æ¶ˆæ¯ (æ— éœ€å“åº”) |
| **OAuth 2.1** | OAuth 2.1 è®¤è¯ | 2025 MCP è§„èŒƒå¼ºåˆ¶çš„è¿œç¨‹æœåŠ¡å™¨è®¤è¯æ ‡å‡† |
| **listChanged** | åˆ—è¡¨å˜æ›´ | å·¥å…·/èµ„æºåˆ—è¡¨å˜æ›´æ—¶çš„é€šçŸ¥æœºåˆ¶ |
| **Scope** | ä½œç”¨åŸŸ | MCP é…ç½®çš„èŒƒå›´ (local/project/user) |

---

## 10. Sources

### å®˜æ–¹èµ„æº
- [Model Context Protocol æ¶æ„æ–‡æ¡£](https://modelcontextprotocol.io/docs/learn/architecture)
- [MCP å®˜æ–¹è§„èŒƒ 2025-03-26](https://spec.modelcontextprotocol.io/specification/2025-03-26/architecture/)
- [Claude Code MCP é›†æˆæ–‡æ¡£](https://code.claude.com/docs/en/mcp)
- [Anthropic MCP å‘å¸ƒå…¬å‘Š](https://www.anthropic.com/news/model-context-protocol)

### æœ€ä½³å®è·µ
- [Docker: Top 5 MCP Server Best Practices](https://www.docker.com/blog/mcp-server-best-practices/)
- [MCP Best Practices: Architecture & Implementation](https://modelcontextprotocol.info/docs/best-practices/)

### æ•™ç¨‹ä¸å®æˆ˜
- [Microsoft MCP for Beginners (12 æ¨¡å—è¯¾ç¨‹)](https://github.com/microsoft/mcp-for-beginners)
- [ClickHouse: How to Build AI Agents with MCP - 12 æ¡†æ¶å¯¹æ¯”](https://clickhouse.com/blog/how-to-build-ai-agents-mcp-12-frameworks)

### å¯¹æ¯”åˆ†æ
- [MCP vs LangChain æ·±åº¦å¯¹æ¯”](https://www.byteplus.com/en/topic/541311)
- [LangChain å®˜æ–¹: MCP - Fad or Fixture?](https://blog.langchain.com/mcp-fad-or-fixture/)

### ç¤¾åŒºèµ„æº
- [MCP æœåŠ¡å™¨ä»“åº“](https://modelcontextprotocol.io/servers)
- [GitHub: cnych/claude-mcp (ä¸­æ–‡ç¤¾åŒº)](https://github.com/cnych/claude-mcp)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-21
**ä½œè€…**: Claude Code Research Agent
**å®¡é˜…**: ZhenZhu (æ¸…åæœºæ¢°ç¡•å£« + AI å¼€å‘è€…)

---

## Appendix A: å¿«é€Ÿå‚è€ƒå¡ç‰‡

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              MCP å¿«é€Ÿå‚è€ƒ (Quick Reference)                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  å®‰è£… MCP æœåŠ¡å™¨                                                â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ # è¿œç¨‹ HTTP                                              â”‚ â•‘
â•‘  â”‚ claude mcp add --transport http <name> <url>             â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ # æœ¬åœ° Stdio                                             â”‚ â•‘
â•‘  â”‚ claude mcp add --transport stdio <name> -- <command>     â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ # æŸ¥çœ‹å·²å®‰è£…                                             â”‚ â•‘
â•‘  â”‚ claude mcp list                                          â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                â•‘
â•‘  æ ¸å¿ƒæ¦‚å¿µ                                                       â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Tools        â”‚ å¯æ‰§è¡Œå‡½æ•° (tools/list, tools/call)       â”‚ â•‘
â•‘  â”‚ Resources    â”‚ å¯è¯»æ•°æ®æº (resources/read)               â”‚ â•‘
â•‘  â”‚ Prompts      â”‚ æç¤ºè¯æ¨¡æ¿ (prompts/get)                  â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                â•‘
â•‘  æœ€ä½³å®è·µ                                                       â•‘
â•‘  âœ… æ¯æ¬¡è°ƒç”¨å»ºç«‹æ–°è¿æ¥ (æ— çŠ¶æ€)                                  â•‘
â•‘  âœ… ç¯å¢ƒå˜é‡ç®¡ç†å¯†é’¥ (${API_KEY})                                â•‘
â•‘  âœ… ä¸º AI ä¼˜åŒ–é”™è¯¯æ¶ˆæ¯ ("éœ€è¦é…ç½® X")                             â•‘
â•‘  âœ… å•ä¸€èŒè´£æœåŠ¡å™¨ (ä¸€ä¸ªæœåŠ¡ä¸€ä¸ª Server)                          â•‘
â•‘  âŒ æ°¸è¿œä¸åœ¨ Stdio Server ä¸­å†™ stdout                            â•‘
â•‘  âŒ ä¸ç¡¬ç¼–ç  API å¯†é’¥åˆ°é…ç½®æ–‡ä»¶                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Appendix B: æ•…éšœæ’æŸ¥æŒ‡å—

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| **Server è¿æ¥å¤±è´¥** | 1. å‘½ä»¤è·¯å¾„é”™è¯¯<br>2. ç¯å¢ƒå˜é‡ç¼ºå¤± | 1. ç”¨ `which npx` æ£€æŸ¥è·¯å¾„<br>2. æ£€æŸ¥ `.env` æ–‡ä»¶ |
| **å·¥å…·è°ƒç”¨è¿”å› 401** | è®¤è¯å¤±æ•ˆ | è¿è¡Œ `/mcp` é‡æ–°ç™»å½• OAuth |
| **Stdio Server æ— å“åº”** | stdout è¢«æ±¡æŸ“ | æ£€æŸ¥æ˜¯å¦æœ‰ `print()`/`console.log()` |
| **å·¥å…·åˆ—è¡¨ä¸ºç©º** | èƒ½åŠ›åå•†å¤±è´¥ | æ£€æŸ¥ Server æ˜¯å¦å®ç° `initialize` æ–¹æ³• |
| **æ€§èƒ½æ…¢ (>1s)** | 1. æœªç¼“å­˜ `tools/list`<br>2. æ•°æ®åº“è¿æ¥æ…¢ | 1. å®ç° 60s TTL ç¼“å­˜<br>2. ç”¨è¿æ¥æ±  |
| **Windows è·¯å¾„é—®é¢˜** | `\` vs `/` | ç”¨ `cmd /c` åŒ…è£…å‘½ä»¤ |

---

**End of Document**
